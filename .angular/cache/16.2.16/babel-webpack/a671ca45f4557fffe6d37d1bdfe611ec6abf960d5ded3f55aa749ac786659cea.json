{"ast":null,"code":"import _asyncToGenerator from \"/Users/diakaria/Documents/SAITECH/ANGULAR/visitrack/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, ApplicationRef, createComponent, forwardRef, ViewEncapsulation, Injectable, Optional, Pipe, HostListener, HostBinding, NgModule, InjectionToken } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, FormGroup, FormControl, Validators as Validators$1, ReactiveFormsModule } from '@angular/forms';\nimport { Subject, isObservable, of, fromEvent, asyncScheduler } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\nimport { NgxEditorError, clamp, uniq, isNil } from 'ngx-editor/utils';\nimport { Plugin, PluginKey, NodeSelection, Selection, EditorState } from 'prosemirror-state';\nimport { DecorationSet, Decoration, EditorView } from 'prosemirror-view';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { Fragment, Slice, DOMSerializer, DOMParser } from 'prosemirror-model';\nimport { schema } from 'ngx-editor/schema';\nexport { marks, nodes, schema } from 'ngx-editor/schema';\nimport { toggleMark, lift, wrapIn, setBlockType, newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock, chainCommands, exitCode, baseKeymap } from 'prosemirror-commands';\nimport { applyMark, removeLink, removeMark } from 'ngx-editor/commands';\nimport { isMarkActive, isNodeActive, canInsert, getSelectionNodes, getSelectionMarks, markInputRule } from 'ngx-editor/helpers';\nimport { liftListItem, wrapInList, splitListItem, sinkListItem } from 'prosemirror-schema-list';\nimport { undo as undo$1, redo as redo$1, history } from 'prosemirror-history';\nimport * as i1 from '@angular/platform-browser';\nimport { computePosition, offset, autoPlacement, detectOverflow } from '@floating-ui/dom';\nimport { keymap } from 'prosemirror-keymap';\nimport { wrappingInputRule, textblockTypeInputRule, smartQuotes, ellipsis, emDash, inputRules } from 'prosemirror-inputrules';\nconst _c0 = [\"imgEl\"];\nfunction ImageViewComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 4)(1, \"span\", 5);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.startResizing($event, \"left\"));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 6);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_2_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.startResizing($event, \"right\"));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 7);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.startResizing($event, \"left\"));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 8);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.startResizing($event, \"right\"));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"NgxEditor__Resizer--Active\": a0\n  };\n};\nconst _c2 = [\"ngxEditor\"];\nconst _c3 = [\"*\"];\nfunction LinkComponent_div_4_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, (ctx_r1.href.errors == null ? null : ctx_r1.href.errors[\"pattern\"]) && ctx_r1.getLabel(\"enterValidUrl\")), \" \");\n  }\n}\nfunction LinkComponent_div_4_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r2.text.errors == null ? null : ctx_r2.text.errors[\"required\"]) && \"This is required\", \" \");\n  }\n}\nfunction LinkComponent_div_4_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"label\");\n    i0.ɵɵelement(3, \"input\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 1, ctx_r3.getLabel(\"openInNewTab\")), \" \");\n  }\n}\nfunction LinkComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function LinkComponent_div_4_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.insertLink($event));\n    });\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"div\", 5)(4, \"label\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 7);\n    i0.ɵɵtemplate(8, LinkComponent_div_4_div_8_Template, 3, 3, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5)(11, \"label\", 6);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 9);\n    i0.ɵɵtemplate(15, LinkComponent_div_4_div_15_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, LinkComponent_div_4_div_16_Template, 6, 3, \"div\", 10);\n    i0.ɵɵelementStart(17, \"button\", 11);\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"async\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"htmlFor\", ctx_r0.getId(\"link-popup-url\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 12, ctx_r0.getLabel(\"url\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r0.getId(\"link-popup-url\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.href.touched && ctx_r0.href.invalid);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"htmlFor\", ctx_r0.getId(\"link-popup-label\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 14, ctx_r0.getLabel(\"text\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r0.getId(\"link-popup-label\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.text.touched && ctx_r0.text.invalid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.options.showOpenInNewTab);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.form.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 16, ctx_r0.getLabel(\"insert\")));\n  }\n}\nconst _c4 = function (a0, a1) {\n  return {\n    \"NgxEditor__Dropdown--Active\": a0,\n    \"NgxEditor--Disabled\": a1\n  };\n};\nfunction DropdownComponent_div_4_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"mousedown\", function DropdownComponent_div_4_button_1_Template_button_mousedown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.onDropdownItemMouseClick($event, item_r2));\n    })(\"keydown.enter\", function DropdownComponent_div_4_button_1_Template_button_keydown_enter_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.onDropdownItemKeydown($event, item_r2));\n    })(\"keydown.space\", function DropdownComponent_div_4_button_1_Template_button_keydown_space_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.onDropdownItemKeydown($event, item_r2));\n    });\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c4, item_r2 === ctx_r1.activeItem, ctx_r1.disabledItems.includes(item_r2)))(\"ariaLabel\", i0.ɵɵpipeBind1(1, 4, ctx_r1.getName(item_r2)));\n    i0.ɵɵattribute(\"aria-selected\", item_r2 === ctx_r1.activeItem);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 6, ctx_r1.getName(item_r2)), \" \");\n  }\n}\nfunction DropdownComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, DropdownComponent_div_4_button_1_Template, 4, 11, \"button\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.items)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n  }\n}\nfunction ImageComponent_div_4_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, (ctx_r1.src.errors == null ? null : ctx_r1.src.errors[\"pattern\"]) && ctx_r1.getLabel(\"enterValidUrl\")), \" \");\n  }\n}\nfunction ImageComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function ImageComponent_div_4_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.insertLink($event));\n    });\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"div\", 5)(4, \"label\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 7);\n    i0.ɵɵtemplate(8, ImageComponent_div_4_div_8_Template, 3, 3, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5)(11, \"label\", 6);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 4)(16, \"div\", 5)(17, \"label\", 6);\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"input\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"button\", 11);\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"async\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"htmlFor\", ctx_r0.getId(\"image-popup-url\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 13, ctx_r0.getLabel(\"url\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r0.getId(\"image-popup-url\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.src.touched && ctx_r0.src.invalid);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"htmlFor\", ctx_r0.getId(\"image-popup-label\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 15, ctx_r0.getLabel(\"altText\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r0.getId(\"image-popup-label\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"htmlFor\", ctx_r0.getId(\"image-popup-title\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 17, ctx_r0.getLabel(\"title\")));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r0.getId(\"image-popup-title\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.form.valid || !ctx_r0.form.dirty);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(23, 19, ctx_r0.getLabel(\"insert\")));\n  }\n}\nconst _c5 = function (a0, a1) {\n  return {\n    backgroundColor: a0,\n    color: a1\n  };\n};\nconst _c6 = function (a0) {\n  return {\n    \"NgxEditor__Color--Active\": a0\n  };\n};\nfunction ColorPickerComponent_div_4_div_1_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_div_4_div_1_button_1_Template_button_mousedown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const color_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r5.onColorSelectMouseClick($event, color_r4));\n    })(\"keydown.enter\", function ColorPickerComponent_div_4_div_1_button_1_Template_button_keydown_enter_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const color_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r7.onColorSelectKeydown(color_r4));\n    })(\"keydown.space\", function ColorPickerComponent_div_4_div_1_button_1_Template_button_keydown_space_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const color_r4 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r8.onColorSelectKeydown(color_r4));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const color_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(3, _c5, color_r4, ctx_r3.getContrastYIQ(color_r4)))(\"title\", color_r4)(\"ngClass\", i0.ɵɵpureFunction1(6, _c6, ctx_r3.activeColors.includes(color_r4)));\n  }\n}\nfunction ColorPickerComponent_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ColorPickerComponent_div_4_div_1_button_1_Template, 1, 8, \"button\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const colorGroup_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", colorGroup_r2)(\"ngForTrackBy\", ctx_r1.trackByIndex);\n  }\n}\nfunction ColorPickerComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, ColorPickerComponent_div_4_div_1_Template, 2, 2, \"div\", 3);\n    i0.ɵɵelementStart(2, \"button\", 4);\n    i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_div_4_Template_button_mousedown_2_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onRemoveMouseClick($event));\n    })(\"keydown.enter\", function ColorPickerComponent_div_4_Template_button_keydown_enter_2_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onRemoveKeydown());\n    })(\"keydown.space\", function ColorPickerComponent_div_4_Template_button_keydown_space_2_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onRemoveKeydown());\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.presets)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.isActive);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 4, ctx_r0.getLabel(\"remove\")), \" \");\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-toggle-command\", 7);\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r7.iconContainerClass);\n    i0.ɵɵproperty(\"toolbarItem\", item_r5);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-insert-command\", 7);\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r8.iconContainerClass);\n    i0.ɵɵproperty(\"toolbarItem\", item_r5);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"ngx-link\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r9.iconContainerClass);\n    i0.ɵɵproperty(\"options\", ctx_r9.getLinkOptions(item_r5));\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-image\");\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r10.iconContainerClass);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-dropdown\", 10);\n  }\n  if (rf & 2) {\n    const dropdownItem_r19 = ctx.$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(4);\n    i0.ɵɵclassMap(ctx_r18.dropdownContainerClass);\n    i0.ɵɵproperty(\"group\", dropdownItem_r19.key)(\"items\", dropdownItem_r19.value);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template, 1, 4, \"ngx-dropdown\", 9);\n    i0.ɵɵpipe(2, \"keyvalue\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 2, ctx_r11.getDropdownItems(item_r5)))(\"ngForTrackBy\", ctx_r11.trackByIndex);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-color-picker\", 11);\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r12.iconContainerClass);\n    i0.ɵɵproperty(\"presets\", ctx_r12.presets);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-color-picker\", 12);\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r13.iconContainerClass);\n    i0.ɵɵproperty(\"presets\", ctx_r13.presets);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r14.seperatorClass);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template, 1, 3, \"ngx-toggle-command\", 3);\n    i0.ɵɵtemplate(2, MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template, 1, 3, \"ngx-insert-command\", 3);\n    i0.ɵɵtemplate(3, MenuComponent_ng_container_1_ng_container_1_ng_container_3_Template, 2, 3, \"ng-container\", 2);\n    i0.ɵɵtemplate(4, MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template, 1, 2, \"ngx-image\", 4);\n    i0.ɵɵtemplate(5, MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template, 3, 4, \"ng-container\", 2);\n    i0.ɵɵtemplate(6, MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template, 1, 3, \"ngx-color-picker\", 5);\n    i0.ɵɵtemplate(7, MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template, 1, 3, \"ngx-color-picker\", 6);\n    i0.ɵɵtemplate(8, MenuComponent_ng_container_1_ng_container_1_div_8_Template, 1, 2, \"div\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    const lastItem_r6 = ctx.last;\n    const lastToolbarItem_r3 = i0.ɵɵnextContext().last;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.toggleCommands.includes(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.insertCommands.includes(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isLinkItem(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isDropDown(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"text_color\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"background_color\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", lastItem_r6 && !lastToolbarItem_r3);\n  }\n}\nfunction MenuComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_Template, 9, 8, \"ng-container\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const toolbarItem_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", toolbarItem_r2)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n  }\n}\nfunction MenuComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementContainer(1, 13);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r1.customMenuRef);\n  }\n}\nconst _c7 = function (a0, a1) {\n  return {\n    \"NgxEditor--Disabled\": a0,\n    \"NgxEditor__MenuBar--Reverse\": a1\n  };\n};\nconst _c8 = function (a0, a1) {\n  return {\n    \"NgxBubbleMenu__Icon--Active\": a0,\n    \"NgxEditor--Disabled\": a1\n  };\n};\nfunction BubbleComponent_ng_container_0_ng_container_1_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"mousedown\", function BubbleComponent_ng_container_0_ng_container_1_button_1_Template_button_mousedown_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const item_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.onClick($event, item_r4));\n    });\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c8, ctx_r6.activeItems.includes(item_r4), !ctx_r6.execulableItems.includes(item_r4)))(\"title\", i0.ɵɵpipeBind1(1, 3, ctx_r6.getTitle(item_r4)))(\"innerHTML\", ctx_r6.getIcon(item_r4), i0.ɵɵsanitizeHtml);\n  }\n}\nfunction BubbleComponent_ng_container_0_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 4);\n  }\n}\nfunction BubbleComponent_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BubbleComponent_ng_container_0_ng_container_1_button_1_Template, 2, 8, \"button\", 1);\n    i0.ɵɵtemplate(2, BubbleComponent_ng_container_0_ng_container_1_div_2_Template, 1, 0, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    const lastItem_r5 = ctx.last;\n    const lastToolbarItem_r2 = i0.ɵɵnextContext().last;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.toggleCommands.includes(item_r4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", lastItem_r5 && !lastToolbarItem_r2);\n  }\n}\nfunction BubbleComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BubbleComponent_ng_container_0_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const toolbarItem_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", toolbarItem_r1)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n  }\n}\nfunction FloatingMenuComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"ngx-bubble\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"editor\", ctx_r1.editor);\n  }\n}\nconst editablePlugin = (editable = true) => {\n  return new Plugin({\n    key: new PluginKey('editable'),\n    state: {\n      init() {\n        return editable;\n      },\n      apply(tr, previousVal) {\n        return tr.getMeta('UPDATE_EDITABLE') ?? previousVal;\n      }\n    },\n    props: {\n      editable(state) {\n        return this.getState(state);\n      },\n      attributes(state) {\n        const isEnabled = this.getState(state);\n        if (isEnabled) {\n          return null;\n        }\n        return {\n          class: 'NgxEditor__Content--Disabled'\n        };\n      }\n    }\n  });\n};\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\nconst placeholderPlugin = text => {\n  return new Plugin({\n    key: new PluginKey('placeholder'),\n    state: {\n      init() {\n        return text ?? '';\n      },\n      apply(tr, previousVal) {\n        const placeholder = tr.getMeta('UPDATE_PLACEHOLDER') ?? previousVal;\n        return placeholder;\n      }\n    },\n    props: {\n      decorations(state) {\n        const {\n          doc\n        } = state;\n        const {\n          textContent,\n          childCount\n        } = doc;\n        const placeholder = this.getState(state);\n        if (!placeholder || childCount > 1) {\n          return DecorationSet.empty;\n        }\n        const decorations = [];\n        const decorate = (node, pos) => {\n          if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n            const from = pos;\n            const to = pos + node.nodeSize;\n            const placeholderNode = Decoration.node(from, to, {\n              'class': PLACEHOLDER_CLASSNAME,\n              'data-placeholder': placeholder,\n              'data-align': node.attrs['align'] ?? null\n            });\n            decorations.push(placeholderNode);\n          }\n          return false;\n        };\n        doc.descendants(decorate);\n        return DecorationSet.create(doc, decorations);\n      }\n    }\n  });\n};\nconst attributesPlugin = (attributes = {}) => {\n  return new Plugin({\n    key: new PluginKey('attributes'),\n    props: {\n      attributes\n    }\n  });\n};\nconst focusPlugin = cb => {\n  return new Plugin({\n    key: new PluginKey('focus'),\n    props: {\n      handleDOMEvents: {\n        focus: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\nconst blurPlugin = cb => {\n  return new Plugin({\n    key: new PluginKey('blur'),\n    props: {\n      handleDOMEvents: {\n        blur: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\nclass ImageViewComponent {\n  src;\n  alt = '';\n  title = '';\n  outerWidth = '';\n  selected = false;\n  view;\n  imageResize = new EventEmitter();\n  imgEl;\n  startResizing(e, direction) {\n    e.preventDefault();\n    this.resizeImage(e, direction);\n  }\n  resizeImage(evt, direction) {\n    const startX = evt.pageX;\n    const startWidth = this.imgEl.nativeElement.clientWidth;\n    const isLeftResize = direction === 'left';\n    const {\n      width\n    } = window.getComputedStyle(this.view.dom);\n    const editorWidth = parseInt(width, 10);\n    const onMouseMove = e => {\n      const currentX = e.pageX;\n      const diffInPx = currentX - startX;\n      const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx;\n      // prevent image overflow the editor\n      // prevent resizng below 20px\n      if (computedWidth > editorWidth || computedWidth < 20) {\n        return;\n      }\n      this.outerWidth = `${computedWidth}px`;\n    };\n    const onMouseUp = e => {\n      e.preventDefault();\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      this.imageResize.emit();\n    };\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n  static ɵfac = function ImageViewComponent_Factory(t) {\n    return new (t || ImageViewComponent)();\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ImageViewComponent,\n    selectors: [[\"ngx-image-view\"]],\n    viewQuery: function ImageViewComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imgEl = _t.first);\n      }\n    },\n    inputs: {\n      src: \"src\",\n      alt: \"alt\",\n      title: \"title\",\n      outerWidth: \"outerWidth\",\n      selected: \"selected\",\n      view: \"view\"\n    },\n    outputs: {\n      imageResize: \"imageResize\"\n    },\n    decls: 4,\n    vars: 9,\n    consts: [[1, \"NgxEditor__ImageWrapper\", 3, \"ngClass\"], [\"class\", \"NgxEditor__ResizeHandle\", 4, \"ngIf\"], [3, \"src\", \"alt\", \"title\"], [\"imgEl\", \"\"], [1, \"NgxEditor__ResizeHandle\"], [1, \"NgxEditor__ResizeHandle--TL\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--TR\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--BL\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--BR\", 3, \"mousedown\"]],\n    template: function ImageViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"span\", 0);\n        i0.ɵɵtemplate(1, ImageViewComponent_span_1_Template, 5, 0, \"span\", 1);\n        i0.ɵɵelement(2, \"img\", 2, 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"width\", ctx.outerWidth);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c1, ctx.selected));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"src\", ctx.src, i0.ɵɵsanitizeUrl)(\"alt\", ctx.alt)(\"title\", ctx.title);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgIf],\n    styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}\"]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageViewComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image-view',\n      template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{ 'NgxEditor__Resizer--Active': selected }\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"]\n    }]\n  }], null, {\n    src: [{\n      type: Input\n    }],\n    alt: [{\n      type: Input\n    }],\n    title: [{\n      type: Input\n    }],\n    outerWidth: [{\n      type: Input\n    }],\n    selected: [{\n      type: Input\n    }],\n    view: [{\n      type: Input\n    }],\n    imageResize: [{\n      type: Output\n    }],\n    imgEl: [{\n      type: ViewChild,\n      args: ['imgEl', {\n        static: true\n      }]\n    }]\n  });\n})();\nclass ImageRezieView {\n  dom;\n  view;\n  getPos;\n  applicationRef;\n  imageComponentRef;\n  resizeSubscription;\n  node;\n  updating = false;\n  constructor(node, view, getPos, injector) {\n    this.applicationRef = injector.get(ApplicationRef);\n    // create component ref\n    this.imageComponentRef = createComponent(ImageViewComponent, {\n      environmentInjector: this.applicationRef.injector\n    });\n    // Attach to the view so that the change detector knows to run\n    this.applicationRef.attachView(this.imageComponentRef.hostView);\n    this.setNodeAttributes(node.attrs);\n    this.imageComponentRef.instance.view = view;\n    this.dom = this.imageComponentRef.location.nativeElement;\n    this.view = view;\n    this.node = node;\n    this.getPos = getPos;\n    this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n      this.handleResize();\n    });\n  }\n  computeChanges(prevAttrs, newAttrs) {\n    return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n  }\n  setNodeAttributes(attrs) {\n    this.imageComponentRef.instance.src = attrs['src'];\n    this.imageComponentRef.instance.alt = attrs['alt'];\n    this.imageComponentRef.instance.title = attrs['title'];\n    this.imageComponentRef.instance.outerWidth = attrs['width'];\n  }\n  handleResize = () => {\n    if (this.updating) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.view;\n    const {\n      tr\n    } = state;\n    const transaction = tr.setNodeMarkup(this.getPos(), undefined, {\n      ...this.node.attrs,\n      width: this.imageComponentRef.instance.outerWidth\n    });\n    const resolvedPos = transaction.doc.resolve(this.getPos());\n    const newSelection = new NodeSelection(resolvedPos);\n    transaction.setSelection(newSelection);\n    dispatch(transaction);\n  };\n  update(node) {\n    if (node.type !== this.node.type) {\n      return false;\n    }\n    this.node = node;\n    const changed = this.computeChanges(this.node.attrs, node.attrs);\n    if (changed) {\n      this.updating = true;\n      this.setNodeAttributes(node.attrs);\n      this.updating = false;\n    }\n    return true;\n  }\n  ignoreMutation() {\n    return true;\n  }\n  selectNode() {\n    this.imageComponentRef.instance.selected = true;\n  }\n  deselectNode() {\n    this.imageComponentRef.instance.selected = false;\n  }\n  destroy() {\n    this.resizeSubscription.unsubscribe();\n    this.applicationRef.detachView(this.imageComponentRef.hostView);\n  }\n}\nconst imageResizePlugin = injector => {\n  return new Plugin({\n    key: new PluginKey('image-resize'),\n    props: {\n      nodeViews: {\n        image: (node, view, getPos) => {\n          return new ImageRezieView(node, view, getPos, injector);\n        }\n      }\n    }\n  });\n};\nconst HTTP_LINK_REGEX = /(?:https?:\\/\\/)?[\\w-]+(?:\\.[\\w-]+)+\\.?(?:\\d+)?(?:\\/\\S*)?$/;\nconst linkify = fragment => {\n  const linkified = [];\n  fragment.forEach(child => {\n    if (child.isText) {\n      const text = child.text;\n      let pos = 0;\n      const match = HTTP_LINK_REGEX.exec(text);\n      if (match) {\n        const start = match.index;\n        const end = start + match[0].length;\n        const {\n          link\n        } = child.type.schema.marks;\n        if (start > 0) {\n          linkified.push(child.cut(pos, start));\n        }\n        const urlText = text.slice(start, end);\n        linkified.push(child.cut(start, end).mark(link.create({\n          href: urlText\n        }).addToSet(child.marks)));\n        pos = end;\n      }\n      if (pos < text.length) {\n        linkified.push(child.cut(pos));\n      }\n    } else {\n      linkified.push(child.copy(linkify(child.content)));\n    }\n  });\n  return Fragment.fromArray(linkified);\n};\nconst linkifyPlugin = () => {\n  return new Plugin({\n    key: new PluginKey('linkify'),\n    props: {\n      transformPasted: slice => {\n        return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n      }\n    }\n  });\n};\nconst isString = value => {\n  return typeof value === 'string';\n};\nconst getTrustedTypes = () => {\n  return window.trustedTypes;\n};\nconst isTrustedHtml = value => {\n  return getTrustedTypes()?.isHTML(value) ?? false;\n};\nconst isHtml = value => {\n  return isString(value) || isTrustedHtml(value);\n};\nconst emptyDoc = {\n  type: 'doc',\n  content: [{\n    type: 'paragraph'\n  }]\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nconst toHTML = (json, inputSchema) => {\n  const schema$1 = inputSchema ?? schema;\n  const contentNode = schema$1.nodeFromJSON(json);\n  const html = DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content);\n  const div = document.createElement('div');\n  div.appendChild(html);\n  return div.innerHTML;\n};\nconst toDoc = (html, inputSchema, options) => {\n  const schema$1 = inputSchema ?? schema;\n  const el = document.createElement('div');\n  el.innerHTML = html;\n  return DOMParser.fromSchema(schema$1).parse(el, options).toJSON();\n};\nconst parseContent = (value, schema, options) => {\n  if (!value) {\n    return schema.nodeFromJSON(emptyDoc);\n  }\n  if (!isHtml(value)) {\n    return schema.nodeFromJSON(value);\n  }\n  const docJson = toDoc(value, schema, options);\n  return schema.nodeFromJSON(docJson);\n};\nclass NgxEditorComponent {\n  renderer;\n  injector;\n  elementRef;\n  constructor(renderer, injector, elementRef) {\n    this.renderer = renderer;\n    this.injector = injector;\n    this.elementRef = elementRef;\n  }\n  ngxEditor;\n  editor;\n  outputFormat;\n  placeholder = 'Type Here...';\n  focusOut = new EventEmitter();\n  focusIn = new EventEmitter();\n  unsubscribe = new Subject();\n  onChange = () => {};\n  onTouched = () => {};\n  writeValue(value) {\n    if (!this.outputFormat && isHtml(value)) {\n      this.outputFormat = 'html';\n    }\n    this.editor.setContent(value ?? emptyDoc);\n  }\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  setDisabledState(isDisabled) {\n    this.setMeta('UPDATE_EDITABLE', !isDisabled);\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n  handleChange(jsonDoc) {\n    if (this.outputFormat === 'html') {\n      const html = toHTML(jsonDoc, this.editor.schema);\n      this.onChange(html);\n      return;\n    }\n    this.onChange(jsonDoc);\n  }\n  setMeta(key, value) {\n    const {\n      dispatch,\n      state: {\n        tr\n      }\n    } = this.editor.view;\n    dispatch(tr.setMeta(key, value));\n  }\n  setPlaceholder(placeholder) {\n    this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n  }\n  registerPlugins() {\n    this.editor.registerPlugin(editablePlugin());\n    this.editor.registerPlugin(placeholderPlugin(this.placeholder));\n    this.editor.registerPlugin(attributesPlugin({\n      class: 'NgxEditor__Content'\n    }));\n    this.editor.registerPlugin(focusPlugin(() => {\n      this.focusIn.emit();\n    }));\n    this.editor.registerPlugin(blurPlugin(() => {\n      this.focusOut.emit();\n      this.onTouched();\n    }));\n    if (this.editor.features.resizeImage) {\n      this.editor.registerPlugin(imageResizePlugin(this.injector));\n    }\n    if (this.editor.features.linkOnPaste) {\n      this.editor.registerPlugin(linkifyPlugin());\n    }\n  }\n  ngOnInit() {\n    if (!this.editor) {\n      throw new NgxEditorError('Required editor instance for initializing editor component');\n    }\n    this.registerPlugins();\n    this.renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n    this.editor.valueChanges.pipe(takeUntil(this.unsubscribe)).subscribe(jsonDoc => {\n      this.handleChange(jsonDoc);\n    });\n  }\n  ngOnChanges(changes) {\n    if (changes['placeholder'] && !changes['placeholder'].isFirstChange()) {\n      this.setPlaceholder(changes['placeholder'].currentValue);\n    }\n  }\n  ngOnDestroy() {\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n  static ɵfac = function NgxEditorComponent_Factory(t) {\n    return new (t || NgxEditorComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: NgxEditorComponent,\n    selectors: [[\"ngx-editor\"]],\n    viewQuery: function NgxEditorComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c2, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ngxEditor = _t.first);\n      }\n    },\n    inputs: {\n      editor: \"editor\",\n      outputFormat: \"outputFormat\",\n      placeholder: \"placeholder\"\n    },\n    outputs: {\n      focusOut: \"focusOut\",\n      focusIn: \"focusIn\"\n    },\n    features: [i0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgxEditorComponent),\n      multi: true\n    }]), i0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c3,\n    decls: 3,\n    vars: 0,\n    consts: [[1, \"NgxEditor\"], [\"ngxEditor\", \"\"]],\n    template: function NgxEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"div\", 0, 1);\n        i0.ɵɵprojection(2);\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\":root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}\\n\"],\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor',\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => NgxEditorComponent),\n        multi: true\n      }],\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\",\n      styles: [\":root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}\\n\"]\n    }]\n  }], () => [{\n    type: i0.Renderer2\n  }, {\n    type: i0.Injector\n  }, {\n    type: i0.ElementRef\n  }], {\n    ngxEditor: [{\n      type: ViewChild,\n      args: ['ngxEditor', {\n        static: true\n      }]\n    }],\n    editor: [{\n      type: Input\n    }],\n    outputFormat: [{\n      type: Input\n    }],\n    placeholder: [{\n      type: Input\n    }],\n    focusOut: [{\n      type: Output\n    }],\n    focusIn: [{\n      type: Output\n    }]\n  });\n})();\nclass MenuService {\n  editor;\n  customMenuRefChange = new Subject();\n  setCustomMenuRef(c) {\n    this.customMenuRefChange.next(c);\n  }\n  static ɵfac = function MenuService_Factory(t) {\n    return new (t || MenuService)();\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: MenuService,\n    factory: MenuService.ɵfac,\n    providedIn: 'root'\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass Mark {\n  name;\n  constructor(name) {\n    this.name = name;\n  }\n  apply() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      return applyMark(type)(state, dispatch);\n    };\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      return toggleMark(type)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.marks[this.name];\n    if (!type) {\n      return false;\n    }\n    return isMarkActive(state, type);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass Blockqote {\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.nodes['blockquote'];\n      if (!type) {\n        return false;\n      }\n      if (this.isActive(state)) {\n        return lift(state, dispatch);\n      }\n      return wrapIn(type)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.nodes['blockquote'];\n    if (!type) {\n      return false;\n    }\n    return isNodeActive(state, type);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass HorizontalRule {\n  insert() {\n    return (state, dispatch) => {\n      const {\n        schema,\n        tr\n      } = state;\n      const type = schema.nodes['horizontal_rule'];\n      if (!type) {\n        return false;\n      }\n      dispatch(tr.replaceSelectionWith(type.create()).scrollIntoView());\n      return true;\n    };\n  }\n  canExecute(state) {\n    return canInsert(state, state.schema.nodes['horizontal_rule']);\n  }\n}\nclass ListItem {\n  isBulletList = false;\n  constructor(isBulletList = false) {\n    this.isBulletList = isBulletList;\n  }\n  getType(schema) {\n    return this.isBulletList ? schema.nodes['bullet_list'] : schema.nodes['ordered_list'];\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = this.getType(schema);\n      if (!type) {\n        return false;\n      }\n      if (this.isActive(state)) {\n        return liftListItem(schema.nodes['list_item'])(state, dispatch);\n      }\n      return wrapInList(type)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = this.getType(schema);\n    if (!type) {\n      return false;\n    }\n    return isNodeActive(state, type);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass Heading {\n  level;\n  constructor(level) {\n    this.level = level;\n  }\n  apply() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.nodes['heading'];\n      if (!type) {\n        return false;\n      }\n      return setBlockType(type)(state, dispatch);\n    };\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection,\n        doc\n      } = state;\n      const type = schema.nodes['heading'];\n      if (!type) {\n        return false;\n      }\n      const nodePos = selection.$from.before(1);\n      const node = doc.nodeAt(nodePos);\n      const attrs = node?.attrs ?? {};\n      if (this.isActive(state)) {\n        return setBlockType(schema.nodes['paragraph'], attrs)(state, dispatch);\n      }\n      return setBlockType(type, {\n        ...attrs,\n        level: this.level\n      })(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const nodesInSelection = getSelectionNodes(state);\n    const type = schema.nodes['heading'];\n    if (!type) {\n      return false;\n    }\n    const supportedNodes = [type, schema.nodes['text'], schema.nodes['blockquote']];\n    // heading is a text node\n    // don't mark as active when it has more nodes\n    const nodes = nodesInSelection.filter(node => {\n      return supportedNodes.includes(node.type);\n    });\n    const acitveNode = nodes.find(node => {\n      return node.attrs['level'] === this.level;\n    });\n    return Boolean(acitveNode);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass TextAlign {\n  align;\n  constructor(align) {\n    this.align = align;\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        doc,\n        selection,\n        tr,\n        schema\n      } = state;\n      const {\n        from,\n        to\n      } = selection;\n      let applicable = false;\n      doc.nodesBetween(from, to, (node, pos) => {\n        const nodeType = node.type;\n        if ([schema.nodes['paragraph'], schema.nodes['heading']].includes(nodeType)) {\n          applicable = true;\n          const align = node.attrs['align'] === this.align ? null : this.align;\n          tr.setNodeMarkup(pos, nodeType, {\n            ...node.attrs,\n            align\n          });\n        }\n        return true;\n      });\n      if (!applicable) {\n        return false;\n      }\n      if (tr.docChanged) {\n        dispatch?.(tr);\n      }\n      return true;\n    };\n  }\n  isActive(state) {\n    const nodes = getSelectionNodes(state);\n    const active = nodes.find(node => {\n      return node.attrs['align'] === this.align;\n    });\n    return Boolean(active);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nconst defaultOptions = {\n  strict: true\n};\nlet Link$1 = class Link {\n  update(attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection\n      } = state;\n      const type = schema.marks['link'];\n      if (!type) {\n        return false;\n      }\n      if (selection.empty) {\n        return false;\n      }\n      return toggleMark(type, attrs)(state, dispatch);\n    };\n  }\n  insert(text, attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        tr\n      } = state;\n      const type = schema.marks['link'];\n      if (!type) {\n        return false;\n      }\n      const linkAttrs = {\n        href: attrs.href,\n        title: attrs.title ?? text,\n        target: attrs.target ?? '_blank'\n      };\n      const node = schema.text(text, [schema.marks['link'].create(linkAttrs)]);\n      tr.replaceSelectionWith(node, false).scrollIntoView();\n      if (tr.docChanged) {\n        dispatch?.(tr);\n        return true;\n      }\n      return false;\n    };\n  }\n  isActive(state, options = defaultOptions) {\n    if (options.strict) {\n      return true;\n    }\n    const {\n      schema\n    } = state;\n    const type = schema.marks['link'];\n    if (!type) {\n      return false;\n    }\n    return isMarkActive(state, type);\n  }\n  remove(state, dispatch) {\n    return removeLink()(state, dispatch);\n  }\n  canExecute(state) {\n    const testAttrs = {\n      href: ''\n    };\n    return this.insert('Exec', testAttrs)(state) || this.update(testAttrs)(state);\n  }\n};\nlet Image$1 = class Image {\n  insert(src, attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        tr,\n        selection\n      } = state;\n      const type = schema.nodes['image'];\n      if (!type) {\n        return false;\n      }\n      const imageAttrs = {\n        width: null,\n        src,\n        ...attrs\n      };\n      if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n        imageAttrs.width = selection.node.attrs['width'];\n      }\n      tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n      const resolvedPos = tr.doc.resolve(tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize);\n      tr.setSelection(new NodeSelection(resolvedPos)).scrollIntoView();\n      if (tr.docChanged) {\n        dispatch?.(tr);\n        return true;\n      }\n      return false;\n    };\n  }\n  isActive(state) {\n    const {\n      selection\n    } = state;\n    if (selection instanceof NodeSelection) {\n      return selection.node.type.name === 'image';\n    }\n    return false;\n  }\n};\nlet TextColor$1 = class TextColor {\n  name;\n  attrName;\n  constructor(name, attrName = 'color') {\n    this.name = name;\n    this.attrName = attrName;\n  }\n  apply(attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection,\n        doc\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      const {\n        from,\n        to,\n        empty\n      } = selection;\n      if (!empty && from + 1 === to) {\n        const node = doc.nodeAt(from);\n        if (node?.isAtom && !node.isText && node.isLeaf) {\n          // An atomic node (e.g. Image) is selected.\n          return false;\n        }\n      }\n      return applyMark(type, attrs)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.marks[this.name];\n    if (!type) {\n      return false;\n    }\n    return isMarkActive(state, type);\n  }\n  getActiveColors(state) {\n    if (!this.isActive(state)) {\n      return [];\n    }\n    const {\n      schema\n    } = state;\n    const marks = getSelectionMarks(state);\n    const colors = marks.filter(mark => mark.type === schema.marks[this.name]).map(mark => {\n      return mark.attrs[this.attrName];\n    }).filter(Boolean);\n    return colors;\n  }\n  remove() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      return removeMark(type)(state, dispatch);\n    };\n  }\n  canExecute(state) {\n    const attrs = this.name === 'text_color' ? {\n      color: ''\n    } : {\n      backgroundColor: ''\n    };\n    return this.apply(attrs)(state);\n  }\n};\nconst SAFE_MARKS = ['link'];\nclass FormatClear {\n  insert() {\n    return (state, dispatch) => {\n      const {\n        tr\n      } = state;\n      const {\n        ranges,\n        empty\n      } = tr.selection;\n      if (empty) {\n        return true;\n      }\n      Object.entries(state.schema.marks).forEach(([markType, mark]) => {\n        if (SAFE_MARKS.includes(markType)) {\n          return;\n        }\n        ranges.forEach(range => {\n          tr.removeMark(range.$from.pos, range.$to.pos, mark);\n        });\n      });\n      dispatch(tr);\n      return true;\n    };\n  }\n  canExecute() {\n    return true;\n  }\n}\nconst indentNodeTypes = ['paragraph', 'heading', 'blockquote'];\nconst minIndent = 0;\nconst maxIndent = 10;\nconst udpateIndentLevel = (tr, pos, method) => {\n  const node = tr.doc.nodeAt(pos);\n  if (!node) {\n    return false;\n  }\n  const nodeIndent = node.attrs['indent'] ?? 0;\n  const newIndent = clamp(nodeIndent + (method === 'increase' ? 1 : -1), minIndent, maxIndent);\n  if (newIndent === nodeIndent || newIndent < minIndent || newIndent > maxIndent) {\n    return false;\n  }\n  const attrs = {\n    ...node.attrs,\n    indent: newIndent\n  };\n  tr.setNodeMarkup(pos, node.type, attrs);\n  return true;\n};\nclass Indent {\n  method = 'increase';\n  constructor(method) {\n    this.method = method;\n  }\n  insert() {\n    return (state, dispatch) => {\n      const {\n        tr,\n        doc\n      } = state;\n      const {\n        from,\n        to\n      } = tr.selection;\n      let applicable = false;\n      doc.nodesBetween(from, to, (node, pos) => {\n        const nodeType = node.type;\n        if (indentNodeTypes.includes(nodeType.name)) {\n          applicable = udpateIndentLevel(tr, pos, this.method);\n          return false;\n        } else if (node.type.name.includes('list')) {\n          return false;\n        }\n        return true;\n      });\n      if (!applicable) {\n        return false;\n      }\n      if (tr.docChanged) {\n        dispatch?.(tr);\n      }\n      return true;\n    };\n  }\n  canExecute(state) {\n    return this.insert()(state);\n  }\n}\nclass History {\n  mode = 'undo';\n  constructor(mode) {\n    this.mode = mode;\n  }\n  insert() {\n    return (state, dispatch) => {\n      if (this.mode === 'undo') {\n        return undo$1(state, dispatch);\n      }\n      return redo$1(state, dispatch);\n    };\n  }\n  canExecute(state) {\n    return this.insert()(state);\n  }\n}\nconst STRONG = new Mark('strong');\nconst EM = new Mark('em');\nconst CODE = new Mark('code');\nconst UNDERLINE = new Mark('u');\nconst STRIKE = new Mark('s');\nconst BLOCKQUOTE = new Blockqote();\nconst HORIZONTAL_RULE = new HorizontalRule();\nconst FORMAT_CLEAR = new FormatClear();\nconst UL = new ListItem(true);\nconst OL = new ListItem(false);\nconst H1 = new Heading(1);\nconst H2 = new Heading(2);\nconst H3 = new Heading(3);\nconst H4 = new Heading(4);\nconst H5 = new Heading(5);\nconst H6 = new Heading(6);\nconst ALIGN_LEFT = new TextAlign('left');\nconst ALIGN_CENTER = new TextAlign('center');\nconst ALIGN_RIGHT = new TextAlign('right');\nconst ALIGN_JUSTIFY = new TextAlign('justify');\nconst LINK = new Link$1();\nconst IMAGE = new Image$1();\nconst TEXT_COLOR = new TextColor$1('text_color', 'color');\nconst TEXT_BACKGROUND_COLOR = new TextColor$1('text_background_color', 'backgroundColor');\nconst INDENT = new Indent('increase');\nconst OUTDENT = new Indent('decrease');\nconst SUPERSCRIPT = new Mark('sup');\nconst SUBSCRIPT = new Mark('sub');\nconst UNDO = new History('undo');\nconst REDO = new History('redo');\nconst ToggleCommands = {\n  bold: STRONG,\n  italic: EM,\n  code: CODE,\n  underline: UNDERLINE,\n  strike: STRIKE,\n  blockquote: BLOCKQUOTE,\n  bullet_list: UL,\n  ordered_list: OL,\n  h1: H1,\n  h2: H2,\n  h3: H3,\n  h4: H4,\n  h5: H5,\n  h6: H6,\n  align_left: ALIGN_LEFT,\n  align_center: ALIGN_CENTER,\n  align_right: ALIGN_RIGHT,\n  align_justify: ALIGN_JUSTIFY,\n  superscript: SUPERSCRIPT,\n  subscript: SUBSCRIPT\n};\nconst InsertCommands = {\n  horizontal_rule: HORIZONTAL_RULE,\n  format_clear: FORMAT_CLEAR,\n  indent: INDENT,\n  outdent: OUTDENT,\n  undo: UNDO,\n  redo: REDO\n};\nconst Link = LINK;\nconst Image = IMAGE;\nconst TextColor = TEXT_COLOR;\nconst TextBackgroundColor = TEXT_BACKGROUND_COLOR;\nconst defaults = {\n  // menu\n  bold: 'Bold',\n  italic: 'Italic',\n  code: 'Code',\n  underline: 'Underline',\n  strike: 'Strike',\n  blockquote: 'Blockquote',\n  bullet_list: 'Bullet List',\n  ordered_list: 'Ordered List',\n  heading: 'Heading',\n  h1: 'Header 1',\n  h2: 'Header 2',\n  h3: 'Header 3',\n  h4: 'Header 4',\n  h5: 'Header 5',\n  h6: 'Header 6',\n  align_left: 'Left Align',\n  align_center: 'Center Align',\n  align_right: 'Right Align',\n  align_justify: 'Justify',\n  text_color: 'Text Color',\n  background_color: 'Background Color',\n  horizontal_rule: 'Horizontal rule',\n  format_clear: 'Clear Formatting',\n  insertLink: 'Insert Link',\n  removeLink: 'Remove Link',\n  insertImage: 'Insert Image',\n  indent: 'Increase Indent',\n  outdent: 'Decrease Indent',\n  superscript: 'Superscript',\n  subscript: 'Subscript',\n  undo: 'Undo',\n  redo: 'Redo',\n  // pupups, forms, others...\n  url: 'URL',\n  text: 'Text',\n  openInNewTab: 'Open in new tab',\n  insert: 'Insert',\n  altText: 'Alt Text',\n  title: 'Title',\n  remove: 'Remove',\n  enterValidUrl: 'Please enter a valid URL'\n};\nclass Locals {\n  locals = defaults;\n  constructor(newLocals = {}) {\n    this.locals = {\n      ...defaults,\n      ...newLocals\n    };\n  }\n  get = key => {\n    const value = this.locals[key];\n    if (value) {\n      return isObservable(value) ? value : of(value);\n    }\n    return of('');\n  };\n}\nvar bold = `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\nvar italic = `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\nvar code = `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\nvar underline = `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\nvar strike = `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\nvar orderedList = `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\nvar bulletList = `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\nvar quote = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\nvar link = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\nvar unlink = `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\nvar image = `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\nvar alignLeft = `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\nvar alignCenter = `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\nvar alignRight = `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\nvar alignJustify = `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\nvar textColor = `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\nvar colorFill = `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\nvar horizontalRule = `\n  <g>\n    <rect fill=\"none\" fill-rule=\"evenodd\" height=\"24\" width=\"24\"/>\n    <rect fill-rule=\"evenodd\" height=\"2\" width=\"16\" x=\"4\" y=\"11\"/>\n  </g>\n`;\nvar formatClear = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z\"/>\n`;\nvar indent = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z\"/>';\nvar outdent = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z\"/>';\nvar superscript = '<g><rect fill=\"none\" height=\"20\" width=\"20\"/><path d=\"M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z\"/></g>';\nvar subscript = '<g><rect fill=\"none\" height=\"20\" width=\"20\"/><path d=\"M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z\"/></g>';\nvar undo = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>';\nvar redo = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>';\n\n/* eslint-disable @typescript-eslint/naming-convention */\n// Icons source: https://material.io/\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\nconst DEFAULT_ICON_FILL = 'currentColor';\nconst icons = {\n  bold,\n  italic,\n  code,\n  underline,\n  strike,\n  ordered_list: orderedList,\n  bullet_list: bulletList,\n  blockquote: quote,\n  link,\n  unlink,\n  image,\n  align_left: alignLeft,\n  align_center: alignCenter,\n  align_right: alignRight,\n  align_justify: alignJustify,\n  text_color: textColor,\n  color_fill: colorFill,\n  horizontal_rule: horizontalRule,\n  format_clear: formatClear,\n  indent,\n  outdent,\n  superscript,\n  subscript,\n  undo,\n  redo,\n  path: '<path></path>'\n};\nclass Icon {\n  static get(name, fill = DEFAULT_ICON_FILL) {\n    const fullPath = icons[name];\n    if (fullPath && (fullPath.includes('<path') || fullPath.includes('<g'))) {\n      return `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill=${fill}\n          height=${DEFAULT_ICON_HEIGHT}\n          width=${DEFAULT_ICON_WIDTH}\n        >\n          ${fullPath}\n        </svg>\n      `;\n    }\n    return fullPath;\n  }\n}\nclass NgxEditorServiceConfig {\n  locals = {};\n  icons = {};\n  static ɵfac = function NgxEditorServiceConfig_Factory(t) {\n    return new (t || NgxEditorServiceConfig)();\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: NgxEditorServiceConfig,\n    factory: NgxEditorServiceConfig.ɵfac,\n    providedIn: 'root'\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorServiceConfig, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass NgxEditorService {\n  config;\n  constructor(config) {\n    this.config = config;\n  }\n  get locals() {\n    return new Locals(this.config.locals);\n  }\n  getIcon(icon) {\n    return this.config.icons[icon] ? this.config.icons[icon] : Icon.get(icon);\n  }\n  static ɵfac = function NgxEditorService_Factory(t) {\n    return new (t || NgxEditorService)(i0.ɵɵinject(NgxEditorServiceConfig, 8));\n  };\n  static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: NgxEditorService,\n    factory: NgxEditorService.ɵfac,\n    providedIn: 'root'\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], () => [{\n    type: NgxEditorServiceConfig,\n    decorators: [{\n      type: Optional\n    }]\n  }], null);\n})();\nconst provideMyServiceOptions = config => {\n  return {\n    locals: config.locals ?? {},\n    icons: config.icons ?? {}\n  };\n};\nclass SanitizeHtmlPipe {\n  sanitizer;\n  constructor(sanitizer) {\n    this.sanitizer = sanitizer;\n  }\n  transform(value) {\n    if (isTrustedHtml(value)) {\n      return value;\n    }\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n  }\n  static ɵfac = function SanitizeHtmlPipe_Factory(t) {\n    return new (t || SanitizeHtmlPipe)(i0.ɵɵdirectiveInject(i1.DomSanitizer, 16));\n  };\n  static ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n    name: \"sanitizeHtml\",\n    type: SanitizeHtmlPipe,\n    pure: true\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SanitizeHtmlPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'sanitizeHtml'\n    }]\n  }], () => [{\n    type: i1.DomSanitizer\n  }], null);\n})();\nclass ToggleCommandComponent {\n  ngxeService;\n  menuService;\n  toolbarItem;\n  get name() {\n    return this.toolbarItem;\n  }\n  html;\n  editorView;\n  isActive = false;\n  disabled = false;\n  updateSubscription;\n  constructor(ngxeService, menuService) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n  }\n  toggle() {\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    const command = ToggleCommands[this.name];\n    command.toggle()(state, dispatch);\n  }\n  onMouseClick(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    this.toggle();\n  }\n  onKeydown() {\n    this.toggle();\n  }\n  update = view => {\n    const {\n      state\n    } = view;\n    const command = ToggleCommands[this.name];\n    this.isActive = command.isActive(state);\n    this.disabled = !command.canExecute(state);\n  };\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n  ngOnInit() {\n    this.html = this.ngxeService.getIcon(this.name);\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function ToggleCommandComponent_Factory(t) {\n    return new (t || ToggleCommandComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ToggleCommandComponent,\n    selectors: [[\"ngx-toggle-command\"]],\n    inputs: {\n      toolbarItem: \"toolbarItem\"\n    },\n    decls: 4,\n    vars: 14,\n    consts: [[\"type\", \"button\", 1, \"NgxEditor__MenuItem--Icon\", 3, \"disabled\", \"innerHTML\", \"title\", \"ariaLabel\", \"mousedown\", \"keydown.enter\", \"keydown.space\"]],\n    template: function ToggleCommandComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mousedown\", function ToggleCommandComponent_Template_button_mousedown_0_listener($event) {\n          return ctx.onMouseClick($event);\n        })(\"keydown.enter\", function ToggleCommandComponent_Template_button_keydown_enter_0_listener() {\n          return ctx.onKeydown();\n        })(\"keydown.space\", function ToggleCommandComponent_Template_button_keydown_space_0_listener() {\n          return ctx.onKeydown();\n        });\n        i0.ɵɵpipe(1, \"sanitizeHtml\");\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive)(\"NgxEditor--Disabled\", ctx.disabled);\n        i0.ɵɵproperty(\"disabled\", ctx.disabled)(\"innerHTML\", i0.ɵɵpipeBind1(1, 8, ctx.html), i0.ɵɵsanitizeHtml)(\"title\", i0.ɵɵpipeBind1(2, 10, ctx.getTitle(ctx.name)))(\"ariaLabel\", i0.ɵɵpipeBind1(3, 12, ctx.getTitle(ctx.name)));\n      }\n    },\n    dependencies: [i3.AsyncPipe, SanitizeHtmlPipe]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ToggleCommandComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-toggle-command',\n      template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"onMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onKeydown()\\\"\\n  (keydown.space)=\\\"onKeydown()\\\"\\n  [title]=\\\"getTitle(name) | async\\\"\\n  [ariaLabel]=\\\"getTitle(name) | async\\\"\\n></button>\\n\"\n    }]\n  }], () => [{\n    type: NgxEditorService\n  }, {\n    type: MenuService\n  }], {\n    toolbarItem: [{\n      type: Input\n    }]\n  });\n})();\nclass InsertCommandComponent {\n  ngxeService;\n  menuService;\n  toolbarItem;\n  get name() {\n    return this.toolbarItem;\n  }\n  html;\n  editorView;\n  disabled = false;\n  updateSubscription;\n  constructor(ngxeService, menuService) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n  }\n  onMouseClick(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    this.insert();\n  }\n  onKeydown() {\n    this.insert();\n  }\n  insert() {\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    const command = InsertCommands[this.name];\n    command.insert()(state, dispatch);\n  }\n  update = view => {\n    const {\n      state\n    } = view;\n    const command = InsertCommands[this.name];\n    this.disabled = !command.canExecute(state);\n  };\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n  ngOnInit() {\n    this.html = this.ngxeService.getIcon(this.name);\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function InsertCommandComponent_Factory(t) {\n    return new (t || InsertCommandComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: InsertCommandComponent,\n    selectors: [[\"ngx-insert-command\"]],\n    inputs: {\n      toolbarItem: \"toolbarItem\"\n    },\n    decls: 4,\n    vars: 12,\n    consts: [[1, \"NgxEditor__MenuItem--Icon\", 3, \"disabled\", \"innerHTML\", \"title\", \"ariaLabel\", \"mousedown\", \"keydown.enter\", \"keydown.space\"]],\n    template: function InsertCommandComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mousedown\", function InsertCommandComponent_Template_button_mousedown_0_listener($event) {\n          return ctx.onMouseClick($event);\n        })(\"keydown.enter\", function InsertCommandComponent_Template_button_keydown_enter_0_listener() {\n          return ctx.onKeydown();\n        })(\"keydown.space\", function InsertCommandComponent_Template_button_keydown_space_0_listener() {\n          return ctx.onKeydown();\n        });\n        i0.ɵɵpipe(1, \"sanitizeHtml\");\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"NgxEditor--Disabled\", ctx.disabled);\n        i0.ɵɵproperty(\"disabled\", ctx.disabled)(\"innerHTML\", i0.ɵɵpipeBind1(1, 6, ctx.html), i0.ɵɵsanitizeHtml)(\"title\", i0.ɵɵpipeBind1(2, 8, ctx.getTitle(ctx.name)))(\"ariaLabel\", i0.ɵɵpipeBind1(3, 10, ctx.getTitle(ctx.name)));\n      }\n    },\n    dependencies: [i3.AsyncPipe, SanitizeHtmlPipe]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(InsertCommandComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-insert-command',\n      template: \"<button\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\"\\n  [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"onMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onKeydown()\\\"\\n  (keydown.space)=\\\"onKeydown()\\\"\\n  [title]=\\\"getTitle(name) | async\\\"\\n  [ariaLabel]=\\\"getTitle(name) | async\\\"\\n></button>\\n\"\n    }]\n  }], () => [{\n    type: NgxEditorService\n  }, {\n    type: MenuService\n  }], {\n    toolbarItem: [{\n      type: Input\n    }]\n  });\n})();\nconst DEFAULT_LINK_OPTIONS = {\n  showOpenInNewTab: true\n};\nclass LinkComponent {\n  el;\n  ngxeService;\n  menuService;\n  options = DEFAULT_LINK_OPTIONS;\n  showPopup = false;\n  isActive = false;\n  canExecute = true;\n  componentId = uniq();\n  form;\n  editorView;\n  updateSubscription;\n  constructor(el, ngxeService, menuService) {\n    this.el = el;\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n  }\n  get icon() {\n    return this.ngxeService.getIcon(this.isActive ? 'unlink' : 'link');\n  }\n  get title() {\n    return this.ngxeService.locals.get(this.isActive ? 'removeLink' : 'insertLink');\n  }\n  get href() {\n    return this.form.get('href');\n  }\n  get text() {\n    return this.form.get('text');\n  }\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hidePopup();\n    }\n  }\n  getId(name) {\n    return `${name}-${this.componentId}`;\n  }\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  hidePopup() {\n    this.showPopup = false;\n    this.form.reset({\n      href: '',\n      text: '',\n      openInNewTab: true\n    });\n    this.text.enable();\n  }\n  togglePopup() {\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    if (this.isActive) {\n      Link.remove(state, dispatch);\n      return;\n    }\n    this.showPopup = !this.showPopup;\n    if (this.showPopup) {\n      this.setText();\n    }\n  }\n  onTogglePopupMouseClick(e) {\n    if (e.button !== 0) {\n      return;\n    }\n    this.togglePopup();\n  }\n  onTogglePopupKeydown() {\n    this.togglePopup();\n  }\n  setText = () => {\n    const {\n      state: {\n        selection,\n        doc\n      }\n    } = this.editorView;\n    const {\n      empty,\n      from,\n      to\n    } = selection;\n    const selectedText = !empty ? doc.textBetween(from, to) : '';\n    if (selectedText) {\n      this.text.patchValue(selectedText);\n      this.text.disable();\n    }\n  };\n  update = view => {\n    const {\n      state\n    } = view;\n    this.isActive = Link.isActive(state, {\n      strict: false\n    });\n    this.canExecute = Link.canExecute(state);\n  };\n  insertLink(e) {\n    e.preventDefault();\n    const {\n      text,\n      href,\n      openInNewTab\n    } = this.form.getRawValue();\n    const {\n      dispatch,\n      state\n    } = this.editorView;\n    const {\n      selection\n    } = state;\n    let target;\n    if (this.options.showOpenInNewTab) {\n      target = openInNewTab ? '_blank' : '_self';\n    }\n    const attrs = {\n      title: href,\n      href,\n      target\n    };\n    if (selection.empty) {\n      Link.insert(text, attrs)(state, dispatch);\n      this.editorView.focus();\n    } else {\n      Link.update(attrs)(state, dispatch);\n    }\n    this.hidePopup();\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.form = new FormGroup({\n      href: new FormControl('', [Validators$1.required, Validators$1.pattern(this.menuService.editor.linkValidationPattern)]),\n      text: new FormControl('', [Validators$1.required]),\n      openInNewTab: new FormControl(true)\n    });\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function LinkComponent_Factory(t) {\n    return new (t || LinkComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: LinkComponent,\n    selectors: [[\"ngx-link\"]],\n    hostBindings: function LinkComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mousedown\", function LinkComponent_mousedown_HostBindingHandler($event) {\n          return ctx.onDocumentClick($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    inputs: {\n      options: [\"options\", \"options\", value => ({\n        ...DEFAULT_LINK_OPTIONS,\n        ...value\n      })]\n    },\n    features: [i0.ɵɵInputTransformsFeature],\n    decls: 5,\n    vars: 16,\n    consts: [[\"type\", \"button\", \"aria-haspopup\", \"dialog\", 1, \"NgxEditor__MenuItem--Icon\", 3, \"disabled\", \"innerHTML\", \"title\", \"ariaLabel\", \"ariaExpanded\", \"mousedown\", \"keydown.enter\", \"keydown.space\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [1, \"NgxEditor__Popup--Form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"NgxEditor__Popup--FormGroup\"], [1, \"NgxEditor__Popup--Col\"], [1, \"NgxEditor__Popup--Label\", 3, \"htmlFor\"], [\"type\", \"url\", \"formControlName\", \"href\", \"autocomplete\", \"off\", 3, \"id\"], [\"class\", \"NgxEditor__HelpText NgxEditor__HelpText--Error\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"text\", \"autocomplete\", \"off\", 3, \"id\"], [\"class\", \"NgxEditor__Popup--FormGroup\", 4, \"ngIf\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"NgxEditor__HelpText\", \"NgxEditor__HelpText--Error\"], [\"type\", \"checkbox\", \"formControlName\", \"openInNewTab\"]],\n    template: function LinkComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mousedown\", function LinkComponent_Template_button_mousedown_0_listener($event) {\n          return ctx.onTogglePopupMouseClick($event);\n        })(\"keydown.enter\", function LinkComponent_Template_button_keydown_enter_0_listener() {\n          return ctx.onTogglePopupKeydown();\n        })(\"keydown.space\", function LinkComponent_Template_button_keydown_space_0_listener() {\n          return ctx.onTogglePopupKeydown();\n        });\n        i0.ɵɵpipe(1, \"sanitizeHtml\");\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, LinkComponent_div_4_Template, 20, 18, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive || ctx.showPopup)(\"NgxEditor--Disabled\", !ctx.canExecute);\n        i0.ɵɵproperty(\"disabled\", !ctx.canExecute)(\"innerHTML\", i0.ɵɵpipeBind1(1, 10, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", i0.ɵɵpipeBind1(2, 12, ctx.title))(\"ariaLabel\", i0.ɵɵpipeBind1(3, 14, ctx.title))(\"ariaExpanded\", ctx.showPopup);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i3.AsyncPipe, SanitizeHtmlPipe]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LinkComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-link',\n      template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\"\\n  [disabled]=\\\"!canExecute\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"title | async\\\"\\n  [ariaLabel]=\\\"title | async\\\"\\n  aria-haspopup=\\\"dialog\\\"\\n  [ariaExpanded]=\\\"showPopup\\\"\\n></button>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('link-popup-url')\\\">{{ getLabel('url') | async }}</label>\\n        <input type=\\\"url\\\" [id]=\\\"getId('link-popup-url')\\\" formControlName=\\\"href\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && getLabel('enterValidUrl') | async }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('link-popup-label')\\\">{{\\n          getLabel('text') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('link-popup-label')\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\" *ngIf=\\\"this.options.showOpenInNewTab\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{ getLabel('openInNewTab') | async }}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{ getLabel('insert') | async }}</button>\\n  </form>\\n</div>\\n\"\n    }]\n  }], () => [{\n    type: i0.ElementRef\n  }, {\n    type: NgxEditorService\n  }, {\n    type: MenuService\n  }], {\n    options: [{\n      type: Input,\n      args: [{\n        transform: value => ({\n          ...DEFAULT_LINK_OPTIONS,\n          ...value\n        })\n      }]\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\nclass DropdownComponent {\n  ngxeService;\n  menuService;\n  el;\n  editorView;\n  updateSubscription;\n  group;\n  items;\n  isDropdownOpen = false;\n  disabledItems = [];\n  activeItem;\n  constructor(ngxeService, menuService, el) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.el = el;\n  }\n  get isSelected() {\n    return Boolean(this.activeItem || this.isDropdownOpen);\n  }\n  get isDropdownDisabled() {\n    return this.disabledItems.length === this.items.length;\n  }\n  onDocumentClick(target) {\n    if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n      this.isDropdownOpen = false;\n    }\n  }\n  getName(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  getIsDropdownActive(item) {\n    return this.activeItem === item;\n  }\n  toggleDropdown() {\n    this.isDropdownOpen = !this.isDropdownOpen;\n  }\n  onToggleDropdownMouseClick(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    this.toggleDropdown();\n  }\n  onToggleDropdownKeydown() {\n    this.toggleDropdown();\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  selectItem(item) {\n    const command = ToggleCommands[item];\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    command.toggle()(state, dispatch);\n    this.isDropdownOpen = false;\n  }\n  onDropdownItemMouseClick(e, item) {\n    e.preventDefault();\n    // consider only left click\n    if (e.button !== 0) {\n      return;\n    }\n    this.selectItem(item);\n  }\n  onDropdownItemKeydown(event, item) {\n    const e = event;\n    e.preventDefault();\n    this.selectItem(item);\n  }\n  update = view => {\n    const {\n      state\n    } = view;\n    this.disabledItems = [];\n    const activeItems = [];\n    this.items.forEach(item => {\n      const command = ToggleCommands[item];\n      const isActive = command.isActive(state);\n      if (isActive) {\n        activeItems.push(item);\n      }\n      if (!command.canExecute(state)) {\n        this.disabledItems.push(item);\n      }\n    });\n    if (activeItems.length === 1) {\n      [this.activeItem] = activeItems;\n    } else {\n      this.activeItem = null;\n    }\n  };\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function DropdownComponent_Factory(t) {\n    return new (t || DropdownComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService), i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: DropdownComponent,\n    selectors: [[\"ngx-dropdown\"]],\n    hostBindings: function DropdownComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mousedown\", function DropdownComponent_mousedown_HostBindingHandler($event) {\n          return ctx.onDocumentClick($event.target);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    inputs: {\n      group: \"group\",\n      items: \"items\"\n    },\n    decls: 5,\n    vars: 13,\n    consts: [[\"type\", \"button\", \"aria-haspopup\", \"listbox\", 1, \"NgxEditor__Dropdown--Text\", 3, \"disabled\", \"ariaLabel\", \"ariaExpanded\", \"mousedown\", \"keydown.enter\", \"keydown.space\"], [\"class\", \"NgxEditor__Dropdown--DropdownMenu\", \"role\", \"listbox\", 4, \"ngIf\"], [\"role\", \"listbox\", 1, \"NgxEditor__Dropdown--DropdownMenu\"], [\"type\", \"button\", \"class\", \"NgxEditor__Dropdown--Item\", \"role\", \"option\", 3, \"ngClass\", \"ariaLabel\", \"mousedown\", \"keydown.enter\", \"keydown.space\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"type\", \"button\", \"role\", \"option\", 1, \"NgxEditor__Dropdown--Item\", 3, \"ngClass\", \"ariaLabel\", \"mousedown\", \"keydown.enter\", \"keydown.space\"]],\n    template: function DropdownComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mousedown\", function DropdownComponent_Template_button_mousedown_0_listener($event) {\n          return ctx.onToggleDropdownMouseClick($event);\n        })(\"keydown.enter\", function DropdownComponent_Template_button_keydown_enter_0_listener() {\n          return ctx.onToggleDropdownKeydown();\n        })(\"keydown.space\", function DropdownComponent_Template_button_keydown_space_0_listener() {\n          return ctx.onToggleDropdownKeydown();\n        });\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵtext(2);\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, DropdownComponent_div_4_Template, 2, 2, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"NgxEditor__Dropdown--Selected\", ctx.isSelected)(\"NgxEditor--Disabled\", ctx.isDropdownDisabled);\n        i0.ɵɵproperty(\"disabled\", ctx.isDropdownDisabled)(\"ariaLabel\", i0.ɵɵpipeBind1(1, 9, ctx.getName(ctx.activeItem || ctx.group)))(\"ariaExpanded\", ctx.isDropdownOpen);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 11, ctx.getName(ctx.activeItem || ctx.group)), \"\\n\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isDropdownOpen);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.AsyncPipe]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DropdownComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-dropdown',\n      template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__Dropdown--Text\\\"\\n  [class.NgxEditor__Dropdown--Selected]=\\\"isSelected\\\"\\n  [disabled]=\\\"isDropdownDisabled\\\"\\n  [class.NgxEditor--Disabled]=\\\"isDropdownDisabled\\\"\\n  (mousedown)=\\\"onToggleDropdownMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onToggleDropdownKeydown()\\\"\\n  (keydown.space)=\\\"onToggleDropdownKeydown()\\\"\\n  [ariaLabel]=\\\"getName(activeItem || group) | async\\\"\\n  aria-haspopup=\\\"listbox\\\"\\n  [ariaExpanded]=\\\"isDropdownOpen\\\"\\n>\\n  {{ getName(activeItem || group) | async }}\\n</button>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\" role=\\\"listbox\\\">\\n  <button\\n    type=\\\"button\\\"\\n    class=\\\"NgxEditor__Dropdown--Item\\\"\\n    *ngFor=\\\"let item of items; trackBy: trackByIndex\\\"\\n    (mousedown)=\\\"onDropdownItemMouseClick($event, item)\\\"\\n    (keydown.enter)=\\\"onDropdownItemKeydown($event, item)\\\"\\n    (keydown.space)=\\\"onDropdownItemKeydown($event, item)\\\"\\n    [ngClass]=\\\"{\\n      'NgxEditor__Dropdown--Active': item === activeItem,\\n      'NgxEditor--Disabled': disabledItems.includes(item)\\n    }\\\"\\n    [ariaLabel]=\\\"getName(item) | async\\\"\\n    role=\\\"option\\\"\\n    [attr.aria-selected]=\\\"item === activeItem\\\"\\n  >\\n    {{ getName(item) | async }}\\n  </button>\\n</div>\\n\"\n    }]\n  }], () => [{\n    type: NgxEditorService\n  }, {\n    type: MenuService\n  }, {\n    type: i0.ElementRef\n  }], {\n    group: [{\n      type: Input\n    }],\n    items: [{\n      type: Input\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event.target']]\n    }]\n  });\n})();\nclass ImageComponent {\n  el;\n  ngxeService;\n  menuService;\n  showPopup = false;\n  isActive = false;\n  componentId = uniq();\n  updateSubscription;\n  form = new FormGroup({\n    src: new FormControl('', [Validators$1.required, Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')]),\n    alt: new FormControl(''),\n    title: new FormControl('')\n  });\n  editorView;\n  constructor(el, ngxeService, menuService) {\n    this.el = el;\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n  }\n  get icon() {\n    return this.ngxeService.getIcon('image');\n  }\n  get src() {\n    return this.form.get('src');\n  }\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n  getId(name) {\n    return `${name}-${this.componentId}`;\n  }\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  hideForm() {\n    this.showPopup = false;\n    this.form.reset({\n      src: '',\n      alt: '',\n      title: ''\n    });\n  }\n  togglePopup() {\n    this.showPopup = !this.showPopup;\n    if (this.showPopup) {\n      this.fillForm();\n    }\n  }\n  onTogglePopupMouseClick(e) {\n    if (e.button !== 0) {\n      return;\n    }\n    this.togglePopup();\n  }\n  onTogglePopupKeydown() {\n    this.togglePopup();\n  }\n  fillForm() {\n    const {\n      state\n    } = this.editorView;\n    const {\n      selection\n    } = state;\n    if (selection instanceof NodeSelection && this.isActive) {\n      const {\n        src,\n        alt = '',\n        title = ''\n      } = selection.node.attrs;\n      this.form.setValue({\n        src,\n        alt,\n        title\n      });\n    }\n  }\n  update = view => {\n    const {\n      state\n    } = view;\n    this.isActive = Image.isActive(state);\n  };\n  insertLink(e) {\n    e.preventDefault();\n    const {\n      src,\n      alt,\n      title\n    } = this.form.getRawValue();\n    const {\n      dispatch,\n      state\n    } = this.editorView;\n    const attrs = {\n      alt,\n      title\n    };\n    Image.insert(src, attrs)(state, dispatch);\n    this.editorView.focus();\n    this.hideForm();\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function ImageComponent_Factory(t) {\n    return new (t || ImageComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ImageComponent,\n    selectors: [[\"ngx-image\"]],\n    hostBindings: function ImageComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mousedown\", function ImageComponent_mousedown_HostBindingHandler($event) {\n          return ctx.onDocumentClick($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    decls: 5,\n    vars: 13,\n    consts: [[\"type\", \"button\", \"aria-haspopup\", \"dialog\", 1, \"NgxEditor__MenuItem--Icon\", 3, \"innerHTML\", \"title\", \"ariaLabel\", \"ariaExpanded\", \"mousedown\", \"keydown.enter\", \"keydown.space\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [1, \"NgxEditor__Popup--Form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"NgxEditor__Popup--FormGroup\"], [1, \"NgxEditor__Popup--Col\"], [1, \"NgxEditor__Popup--Label\", 3, \"htmlFor\"], [\"type\", \"url\", \"formControlName\", \"src\", \"autocomplete\", \"off\", 3, \"id\"], [\"class\", \"NgxEditor__HelpText NgxEditor__HelpText--Error\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"alt\", \"autocomplete\", \"off\", 3, \"id\"], [\"type\", \"text\", \"formControlName\", \"title\", \"autocomplete\", \"off\", 3, \"id\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"NgxEditor__HelpText\", \"NgxEditor__HelpText--Error\"]],\n    template: function ImageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mousedown\", function ImageComponent_Template_button_mousedown_0_listener($event) {\n          return ctx.onTogglePopupMouseClick($event);\n        })(\"keydown.enter\", function ImageComponent_Template_button_keydown_enter_0_listener() {\n          return ctx.onTogglePopupKeydown();\n        })(\"keydown.space\", function ImageComponent_Template_button_keydown_space_0_listener() {\n          return ctx.onTogglePopupKeydown();\n        });\n        i0.ɵɵpipe(1, \"sanitizeHtml\");\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, ImageComponent_div_4_Template, 24, 21, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive || ctx.showPopup);\n        i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 7, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", i0.ɵɵpipeBind1(2, 9, ctx.getLabel(\"insertImage\")))(\"ariaLabel\", i0.ɵɵpipeBind1(3, 11, ctx.getLabel(\"insertImage\")))(\"ariaExpanded\", ctx.showPopup);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i3.AsyncPipe, SanitizeHtmlPipe]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image',\n      template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"getLabel('insertImage') | async\\\"\\n  [ariaLabel]=\\\"getLabel('insertImage') | async\\\"\\n  aria-haspopup=\\\"dialog\\\"\\n  [ariaExpanded]=\\\"showPopup\\\"\\n></button>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-url')\\\">{{\\n          getLabel('url') | async\\n        }}</label>\\n        <input type=\\\"url\\\" [id]=\\\"getId('image-popup-url')\\\" formControlName=\\\"src\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && getLabel('enterValidUrl') | async }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-label')\\\">{{\\n          getLabel('altText') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('image-popup-label')\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-title')\\\">{{\\n          getLabel('title') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('image-popup-title')\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{ getLabel('insert') | async }}</button>\\n  </form>\\n</div>\\n\"\n    }]\n  }], () => [{\n    type: i0.ElementRef\n  }, {\n    type: NgxEditorService\n  }, {\n    type: MenuService\n  }], {\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\nclass ColorPickerComponent {\n  el;\n  menuService;\n  ngxeService;\n  presets;\n  type;\n  constructor(el, menuService, ngxeService) {\n    this.el = el;\n    this.menuService = menuService;\n    this.ngxeService = ngxeService;\n  }\n  get title() {\n    return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n  }\n  get icon() {\n    return this.ngxeService.getIcon(this.type === 'text_color' ? 'text_color' : 'color_fill');\n  }\n  get command() {\n    return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n  }\n  updateSubscription;\n  editorView;\n  showPopup = false;\n  isActive = false;\n  activeColors = [];\n  canExecute = true;\n  getContrastYIQ(hexcolor) {\n    const color = hexcolor.replace('#', '');\n    const r = parseInt(color.substring(0, 2), 16);\n    const g = parseInt(color.substring(2, 4), 16);\n    const b = parseInt(color.substring(4, 6), 16);\n    const yiq = (r * 299 + g * 587 + b * 114) / 1000;\n    return yiq >= 128 ? 'black' : 'white';\n  }\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hidePopup();\n    }\n  }\n  hidePopup() {\n    this.showPopup = false;\n  }\n  togglePopup() {\n    this.showPopup = !this.showPopup;\n  }\n  onTogglePopupMouseClick(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    this.togglePopup();\n  }\n  onTogglePopupKeydown() {\n    this.togglePopup();\n  }\n  remove() {\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    this.command.remove()(state, dispatch);\n    this.hidePopup();\n  }\n  onRemoveMouseClick(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    e.preventDefault();\n    this.remove();\n  }\n  onRemoveKeydown() {\n    this.remove();\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  selectColor(color) {\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    if (this.type === 'text_color') {\n      const attrs = {\n        color\n      };\n      this.command.apply(attrs)(state, dispatch);\n    } else {\n      const attrs = {\n        backgroundColor: color\n      };\n      this.command.apply(attrs)(state, dispatch);\n    }\n    if (!this.editorView.hasFocus()) {\n      this.editorView.focus();\n    }\n    this.hidePopup();\n  }\n  onColorSelectMouseClick(e, color) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    this.selectColor(color);\n  }\n  onColorSelectKeydown(color) {\n    this.selectColor(color);\n  }\n  update = view => {\n    const {\n      state\n    } = view;\n    this.canExecute = this.command.canExecute(state);\n    this.isActive = this.command.isActive(state);\n    this.activeColors = [];\n    if (this.isActive) {\n      this.activeColors = this.command.getActiveColors(state);\n    }\n  };\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function ColorPickerComponent_Factory(t) {\n    return new (t || ColorPickerComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(MenuService), i0.ɵɵdirectiveInject(NgxEditorService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: ColorPickerComponent,\n    selectors: [[\"ngx-color-picker\"]],\n    hostBindings: function ColorPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_mousedown_HostBindingHandler($event) {\n          return ctx.onDocumentClick($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    inputs: {\n      presets: \"presets\",\n      type: \"type\"\n    },\n    decls: 5,\n    vars: 15,\n    consts: [[\"type\", \"button\", 1, \"NgxEditor__MenuItem--Icon\", 3, \"disabled\", \"innerHTML\", \"title\", \"ariaLabel\", \"mousedown\", \"keydown.enter\", \"keydown.space\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [\"class\", \"NgxEditor__ColorContainer\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"NgxEditor__MenuItem--Button\", 3, \"disabled\", \"mousedown\", \"keydown.enter\", \"keydown.space\"], [1, \"NgxEditor__ColorContainer\"], [\"class\", \"NgxEditor__Color\", 3, \"ngStyle\", \"title\", \"ngClass\", \"mousedown\", \"keydown.enter\", \"keydown.space\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"NgxEditor__Color\", 3, \"ngStyle\", \"title\", \"ngClass\", \"mousedown\", \"keydown.enter\", \"keydown.space\"]],\n    template: function ColorPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_Template_button_mousedown_0_listener($event) {\n          return ctx.onTogglePopupMouseClick($event);\n        })(\"keydown.enter\", function ColorPickerComponent_Template_button_keydown_enter_0_listener() {\n          return ctx.onTogglePopupKeydown();\n        })(\"keydown.space\", function ColorPickerComponent_Template_button_keydown_space_0_listener() {\n          return ctx.onTogglePopupKeydown();\n        });\n        i0.ɵɵpipe(1, \"sanitizeHtml\");\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵpipe(3, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, ColorPickerComponent_div_4_Template, 5, 6, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive || ctx.showPopup)(\"NgxEditor--Disabled\", !ctx.canExecute);\n        i0.ɵɵproperty(\"disabled\", !ctx.canExecute)(\"innerHTML\", i0.ɵɵpipeBind1(1, 9, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", i0.ɵɵpipeBind1(2, 11, ctx.title))(\"ariaLabel\", i0.ɵɵpipeBind1(3, 13, ctx.title));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgStyle, i3.AsyncPipe, SanitizeHtmlPipe],\n    styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}\"]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ColorPickerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-color-picker',\n      template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\"\\n  [disabled]=\\\"!canExecute\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"title | async\\\"\\n  [ariaLabel]=\\\"title | async\\\"\\n></button>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets; trackBy: trackByIndex\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button\\n      class=\\\"NgxEditor__Color\\\"\\n      *ngFor=\\\"let color of colorGroup; trackBy: trackByIndex\\\"\\n      [ngStyle]=\\\"{ backgroundColor: color, color: getContrastYIQ(color) }\\\"\\n      [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelectMouseClick($event, color)\\\"\\n      (keydown.enter)=\\\"onColorSelectKeydown(color)\\\"\\n      (keydown.space)=\\\"onColorSelectKeydown(color)\\\"\\n      [ngClass]=\\\"{ 'NgxEditor__Color--Active': activeColors.includes(color) }\\\"\\n    ></button>\\n  </div>\\n\\n  <button\\n    class=\\\"NgxEditor__MenuItem--Button\\\"\\n    (mousedown)=\\\"onRemoveMouseClick($event)\\\"\\n    (keydown.enter)=\\\"onRemoveKeydown()\\\"\\n    (keydown.space)=\\\"onRemoveKeydown()\\\"\\n    [disabled]=\\\"!isActive\\\"\\n  >\\n    {{ getLabel('remove') | async }}\\n  </button>\\n</div>\\n\",\n      styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"]\n    }]\n  }], () => [{\n    type: i0.ElementRef\n  }, {\n    type: MenuService\n  }, {\n    type: NgxEditorService\n  }], {\n    presets: [{\n      type: Input\n    }],\n    type: [{\n      type: Input\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\nconst DEFAULT_TOOLBAR = [['bold', 'italic'], ['code', 'blockquote'], ['underline', 'strike'], ['ordered_list', 'bullet_list'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color'], ['align_left', 'align_center', 'align_right', 'align_justify'], ['format_clear']];\nconst TOOLBAR_MINIMAL = [['bold', 'italic'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color']];\nconst TOOLBAR_FULL = [['bold', 'italic'], ['code', 'blockquote'], ['underline', 'strike'], ['ordered_list', 'bullet_list'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color'], ['align_left', 'align_center', 'align_right', 'align_justify'], ['horizontal_rule', 'format_clear', 'indent', 'outdent'], ['superscript', 'subscript'], ['undo', 'redo']];\nconst DEFAULT_COLOR_PRESETS = ['#b60205', '#d93f0b', '#fbca04', '#0e8a16', '#006b75', '#1d76db', '#0052cc', '#5319e7', '#e99695', '#f9d0c4', '#fef2c0', '#c2e0c6', '#bfdadc', '#c5def5', '#bfd4f2', '#d4c5f9'];\nclass MenuComponent {\n  menuService;\n  toolbar = TOOLBAR_MINIMAL;\n  colorPresets = DEFAULT_COLOR_PRESETS;\n  disabled = false;\n  editor;\n  customMenuRef = null;\n  dropdownPlacement = 'bottom';\n  toggleCommands = ['bold', 'italic', 'underline', 'strike', 'code', 'blockquote', 'ordered_list', 'bullet_list', 'align_left', 'align_center', 'align_right', 'align_justify', 'superscript', 'subscript'];\n  insertCommands = ['horizontal_rule', 'format_clear', 'indent', 'outdent', 'undo', 'redo'];\n  iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--IconContainer'];\n  dropdownContainerClass = ['NgxEditor__Dropdown'];\n  seperatorClass = ['NgxEditor__Seperator'];\n  constructor(menuService) {\n    this.menuService = menuService;\n  }\n  get presets() {\n    const col = 8;\n    const colors = [];\n    this.colorPresets.forEach((color, index) => {\n      const row = Math.floor(index / col);\n      if (!colors[row]) {\n        colors.push([]);\n      }\n      colors[row].push(color);\n    });\n    return colors;\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  isDropDown(item) {\n    if (item?.heading) {\n      return true;\n    }\n    return false;\n  }\n  getDropdownItems(item) {\n    return item;\n  }\n  isLinkItem(item) {\n    if (item === 'link') {\n      return true;\n    }\n    // NOTE: it is not sufficient to check for a `link` property\n    // as String.prototype.link is a valid (although deprecated) method\n    return typeof item === 'object' && typeof item?.link === 'object';\n  }\n  isLinkWithOptions(item) {\n    // NOTE: it is not sufficient to check for a `link` property\n    // as String.prototype.link is a valid (although deprecated) method\n    return typeof item === 'object' && typeof item?.link === 'object';\n  }\n  getLinkOptions(item) {\n    return item?.link;\n  }\n  ngOnInit() {\n    if (!this.editor) {\n      throw new NgxEditorError('Required editor instance to initialize menu component');\n    }\n    this.menuService.editor = this.editor;\n  }\n  static ɵfac = function MenuComponent_Factory(t) {\n    return new (t || MenuComponent)(i0.ɵɵdirectiveInject(MenuService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: MenuComponent,\n    selectors: [[\"ngx-editor-menu\"]],\n    inputs: {\n      toolbar: \"toolbar\",\n      colorPresets: \"colorPresets\",\n      disabled: \"disabled\",\n      editor: \"editor\",\n      customMenuRef: \"customMenuRef\",\n      dropdownPlacement: \"dropdownPlacement\"\n    },\n    features: [i0.ɵɵProvidersFeature([MenuService])],\n    decls: 3,\n    vars: 7,\n    consts: [[1, \"NgxEditor__MenuBar\", 3, \"ngClass\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [4, \"ngIf\"], [3, \"toolbarItem\", \"class\", 4, \"ngIf\"], [3, \"class\", 4, \"ngIf\"], [\"type\", \"text_color\", 3, \"class\", \"presets\", 4, \"ngIf\"], [\"type\", \"background_color\", 3, \"class\", \"presets\", 4, \"ngIf\"], [3, \"toolbarItem\"], [3, \"options\"], [3, \"class\", \"group\", \"items\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"group\", \"items\"], [\"type\", \"text_color\", 3, \"presets\"], [\"type\", \"background_color\", 3, \"presets\"], [3, \"ngTemplateOutlet\"]],\n    template: function MenuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, MenuComponent_ng_container_1_Template, 2, 2, \"ng-container\", 1);\n        i0.ɵɵtemplate(2, MenuComponent_ng_container_2_Template, 2, 1, \"ng-container\", 2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(4, _c7, ctx.disabled, ctx.dropdownPlacement === \"top\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.toolbar)(\"ngForTrackBy\", ctx.trackByIndex);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.customMenuRef);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet, ToggleCommandComponent, InsertCommandComponent, LinkComponent, DropdownComponent, ImageComponent, ColorPickerComponent, i3.KeyValuePipe]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor-menu',\n      providers: [MenuService],\n      template: \"<div\\n  class=\\\"NgxEditor__MenuBar\\\"\\n  [ngClass]=\\\"{ 'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top' }\\\"\\n>\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <ngx-insert-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"insertCommands.includes(item)\\\">\\n      </ngx-insert-command>\\n\\n      <!-- link -->\\n      <ng-container *ngIf=\\\"isLinkItem(item)\\\">\\n        <ngx-link [class]=\\\"iconContainerClass\\\" [options]=\\\"getLinkOptions(item)\\\"></ngx-link>\\n      </ng-container>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\"> </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown\\n          *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\\\"\\n          [class]=\\\"dropdownContainerClass\\\"\\n          [group]=\\\"dropdownItem.key\\\"\\n          [items]=\\\"dropdownItem.value\\\"\\n        >\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker\\n        [class]=\\\"iconContainerClass\\\"\\n        *ngIf=\\\"item === 'text_color'\\\"\\n        type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\"\\n      >\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker\\n        [class]=\\\"iconContainerClass\\\"\\n        *ngIf=\\\"item === 'background_color'\\\"\\n        type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\"\\n      >\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n</div>\\n\"\n    }]\n  }], () => [{\n    type: MenuService\n  }], {\n    toolbar: [{\n      type: Input\n    }],\n    colorPresets: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }],\n    editor: [{\n      type: Input\n    }],\n    customMenuRef: [{\n      type: Input\n    }],\n    dropdownPlacement: [{\n      type: Input\n    }]\n  });\n})();\nclass BubbleComponent {\n  sanitizeHTML;\n  ngxeService;\n  constructor(sanitizeHTML, ngxeService) {\n    this.sanitizeHTML = sanitizeHTML;\n    this.ngxeService = ngxeService;\n  }\n  get view() {\n    return this.editor.view;\n  }\n  editor;\n  updateSubscription;\n  execulableItems = [];\n  activeItems = [];\n  toolbar = [['bold', 'italic', 'underline', 'strike'], ['ordered_list', 'bullet_list', 'blockquote', 'code'], ['align_left', 'align_center', 'align_right', 'align_justify']];\n  toggleCommands = ['bold', 'italic', 'underline', 'strike', 'ordered_list', 'bullet_list', 'blockquote', 'code', 'align_left', 'align_center', 'align_right', 'align_justify'];\n  getIcon(name) {\n    return this.sanitizeHTML.transform(this.ngxeService.getIcon(name));\n  }\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  onClick(e, commandName) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.button !== 0) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.view;\n    const command = ToggleCommands[commandName];\n    command.toggle()(state, dispatch);\n  }\n  update(view) {\n    this.activeItems = [];\n    this.execulableItems = [];\n    const {\n      state\n    } = view;\n    this.toggleCommands.forEach(toolbarItem => {\n      const command = ToggleCommands[toolbarItem];\n      const isActive = command.isActive(state);\n      if (isActive) {\n        this.activeItems.push(toolbarItem);\n      }\n      const canExecute = command.canExecute(state);\n      if (canExecute) {\n        this.execulableItems.push(toolbarItem);\n      }\n    });\n  }\n  ngOnInit() {\n    this.updateSubscription = this.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n  static ɵfac = function BubbleComponent_Factory(t) {\n    return new (t || BubbleComponent)(i0.ɵɵdirectiveInject(SanitizeHtmlPipe), i0.ɵɵdirectiveInject(NgxEditorService));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: BubbleComponent,\n    selectors: [[\"ngx-bubble\"]],\n    inputs: {\n      editor: \"editor\"\n    },\n    decls: 1,\n    vars: 2,\n    consts: [[4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"type\", \"button\", \"class\", \"NgxBubbleMenu__Icon\", 3, \"ngClass\", \"title\", \"innerHTML\", \"mousedown\", 4, \"ngIf\"], [\"class\", \"NgxBubbleMenu__Seperator\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"NgxBubbleMenu__Icon\", 3, \"ngClass\", \"title\", \"innerHTML\", \"mousedown\"], [1, \"NgxBubbleMenu__Seperator\"]],\n    template: function BubbleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BubbleComponent_ng_container_0_Template, 2, 2, \"ng-container\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.toolbar)(\"ngForTrackBy\", ctx.trackByIndex);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.AsyncPipe],\n    styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{display:flex;flex-wrap:wrap;background-color:var(--ngx-editor-bubble-bg-color);color:var(--ngx-editor-bubble-text-color);padding:5px;border-radius:4px}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;border-radius:var(--ngx-editor-menu-item-border-radius);display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]:hover{background-color:var(--ngx-editor-bubble-item-hover-color)}.NgxBubbleMenu__Icon[_ngcontent-%COMP%] + .NgxBubbleMenu__Icon[_ngcontent-%COMP%]{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active[_ngcontent-%COMP%]{background-color:var(--ngx-editor-bubble-text-color);color:var(--ngx-editor-bubble-bg-color)}.NgxBubbleMenu__Seperator[_ngcontent-%COMP%]{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}\"]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BubbleComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-bubble',\n      template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n    <button\\n      type=\\\"button\\\"\\n      class=\\\"NgxBubbleMenu__Icon\\\"\\n      *ngIf=\\\"toggleCommands.includes(item)\\\"\\n      [ngClass]=\\\"{\\n        'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n        'NgxEditor--Disabled': !this.execulableItems.includes(item)\\n      }\\\"\\n      (mousedown)=\\\"onClick($event, item)\\\"\\n      [title]=\\\"getTitle(item) | async\\\"\\n      [innerHTML]=\\\"getIcon(item)\\\"\\n    ></button>\\n    <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;flex-wrap:wrap;background-color:var(--ngx-editor-bubble-bg-color);color:var(--ngx-editor-bubble-text-color);padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;border-radius:var(--ngx-editor-menu-item-border-radius);display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon:hover{background-color:var(--ngx-editor-bubble-item-hover-color)}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:var(--ngx-editor-bubble-text-color);color:var(--ngx-editor-bubble-bg-color)}.NgxBubbleMenu__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}\\n\"]\n    }]\n  }], () => [{\n    type: SanitizeHtmlPipe\n  }, {\n    type: NgxEditorService\n  }], {\n    editor: [{\n      type: Input\n    }]\n  });\n})();\nclass FloatingMenuComponent {\n  el;\n  constructor(el) {\n    this.el = el;\n  }\n  get display() {\n    return {\n      visibility: this.showMenu ? 'visible' : 'hidden',\n      opacity: this.showMenu ? '1' : '0',\n      top: `${this.posTop}px`,\n      left: `${this.posLeft}px`\n    };\n  }\n  get view() {\n    return this.editor.view;\n  }\n  editor;\n  autoPlace = false;\n  posLeft = 0;\n  posTop = 0;\n  showMenu = false;\n  updateSubscription;\n  dragging = false;\n  resizeSubscription;\n  onMouseDown(e) {\n    const target = e.target;\n    if (this.el.nativeElement.contains(target) && target.nodeName !== 'INPUT') {\n      e.preventDefault();\n      return;\n    }\n    this.dragging = true;\n  }\n  onKeyDown(e) {\n    const target = e.target;\n    if (target.nodeName === 'INPUT') {\n      return;\n    }\n    this.dragging = true;\n    this.hide();\n  }\n  onMouseUp(e) {\n    const target = e.target;\n    if (this.el.nativeElement.contains(target) || target.nodeName === 'INPUT') {\n      e.preventDefault();\n      return;\n    }\n    this.dragging = false;\n    this.useUpdate();\n  }\n  onKeyUp(e) {\n    const target = e.target;\n    if (target.nodeName === 'INPUT') {\n      return;\n    }\n    this.dragging = false;\n    this.useUpdate();\n  }\n  useUpdate() {\n    if (!this.view) {\n      return;\n    }\n    this.update(this.view);\n  }\n  hide() {\n    this.showMenu = false;\n  }\n  show() {\n    this.showMenu = true;\n  }\n  calculateBubblePosition(view) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const {\n        state: {\n          selection\n        }\n      } = view;\n      const {\n        from,\n        to\n      } = selection;\n      const start = view.coordsAtPos(from);\n      const end = view.coordsAtPos(to);\n      const selectionElement = {\n        getBoundingClientRect() {\n          if (selection instanceof NodeSelection) {\n            const node = view.nodeDOM(from);\n            return node.getBoundingClientRect();\n          }\n          const {\n            top,\n            left\n          } = start;\n          const {\n            bottom,\n            right\n          } = end;\n          return {\n            x: left,\n            y: top,\n            top,\n            bottom,\n            left,\n            right,\n            width: right - left,\n            height: bottom - top\n          };\n        }\n      };\n      // the floating bubble itself\n      const bubbleEl = _this.el.nativeElement;\n      const {\n        x: left,\n        y: top\n      } = yield computePosition(selectionElement, bubbleEl, {\n        placement: 'top',\n        middleware: [offset(5), _this.autoPlace && autoPlacement({\n          boundary: view.dom,\n          padding: 5,\n          allowedPlacements: ['top', 'bottom']\n        }), {\n          // prevent overflow on right and left side\n          // since only top and bottom placements are allowed\n          // autoplacement can't handle overflows on the right and left\n          name: 'overflowMiddleware',\n          fn(middlewareArgs) {\n            return _asyncToGenerator(function* () {\n              const overflow = yield detectOverflow(middlewareArgs, {\n                boundary: view.dom,\n                padding: 5\n              });\n              // overflows left\n              if (overflow.left > 0) {\n                return {\n                  x: middlewareArgs.x + overflow.left\n                };\n              }\n              // overflows right\n              if (overflow.right > 0) {\n                return {\n                  x: middlewareArgs.x - overflow.right\n                };\n              }\n              return {};\n            })();\n          }\n        }].filter(Boolean)\n      });\n      return {\n        left,\n        top\n      };\n    })();\n  }\n  canShowMenu(view) {\n    const {\n      state\n    } = view;\n    const {\n      selection\n    } = state;\n    const {\n      empty\n    } = selection;\n    if (selection instanceof NodeSelection) {\n      if (selection.node.type.name === 'image') {\n        return false;\n      }\n    }\n    const hasFocus = this.view.hasFocus();\n    if (!hasFocus || empty || this.dragging) {\n      this.hide();\n      return false;\n    }\n    return true;\n  }\n  update(view) {\n    const canShowMenu = this.canShowMenu(view);\n    if (!canShowMenu) {\n      this.hide();\n      return;\n    }\n    this.calculateBubblePosition(this.view).then(({\n      top,\n      left\n    }) => {\n      if (!this.canShowMenu) {\n        this.hide();\n        return;\n      }\n      this.posLeft = left;\n      this.posTop = top;\n      this.show();\n    });\n  }\n  ngOnInit() {\n    if (!this.editor) {\n      throw new NgxEditorError('Required editor instance to initialize floating menu component');\n    }\n    this.updateSubscription = this.editor.update.subscribe(view => {\n      this.update(view);\n    });\n    this.resizeSubscription = fromEvent(window, 'resize').pipe(throttleTime(500, asyncScheduler, {\n      leading: true,\n      trailing: true\n    })).subscribe(() => {\n      this.useUpdate();\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n    this.resizeSubscription.unsubscribe();\n  }\n  static ɵfac = function FloatingMenuComponent_Factory(t) {\n    return new (t || FloatingMenuComponent)(i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n  static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: FloatingMenuComponent,\n    selectors: [[\"ngx-editor-floating-menu\"]],\n    hostVars: 2,\n    hostBindings: function FloatingMenuComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"mousedown\", function FloatingMenuComponent_mousedown_HostBindingHandler($event) {\n          return ctx.onMouseDown($event);\n        }, false, i0.ɵɵresolveDocument)(\"keydown\", function FloatingMenuComponent_keydown_HostBindingHandler($event) {\n          return ctx.onKeyDown($event);\n        }, false, i0.ɵɵresolveDocument)(\"mouseup\", function FloatingMenuComponent_mouseup_HostBindingHandler($event) {\n          return ctx.onMouseUp($event);\n        }, false, i0.ɵɵresolveDocument)(\"keyup\", function FloatingMenuComponent_keyup_HostBindingHandler($event) {\n          return ctx.onKeyUp($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n      if (rf & 2) {\n        i0.ɵɵstyleMap(ctx.display);\n      }\n    },\n    inputs: {\n      editor: \"editor\",\n      autoPlace: \"autoPlace\"\n    },\n    ngContentSelectors: _c3,\n    decls: 4,\n    vars: 1,\n    consts: [[\"ref\", \"\"], [4, \"ngIf\"], [3, \"editor\"]],\n    template: function FloatingMenuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"div\", null, 0);\n        i0.ɵɵprojection(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, FloatingMenuComponent_ng_container_3_Template, 2, 1, \"ng-container\", 1);\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", _r0.children.length === 0);\n      }\n    },\n    dependencies: [i3.NgIf, BubbleComponent],\n    styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\"]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FloatingMenuComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor-floating-menu',\n      template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"]\n    }]\n  }], () => [{\n    type: i0.ElementRef\n  }], {\n    display: [{\n      type: HostBinding,\n      args: ['style']\n    }],\n    editor: [{\n      type: Input\n    }],\n    autoPlace: [{\n      type: Input\n    }],\n    onMouseDown: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }],\n    onKeyDown: [{\n      type: HostListener,\n      args: ['document:keydown', ['$event']]\n    }],\n    onMouseUp: [{\n      type: HostListener,\n      args: ['document:mouseup', ['$event']]\n    }],\n    onKeyUp: [{\n      type: HostListener,\n      args: ['document:keyup', ['$event']]\n    }]\n  });\n})();\nclass MenuModule {\n  static ɵfac = function MenuModule_Factory(t) {\n    return new (t || MenuModule)();\n  };\n  static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: MenuModule\n  });\n  static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    providers: [SanitizeHtmlPipe],\n    imports: [CommonModule, ReactiveFormsModule]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, ReactiveFormsModule],\n      declarations: [\n      // pipes\n      SanitizeHtmlPipe,\n      // components\n      MenuComponent, ToggleCommandComponent, InsertCommandComponent, LinkComponent, DropdownComponent, ImageComponent, ColorPickerComponent, FloatingMenuComponent, BubbleComponent],\n      providers: [SanitizeHtmlPipe],\n      exports: [MenuComponent, FloatingMenuComponent]\n    }]\n  }], null, null);\n})();\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken('NgxEditorConfig');\nconst defaultConfig = {\n  locals: defaults,\n  icons\n};\nclass NgxEditorModule {\n  static forRoot(config = defaultConfig) {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [{\n        provide: NGX_EDITOR_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: NgxEditorServiceConfig,\n        useFactory: provideMyServiceOptions,\n        deps: [NGX_EDITOR_CONFIG_TOKEN]\n      }]\n    };\n  }\n  static forChild(config = defaultConfig) {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [{\n        provide: NGX_EDITOR_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: NgxEditorServiceConfig,\n        useFactory: provideMyServiceOptions,\n        deps: [NGX_EDITOR_CONFIG_TOKEN]\n      }, NgxEditorService]\n    };\n  }\n  static ɵfac = function NgxEditorModule_Factory(t) {\n    return new (t || NgxEditorModule)();\n  };\n  static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: NgxEditorModule\n  });\n  static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [CommonModule, MenuModule]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, MenuModule],\n      providers: [],\n      declarations: [NgxEditorComponent, ImageViewComponent],\n      exports: [NgxEditorComponent, MenuComponent, FloatingMenuComponent]\n    }]\n  }], null, null);\n})();\nconst isEmptyInputValue = value => {\n  // we don't check for string here so it also works with arrays\n  return value === null || value.length === 0;\n};\nconst hasValidLength = value => {\n  // non-strict comparison is intentional, to check for both `null` and `undefined` values\n  return value !== null && typeof value.length === 'number';\n};\nconst isDocEmpty = doc => {\n  if (!doc) {\n    return true;\n  }\n  const {\n    childCount,\n    firstChild\n  } = doc;\n  return Boolean(childCount === 1 && firstChild?.isTextblock && firstChild.content.size === 0);\n};\n// @dynamic\nclass Validators {\n  static required(userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const isEmpty = isDocEmpty(doc);\n      if (!isEmpty) {\n        return null;\n      }\n      return {\n        required: true\n      };\n    };\n  }\n  static maxLength(maxLength, userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const value = doc.textContent;\n      if (hasValidLength(value) && value.length > maxLength) {\n        return {\n          maxlength: {\n            requiredLength: maxLength,\n            actualLength: value.length\n          }\n        };\n      }\n      return null;\n    };\n  }\n  static minLength(minLength, userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const value = doc.textContent;\n      if (isEmptyInputValue(value) || !hasValidLength(value)) {\n        // don't validate empty values to allow optional controls\n        // don't validate values without `length` property\n        return null;\n      }\n      if (value.length < minLength) {\n        return {\n          minlength: {\n            requiredLength: minLength,\n            actualLength: value.length\n          }\n        };\n      }\n      return null;\n    };\n  }\n}\nconst execMark = (name, toggle = false) => {\n  return (state, dispatch) => {\n    const command = new Mark(name);\n    if (!toggle) {\n      return command.apply()(state, dispatch);\n    }\n    return command.toggle()(state, dispatch);\n  };\n};\nclass EditorCommands {\n  view;\n  state;\n  tr;\n  constructor(view) {\n    if (!view) {\n      throw new NgxEditorError('Required view to initialize commands.');\n    }\n    this.view = view;\n    this.state = view.state;\n    this.tr = this.view.state.tr;\n  }\n  applyTrx = tr => {\n    this.state = this.state.apply(tr ?? this.tr);\n    this.tr = this.state.tr;\n    this.tr.setMeta('APPLIED_TRX', true);\n  };\n  dispatch = tr => {\n    this.applyTrx(tr);\n  };\n  exec() {\n    // No changes applied\n    if (!this.tr.getMeta('APPLIED_TRX')) {\n      return false;\n    }\n    const forceEmit = !this.view.state.doc.eq(this.state.doc);\n    this.view.updateState(this.state);\n    const tr = this.tr.setMeta('FORCE_EMIT', forceEmit);\n    this.view.dispatch(tr);\n    return true;\n  }\n  focus(position = 'end') {\n    const selection = position === 'start' ? Selection.atStart(this.state.doc) : Selection.atEnd(this.state.doc);\n    this.tr.setSelection(selection);\n    this.applyTrx();\n    this.view.focus();\n    return this;\n  }\n  scrollIntoView() {\n    this.tr.scrollIntoView();\n    this.applyTrx();\n    return this;\n  }\n  insertText(text) {\n    this.tr.insertText(text);\n    this.applyTrx();\n    return this;\n  }\n  insertNewLine() {\n    const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n    chainCommands(...newLineCommands)(this.state, this.dispatch);\n    return this;\n  }\n  applyMark(name) {\n    execMark(name, false)(this.state, this.dispatch);\n    return this;\n  }\n  toggleMark(name) {\n    execMark(name, true)(this.state, this.dispatch);\n    return this;\n  }\n  bold() {\n    execMark('strong')(this.state, this.dispatch);\n    return this;\n  }\n  toggleBold() {\n    execMark('strong', true)(this.state, this.dispatch);\n    return this;\n  }\n  italics() {\n    execMark('em')(this.state, this.dispatch);\n    return this;\n  }\n  toggleItalics() {\n    execMark('em', true)(this.state, this.dispatch);\n    return this;\n  }\n  underline() {\n    execMark('u')(this.state, this.dispatch);\n    return this;\n  }\n  toggleUnderline() {\n    execMark('u', true)(this.state, this.dispatch);\n    return this;\n  }\n  strike() {\n    execMark('s')(this.state, this.dispatch);\n    return this;\n  }\n  toggleStrike() {\n    execMark('s', true)(this.state, this.dispatch);\n    return this;\n  }\n  code() {\n    execMark('code')(this.state, this.dispatch);\n    return this;\n  }\n  toggleCode() {\n    execMark('code', true)(this.state, this.dispatch);\n    return this;\n  }\n  superscript() {\n    execMark('sup')(this.state, this.dispatch);\n    return this;\n  }\n  subscript() {\n    execMark('sub')(this.state, this.dispatch);\n    return this;\n  }\n  toggleOrderedList() {\n    const command = new ListItem(false);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  toggleBulletList() {\n    const command = new ListItem(true);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  toggleHeading(level) {\n    const command = new Heading(level);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  insertLink(text, attrs) {\n    const command = new Link$1();\n    command.insert(text, attrs)(this.state, this.dispatch);\n    return this;\n  }\n  updateLink(attrs) {\n    const command = new Link$1();\n    command.update(attrs)(this.state, this.dispatch);\n    return this;\n  }\n  insertImage(src, attrs = {}) {\n    const command = new Image$1();\n    command.insert(src, attrs)(this.state, this.dispatch);\n    return this;\n  }\n  textColor(color) {\n    const command = new TextColor$1('text_color');\n    command.apply({\n      color\n    })(this.state, this.dispatch);\n    return this;\n  }\n  backgroundColor(color) {\n    const command = new TextColor$1('text_background_color');\n    command.apply({\n      backgroundColor: color\n    })(this.state, this.dispatch);\n    return this;\n  }\n  removeTextColor() {\n    const command = new TextColor$1('text_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n  removeBackgroundColor() {\n    const command = new TextColor$1('text_background_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n  align(p) {\n    const command = new TextAlign(p);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  insertHTML(html) {\n    const {\n      selection,\n      schema,\n      tr\n    } = this.state;\n    const {\n      from,\n      to\n    } = selection;\n    const element = document.createElement('div');\n    element.innerHTML = isString(html) ? html.trim() : html;\n    const slice = DOMParser.fromSchema(schema).parseSlice(element);\n    const transaction = tr.replaceRange(from, to, slice);\n    this.applyTrx(transaction);\n    return this;\n  }\n  indent() {\n    const command = new Indent('increase');\n    command.insert()(this.state, this.dispatch);\n    return this;\n  }\n  outdent() {\n    const command = new Indent('decrease');\n    command.insert()(this.state, this.dispatch);\n    return this;\n  }\n}\nconst isMacOs = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false;\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = nodeType => {\n  return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = nodeType => {\n  return wrappingInputRule(/^(?:\\d+)\\.\\s$/, nodeType, match => ({\n    order: Number(match[1])\n  }), (match, node) => node.childCount + node.attrs['order'] === Number(match[1]));\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = nodeType => {\n  return wrappingInputRule(/^\\s*(?:[-+*])\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = nodeType => {\n  return textblockTypeInputRule(/^```$/, nodeType);\n};\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType, maxLevel) => {\n  return textblockTypeInputRule(new RegExp(`^(#{1,${maxLevel}})\\\\s$`), nodeType, match => ({\n    level: match[1].length\n  }));\n};\n// : (MarkType) → InputRule\n// Wraps matching text with bold mark\nconst boldRule = markType => {\n  // eslint-disable-next-line prefer-named-capture-group\n  return markInputRule(/(?:^|\\s)(?:(\\*\\*|__)(?:([^*_]+))(\\*\\*|__))$/, markType);\n};\n// : (MarkType) → InputRule\n// Wraps matching text with em mark\nconst emRule = markType => {\n  // eslint-disable-next-line prefer-named-capture-group\n  return markInputRule(/(?:^|\\s)(?:(\\*|_)(?:([^*_]+))(\\*|_))$/, markType);\n};\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = schema => {\n  const rules = smartQuotes.concat(ellipsis, emDash);\n  rules.push(boldRule(schema.marks['strong']));\n  rules.push(emRule(schema.marks['em']));\n  rules.push(blockQuoteRule(schema.nodes['blockquote']));\n  rules.push(orderedListRule(schema.nodes['ordered_list']));\n  rules.push(bulletListRule(schema.nodes['bullet_list']));\n  rules.push(codeBlockRule(schema.nodes['code_block']));\n  rules.push(headingRule(schema.nodes['heading'], 6));\n  return inputRules({\n    rules\n  });\n};\nconst getKeyboardShortcuts = (schema, options) => {\n  const historyKeyMap = {};\n  historyKeyMap['Mod-z'] = undo$1;\n  if (isMacOs) {\n    historyKeyMap['Shift-Mod-z'] = redo$1;\n  } else {\n    historyKeyMap['Mod-y'] = redo$1;\n  }\n  const plugins = [keymap({\n    'Mod-b': toggleMark(schema.marks['strong']),\n    'Mod-i': toggleMark(schema.marks['em']),\n    'Mod-u': toggleMark(schema.marks['u']),\n    'Mod-`': toggleMark(schema.marks['code'])\n  }), keymap({\n    'Enter': splitListItem(schema.nodes['list_item']),\n    'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n      const {\n        tr\n      } = state;\n      const br = schema.nodes['hard_break'];\n      dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n      return true;\n    }),\n    'Mod-[': liftListItem(schema.nodes['list_item']),\n    'Mod-]': sinkListItem(schema.nodes['list_item']),\n    'Tab': sinkListItem(schema.nodes['list_item'])\n  }), keymap(baseKeymap)];\n  if (options.history) {\n    plugins.push(keymap(historyKeyMap));\n  }\n  return plugins;\n};\nconst getDefaultPlugins = (schema, options) => {\n  const plugins = [];\n  if (options.keyboardShortcuts) {\n    plugins.push(...getKeyboardShortcuts(schema, {\n      history: options.history\n    }));\n  }\n  if (options.history) {\n    plugins.push(history());\n  }\n  if (options.inputRules) {\n    plugins.push(buildInputRules(schema));\n  }\n  return plugins;\n};\nconst defaultFeatures = {\n  linkOnPaste: true,\n  resizeImage: true\n};\nconst DEFAULT_OPTIONS = {\n  content: null,\n  history: true,\n  keyboardShortcuts: true,\n  inputRules: true,\n  schema: schema,\n  plugins: [],\n  nodeViews: {},\n  attributes: {},\n  features: defaultFeatures,\n  handleScrollToSelection: null,\n  linkValidationPattern: '(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)|(mailto:.*[@].*)'\n};\nclass Editor {\n  options;\n  view;\n  constructor(options = DEFAULT_OPTIONS) {\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ...options\n    };\n    this.createEditor();\n  }\n  valueChangesSubject = new Subject();\n  updateSubject = new Subject();\n  get valueChanges() {\n    return this.valueChangesSubject.asObservable();\n  }\n  get update() {\n    return this.updateSubject.asObservable();\n  }\n  get schema() {\n    return this.options.schema || schema;\n  }\n  get linkValidationPattern() {\n    return this.options.linkValidationPattern;\n  }\n  get commands() {\n    return new EditorCommands(this.view);\n  }\n  get features() {\n    return {\n      ...defaultFeatures,\n      ...this.options.features\n    };\n  }\n  handleTransactions(tr) {\n    const state = this.view.state.apply(tr);\n    this.view.updateState(state);\n    this.updateSubject.next(this.view);\n    if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n      return;\n    }\n    const json = state.doc.toJSON();\n    this.valueChangesSubject.next(json);\n  }\n  createEditor() {\n    const {\n      options,\n      schema\n    } = this;\n    const {\n      content = null,\n      nodeViews\n    } = options;\n    const {\n      history = true,\n      keyboardShortcuts = true,\n      inputRules = true\n    } = options;\n    const doc = parseContent(content, schema, options.parseOptions);\n    const plugins = options.plugins ?? [];\n    const attributes = options.attributes ?? {};\n    const defaultPlugins = getDefaultPlugins(schema, {\n      history,\n      keyboardShortcuts,\n      inputRules\n    });\n    this.view = new EditorView(null, {\n      state: EditorState.create({\n        doc,\n        schema,\n        plugins: [...defaultPlugins, ...plugins]\n      }),\n      nodeViews,\n      dispatchTransaction: this.handleTransactions.bind(this),\n      attributes,\n      handleScrollToSelection: options.handleScrollToSelection\n    });\n  }\n  setContent(content) {\n    if (isNil(content)) {\n      return;\n    }\n    const {\n      state\n    } = this.view;\n    const {\n      tr,\n      doc\n    } = state;\n    const newDoc = parseContent(content, this.schema, this.options.parseOptions);\n    tr.replaceWith(0, state.doc.content.size, newDoc);\n    // don't emit if both content is same\n    if (doc.eq(tr.doc)) {\n      return;\n    }\n    if (!tr.docChanged) {\n      return;\n    }\n    this.view.dispatch(tr);\n  }\n  registerPlugin(plugin) {\n    const {\n      state\n    } = this.view;\n    const plugins = [...state.plugins, plugin];\n    const newState = state.reconfigure({\n      plugins\n    });\n    this.view.updateState(newState);\n  }\n  destroy() {\n    this.view.destroy();\n  }\n}\n\n/*\n * Public API Surface of ngx-editor\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DEFAULT_TOOLBAR, Editor, FloatingMenuComponent, ImageViewComponent, MenuComponent, NGX_EDITOR_CONFIG_TOKEN, NgxEditorComponent, NgxEditorModule, NgxEditorService, TOOLBAR_FULL, TOOLBAR_MINIMAL, Validators, emptyDoc, getKeyboardShortcuts, parseContent, provideMyServiceOptions, toDoc, toHTML };","map":{"version":3,"names":["i0","EventEmitter","Component","Input","Output","ViewChild","ApplicationRef","createComponent","forwardRef","ViewEncapsulation","Injectable","Optional","Pipe","HostListener","HostBinding","NgModule","InjectionToken","i4","NG_VALUE_ACCESSOR","FormGroup","FormControl","Validators","Validators$1","ReactiveFormsModule","Subject","isObservable","of","fromEvent","asyncScheduler","takeUntil","throttleTime","NgxEditorError","clamp","uniq","isNil","Plugin","PluginKey","NodeSelection","Selection","EditorState","DecorationSet","Decoration","EditorView","i3","CommonModule","Fragment","Slice","DOMSerializer","DOMParser","schema","marks","nodes","toggleMark","lift","wrapIn","setBlockType","newlineInCode","createParagraphNear","liftEmptyBlock","splitBlock","chainCommands","exitCode","baseKeymap","applyMark","removeLink","removeMark","isMarkActive","isNodeActive","canInsert","getSelectionNodes","getSelectionMarks","markInputRule","liftListItem","wrapInList","splitListItem","sinkListItem","undo","undo$1","redo","redo$1","history","i1","computePosition","offset","autoPlacement","detectOverflow","keymap","wrappingInputRule","textblockTypeInputRule","smartQuotes","ellipsis","emDash","inputRules","_c0","ImageViewComponent_span_1_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ImageViewComponent_span_1_Template_span_mousedown_1_listener","$event","ɵɵrestoreView","ctx_r2","ɵɵnextContext","ɵɵresetView","startResizing","ɵɵelementEnd","ImageViewComponent_span_1_Template_span_mousedown_2_listener","ctx_r4","ImageViewComponent_span_1_Template_span_mousedown_3_listener","ctx_r5","ImageViewComponent_span_1_Template_span_mousedown_4_listener","ctx_r6","_c1","a0","_c2","_c3","LinkComponent_div_4_div_8_Template","ɵɵtext","ɵɵpipe","ctx_r1","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","href","errors","getLabel","LinkComponent_div_4_div_15_Template","text","LinkComponent_div_4_div_16_Template","ɵɵelement","ctx_r3","LinkComponent_div_4_Template","_r5","LinkComponent_div_4_Template_form_ngSubmit_1_listener","insertLink","ɵɵtemplate","ctx_r0","ɵɵproperty","form","getId","ɵɵtextInterpolate","touched","invalid","options","showOpenInNewTab","valid","_c4","a1","DropdownComponent_div_4_button_1_Template","_r4","DropdownComponent_div_4_button_1_Template_button_mousedown_0_listener","restoredCtx","item_r2","$implicit","onDropdownItemMouseClick","DropdownComponent_div_4_button_1_Template_button_keydown_enter_0_listener","onDropdownItemKeydown","DropdownComponent_div_4_button_1_Template_button_keydown_space_0_listener","ɵɵpureFunction2","activeItem","disabledItems","includes","getName","ɵɵattribute","DropdownComponent_div_4_Template","items","trackByIndex","ImageComponent_div_4_div_8_Template","src","ImageComponent_div_4_Template","ImageComponent_div_4_Template_form_ngSubmit_1_listener","dirty","_c5","backgroundColor","color","_c6","ColorPickerComponent_div_4_div_1_button_1_Template","_r6","ColorPickerComponent_div_4_div_1_button_1_Template_button_mousedown_0_listener","color_r4","onColorSelectMouseClick","ColorPickerComponent_div_4_div_1_button_1_Template_button_keydown_enter_0_listener","ctx_r7","onColorSelectKeydown","ColorPickerComponent_div_4_div_1_button_1_Template_button_keydown_space_0_listener","ctx_r8","getContrastYIQ","ɵɵpureFunction1","activeColors","ColorPickerComponent_div_4_div_1_Template","colorGroup_r2","ColorPickerComponent_div_4_Template","_r10","ColorPickerComponent_div_4_Template_button_mousedown_2_listener","ctx_r9","onRemoveMouseClick","ColorPickerComponent_div_4_Template_button_keydown_enter_2_listener","ctx_r11","onRemoveKeydown","ColorPickerComponent_div_4_Template_button_keydown_space_2_listener","ctx_r12","presets","isActive","MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template","item_r5","ɵɵclassMap","iconContainerClass","MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template","MenuComponent_ng_container_1_ng_container_1_ng_container_3_Template","ɵɵelementContainerStart","ɵɵelementContainerEnd","getLinkOptions","MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template","ctx_r10","MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template","dropdownItem_r19","ctx_r18","dropdownContainerClass","key","value","MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template","getDropdownItems","MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template","MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template","ctx_r13","MenuComponent_ng_container_1_ng_container_1_div_8_Template","ctx_r14","seperatorClass","MenuComponent_ng_container_1_ng_container_1_Template","lastItem_r6","last","lastToolbarItem_r3","toggleCommands","insertCommands","isLinkItem","isDropDown","MenuComponent_ng_container_1_Template","toolbarItem_r2","MenuComponent_ng_container_2_Template","ɵɵelementContainer","customMenuRef","_c7","_c8","BubbleComponent_ng_container_0_ng_container_1_button_1_Template","BubbleComponent_ng_container_0_ng_container_1_button_1_Template_button_mousedown_0_listener","item_r4","onClick","activeItems","execulableItems","getTitle","getIcon","ɵɵsanitizeHtml","BubbleComponent_ng_container_0_ng_container_1_div_2_Template","BubbleComponent_ng_container_0_ng_container_1_Template","lastItem_r5","lastToolbarItem_r2","BubbleComponent_ng_container_0_Template","toolbarItem_r1","FloatingMenuComponent_ng_container_3_Template","editor","editablePlugin","editable","state","init","apply","tr","previousVal","getMeta","props","getState","attributes","isEnabled","class","PLACEHOLDER_CLASSNAME","placeholderPlugin","placeholder","decorations","doc","textContent","childCount","empty","decorate","node","pos","type","isBlock","length","from","to","nodeSize","placeholderNode","attrs","push","descendants","create","attributesPlugin","focusPlugin","cb","handleDOMEvents","focus","blurPlugin","blur","ImageViewComponent","alt","title","outerWidth","selected","view","imageResize","imgEl","e","direction","preventDefault","resizeImage","evt","startX","pageX","startWidth","nativeElement","clientWidth","isLeftResize","width","window","getComputedStyle","dom","editorWidth","parseInt","onMouseMove","currentX","diffInPx","computedWidth","onMouseUp","document","removeEventListener","emit","addEventListener","ɵfac","ImageViewComponent_Factory","t","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","ImageViewComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","inputs","outputs","decls","vars","consts","template","ImageViewComponent_Template","ɵɵstyleProp","ɵɵsanitizeUrl","dependencies","NgClass","NgIf","styles","ngDevMode","ɵsetClassMetadata","args","selector","static","ImageRezieView","getPos","applicationRef","imageComponentRef","resizeSubscription","updating","constructor","injector","get","environmentInjector","attachView","hostView","setNodeAttributes","instance","location","subscribe","handleResize","computeChanges","prevAttrs","newAttrs","JSON","stringify","dispatch","transaction","setNodeMarkup","undefined","resolvedPos","resolve","newSelection","setSelection","update","changed","ignoreMutation","selectNode","deselectNode","destroy","unsubscribe","detachView","imageResizePlugin","nodeViews","image","HTTP_LINK_REGEX","linkify","fragment","linkified","forEach","child","isText","match","exec","start","index","end","link","cut","urlText","slice","mark","addToSet","copy","content","fromArray","linkifyPlugin","transformPasted","openStart","openEnd","isString","getTrustedTypes","trustedTypes","isTrustedHtml","isHTML","isHtml","emptyDoc","toHTML","json","inputSchema","schema$1","contentNode","nodeFromJSON","html","fromSchema","serializeFragment","div","createElement","appendChild","innerHTML","toDoc","el","parse","toJSON","parseContent","docJson","NgxEditorComponent","renderer","elementRef","ngxEditor","outputFormat","focusOut","focusIn","onChange","onTouched","writeValue","setContent","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","setMeta","setProperty","handleChange","jsonDoc","setPlaceholder","registerPlugins","registerPlugin","features","linkOnPaste","ngOnInit","valueChanges","pipe","ngOnChanges","changes","isFirstChange","currentValue","ngOnDestroy","next","complete","NgxEditorComponent_Factory","ɵɵdirectiveInject","Renderer2","Injector","ElementRef","NgxEditorComponent_Query","ɵɵProvidersFeature","provide","useExisting","multi","ɵɵNgOnChangesFeature","ngContentSelectors","NgxEditorComponent_Template","ɵɵprojectionDef","ɵɵprojection","encapsulation","providers","None","MenuService","customMenuRefChange","setCustomMenuRef","c","MenuService_Factory","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","Mark","name","toggle","canExecute","Blockqote","HorizontalRule","insert","replaceSelectionWith","scrollIntoView","ListItem","isBulletList","getType","Heading","level","selection","nodePos","$from","before","nodeAt","nodesInSelection","supportedNodes","filter","acitveNode","find","Boolean","TextAlign","align","applicable","nodesBetween","nodeType","docChanged","active","defaultOptions","strict","Link$1","Link","linkAttrs","target","remove","testAttrs","Image$1","Image","imageAttrs","createAndFill","anchor","$anchor","nodeBefore","TextColor$1","TextColor","attrName","isAtom","isLeaf","getActiveColors","colors","map","SAFE_MARKS","FormatClear","ranges","Object","entries","markType","range","$to","indentNodeTypes","minIndent","maxIndent","udpateIndentLevel","method","nodeIndent","newIndent","indent","Indent","History","mode","STRONG","EM","CODE","UNDERLINE","STRIKE","BLOCKQUOTE","HORIZONTAL_RULE","FORMAT_CLEAR","UL","OL","H1","H2","H3","H4","H5","H6","ALIGN_LEFT","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_JUSTIFY","LINK","IMAGE","TEXT_COLOR","TEXT_BACKGROUND_COLOR","INDENT","OUTDENT","SUPERSCRIPT","SUBSCRIPT","UNDO","REDO","ToggleCommands","bold","italic","code","underline","strike","blockquote","bullet_list","ordered_list","h1","h2","h3","h4","h5","h6","align_left","align_center","align_right","align_justify","superscript","subscript","InsertCommands","horizontal_rule","format_clear","outdent","TextBackgroundColor","defaults","heading","text_color","background_color","insertImage","url","openInNewTab","altText","enterValidUrl","Locals","locals","newLocals","orderedList","bulletList","quote","unlink","alignLeft","alignCenter","alignRight","alignJustify","textColor","colorFill","horizontalRule","formatClear","DEFAULT_ICON_HEIGHT","DEFAULT_ICON_WIDTH","DEFAULT_ICON_FILL","icons","color_fill","path","Icon","fill","fullPath","NgxEditorServiceConfig","NgxEditorServiceConfig_Factory","NgxEditorService","config","icon","NgxEditorService_Factory","ɵɵinject","decorators","provideMyServiceOptions","SanitizeHtmlPipe","sanitizer","transform","bypassSecurityTrustHtml","SanitizeHtmlPipe_Factory","DomSanitizer","ɵpipe","ɵɵdefinePipe","pure","ToggleCommandComponent","ngxeService","menuService","toolbarItem","editorView","disabled","updateSubscription","command","onMouseClick","button","onKeydown","ToggleCommandComponent_Factory","ToggleCommandComponent_Template","ToggleCommandComponent_Template_button_mousedown_0_listener","ToggleCommandComponent_Template_button_keydown_enter_0_listener","ToggleCommandComponent_Template_button_keydown_space_0_listener","ɵɵclassProp","AsyncPipe","InsertCommandComponent","InsertCommandComponent_Factory","InsertCommandComponent_Template","InsertCommandComponent_Template_button_mousedown_0_listener","InsertCommandComponent_Template_button_keydown_enter_0_listener","InsertCommandComponent_Template_button_keydown_space_0_listener","DEFAULT_LINK_OPTIONS","LinkComponent","showPopup","componentId","onDocumentClick","contains","hidePopup","reset","enable","togglePopup","setText","onTogglePopupMouseClick","onTogglePopupKeydown","selectedText","textBetween","patchValue","disable","getRawValue","required","pattern","linkValidationPattern","LinkComponent_Factory","hostBindings","LinkComponent_HostBindings","LinkComponent_mousedown_HostBindingHandler","ɵɵresolveDocument","ɵɵInputTransformsFeature","LinkComponent_Template","LinkComponent_Template_button_mousedown_0_listener","LinkComponent_Template_button_keydown_enter_0_listener","LinkComponent_Template_button_keydown_space_0_listener","ɵNgNoValidate","DefaultValueAccessor","CheckboxControlValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","DropdownComponent","group","isDropdownOpen","isSelected","isDropdownDisabled","getIsDropdownActive","item","toggleDropdown","onToggleDropdownMouseClick","onToggleDropdownKeydown","selectItem","event","DropdownComponent_Factory","DropdownComponent_HostBindings","DropdownComponent_mousedown_HostBindingHandler","DropdownComponent_Template","DropdownComponent_Template_button_mousedown_0_listener","DropdownComponent_Template_button_keydown_enter_0_listener","DropdownComponent_Template_button_keydown_space_0_listener","NgForOf","ImageComponent","hideForm","fillForm","setValue","ImageComponent_Factory","ImageComponent_HostBindings","ImageComponent_mousedown_HostBindingHandler","ImageComponent_Template","ImageComponent_Template_button_mousedown_0_listener","ImageComponent_Template_button_keydown_enter_0_listener","ImageComponent_Template_button_keydown_space_0_listener","ColorPickerComponent","hexcolor","replace","r","substring","g","b","yiq","selectColor","hasFocus","ColorPickerComponent_Factory","ColorPickerComponent_HostBindings","ColorPickerComponent_mousedown_HostBindingHandler","ColorPickerComponent_Template","ColorPickerComponent_Template_button_mousedown_0_listener","ColorPickerComponent_Template_button_keydown_enter_0_listener","ColorPickerComponent_Template_button_keydown_space_0_listener","NgStyle","DEFAULT_TOOLBAR","TOOLBAR_MINIMAL","TOOLBAR_FULL","DEFAULT_COLOR_PRESETS","MenuComponent","toolbar","colorPresets","dropdownPlacement","col","row","Math","floor","isLinkWithOptions","MenuComponent_Factory","MenuComponent_Template","NgTemplateOutlet","KeyValuePipe","BubbleComponent","sanitizeHTML","commandName","stopPropagation","BubbleComponent_Factory","BubbleComponent_Template","FloatingMenuComponent","display","visibility","showMenu","opacity","top","posTop","left","posLeft","autoPlace","dragging","onMouseDown","nodeName","onKeyDown","hide","useUpdate","onKeyUp","show","calculateBubblePosition","_this","_asyncToGenerator","coordsAtPos","selectionElement","getBoundingClientRect","nodeDOM","bottom","right","x","y","height","bubbleEl","placement","middleware","boundary","padding","allowedPlacements","middlewareArgs","overflow","canShowMenu","then","leading","trailing","FloatingMenuComponent_Factory","hostVars","FloatingMenuComponent_HostBindings","FloatingMenuComponent_mousedown_HostBindingHandler","FloatingMenuComponent_keydown_HostBindingHandler","FloatingMenuComponent_mouseup_HostBindingHandler","FloatingMenuComponent_keyup_HostBindingHandler","ɵɵstyleMap","FloatingMenuComponent_Template","_r0","ɵɵreference","children","MenuModule","MenuModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","declarations","exports","NGX_EDITOR_CONFIG_TOKEN","defaultConfig","NgxEditorModule","forRoot","ngModule","useValue","useFactory","deps","forChild","NgxEditorModule_Factory","isEmptyInputValue","hasValidLength","isDocEmpty","firstChild","isTextblock","size","userSchema","control","isEmpty","maxLength","maxlength","requiredLength","actualLength","minLength","minlength","execMark","EditorCommands","applyTrx","forceEmit","eq","updateState","position","atStart","atEnd","insertText","insertNewLine","newLineCommands","toggleBold","italics","toggleItalics","toggleUnderline","toggleStrike","toggleCode","toggleOrderedList","toggleBulletList","toggleHeading","updateLink","removeTextColor","removeBackgroundColor","p","insertHTML","element","trim","parseSlice","replaceRange","isMacOs","navigator","test","platform","blockQuoteRule","orderedListRule","order","Number","bulletListRule","codeBlockRule","headingRule","maxLevel","RegExp","boldRule","emRule","buildInputRules","rules","concat","getKeyboardShortcuts","historyKeyMap","plugins","br","getDefaultPlugins","keyboardShortcuts","defaultFeatures","DEFAULT_OPTIONS","handleScrollToSelection","Editor","createEditor","valueChangesSubject","updateSubject","asObservable","commands","handleTransactions","parseOptions","defaultPlugins","dispatchTransaction","bind","newDoc","replaceWith","plugin","newState","reconfigure"],"sources":["/Users/diakaria/Documents/SAITECH/ANGULAR/visitrack/node_modules/ngx-editor/fesm2022/ngx-editor.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, ApplicationRef, createComponent, forwardRef, ViewEncapsulation, Injectable, Optional, Pipe, HostListener, HostBinding, NgModule, InjectionToken } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, FormGroup, FormControl, Validators as Validators$1, ReactiveFormsModule } from '@angular/forms';\nimport { Subject, isObservable, of, fromEvent, asyncScheduler } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\nimport { NgxEditorError, clamp, uniq, isNil } from 'ngx-editor/utils';\nimport { Plugin, PluginKey, NodeSelection, Selection, EditorState } from 'prosemirror-state';\nimport { DecorationSet, Decoration, EditorView } from 'prosemirror-view';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { Fragment, Slice, DOMSerializer, DOMParser } from 'prosemirror-model';\nimport { schema } from 'ngx-editor/schema';\nexport { marks, nodes, schema } from 'ngx-editor/schema';\nimport { toggleMark, lift, wrapIn, setBlockType, newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock, chainCommands, exitCode, baseKeymap } from 'prosemirror-commands';\nimport { applyMark, removeLink, removeMark } from 'ngx-editor/commands';\nimport { isMarkActive, isNodeActive, canInsert, getSelectionNodes, getSelectionMarks, markInputRule } from 'ngx-editor/helpers';\nimport { liftListItem, wrapInList, splitListItem, sinkListItem } from 'prosemirror-schema-list';\nimport { undo as undo$1, redo as redo$1, history } from 'prosemirror-history';\nimport * as i1 from '@angular/platform-browser';\nimport { computePosition, offset, autoPlacement, detectOverflow } from '@floating-ui/dom';\nimport { keymap } from 'prosemirror-keymap';\nimport { wrappingInputRule, textblockTypeInputRule, smartQuotes, ellipsis, emDash, inputRules } from 'prosemirror-inputrules';\n\nconst editablePlugin = (editable = true) => {\n    return new Plugin({\n        key: new PluginKey('editable'),\n        state: {\n            init() {\n                return editable;\n            },\n            apply(tr, previousVal) {\n                return tr.getMeta('UPDATE_EDITABLE') ?? previousVal;\n            },\n        },\n        props: {\n            editable(state) {\n                return this.getState(state);\n            },\n            attributes(state) {\n                const isEnabled = this.getState(state);\n                if (isEnabled) {\n                    return null;\n                }\n                return {\n                    class: 'NgxEditor__Content--Disabled',\n                };\n            },\n        },\n    });\n};\n\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\nconst placeholderPlugin = (text) => {\n    return new Plugin({\n        key: new PluginKey('placeholder'),\n        state: {\n            init() {\n                return text ?? '';\n            },\n            apply(tr, previousVal) {\n                const placeholder = tr.getMeta('UPDATE_PLACEHOLDER') ?? previousVal;\n                return placeholder;\n            },\n        },\n        props: {\n            decorations(state) {\n                const { doc } = state;\n                const { textContent, childCount } = doc;\n                const placeholder = this.getState(state);\n                if (!placeholder || childCount > 1) {\n                    return DecorationSet.empty;\n                }\n                const decorations = [];\n                const decorate = (node, pos) => {\n                    if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n                        const from = pos;\n                        const to = pos + node.nodeSize;\n                        const placeholderNode = Decoration.node(from, to, {\n                            'class': PLACEHOLDER_CLASSNAME,\n                            'data-placeholder': placeholder,\n                            'data-align': node.attrs['align'] ?? null,\n                        });\n                        decorations.push(placeholderNode);\n                    }\n                    return false;\n                };\n                doc.descendants(decorate);\n                return DecorationSet.create(doc, decorations);\n            },\n        },\n    });\n};\n\nconst attributesPlugin = (attributes = {}) => {\n    return new Plugin({\n        key: new PluginKey('attributes'),\n        props: {\n            attributes,\n        },\n    });\n};\n\nconst focusPlugin = (cb) => {\n    return new Plugin({\n        key: new PluginKey('focus'),\n        props: {\n            handleDOMEvents: {\n                focus: () => {\n                    cb();\n                    return false;\n                },\n            },\n        },\n    });\n};\n\nconst blurPlugin = (cb) => {\n    return new Plugin({\n        key: new PluginKey('blur'),\n        props: {\n            handleDOMEvents: {\n                blur: () => {\n                    cb();\n                    return false;\n                },\n            },\n        },\n    });\n};\n\nclass ImageViewComponent {\n    src;\n    alt = '';\n    title = '';\n    outerWidth = '';\n    selected = false;\n    view;\n    imageResize = new EventEmitter();\n    imgEl;\n    startResizing(e, direction) {\n        e.preventDefault();\n        this.resizeImage(e, direction);\n    }\n    resizeImage(evt, direction) {\n        const startX = evt.pageX;\n        const startWidth = this.imgEl.nativeElement.clientWidth;\n        const isLeftResize = direction === 'left';\n        const { width } = window.getComputedStyle(this.view.dom);\n        const editorWidth = parseInt(width, 10);\n        const onMouseMove = (e) => {\n            const currentX = e.pageX;\n            const diffInPx = currentX - startX;\n            const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx;\n            // prevent image overflow the editor\n            // prevent resizng below 20px\n            if (computedWidth > editorWidth || computedWidth < 20) {\n                return;\n            }\n            this.outerWidth = `${computedWidth}px`;\n        };\n        const onMouseUp = (e) => {\n            e.preventDefault();\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n            this.imageResize.emit();\n        };\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ImageViewComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: ImageViewComponent, selector: \"ngx-image-view\", inputs: { src: \"src\", alt: \"alt\", title: \"title\", outerWidth: \"outerWidth\", selected: \"selected\", view: \"view\" }, outputs: { imageResize: \"imageResize\" }, viewQueries: [{ propertyName: \"imgEl\", first: true, predicate: [\"imgEl\"], descendants: true, static: true }], ngImport: i0, template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{ 'NgxEditor__Resizer--Active': selected }\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ImageViewComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-image-view', template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{ 'NgxEditor__Resizer--Active': selected }\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"] }]\n        }], propDecorators: { src: [{\n                type: Input\n            }], alt: [{\n                type: Input\n            }], title: [{\n                type: Input\n            }], outerWidth: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], view: [{\n                type: Input\n            }], imageResize: [{\n                type: Output\n            }], imgEl: [{\n                type: ViewChild,\n                args: ['imgEl', { static: true }]\n            }] } });\n\nclass ImageRezieView {\n    dom;\n    view;\n    getPos;\n    applicationRef;\n    imageComponentRef;\n    resizeSubscription;\n    node;\n    updating = false;\n    constructor(node, view, getPos, injector) {\n        this.applicationRef = injector.get(ApplicationRef);\n        // create component ref\n        this.imageComponentRef = createComponent(ImageViewComponent, {\n            environmentInjector: this.applicationRef.injector,\n        });\n        // Attach to the view so that the change detector knows to run\n        this.applicationRef.attachView(this.imageComponentRef.hostView);\n        this.setNodeAttributes(node.attrs);\n        this.imageComponentRef.instance.view = view;\n        this.dom = this.imageComponentRef.location.nativeElement;\n        this.view = view;\n        this.node = node;\n        this.getPos = getPos;\n        this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n            this.handleResize();\n        });\n    }\n    computeChanges(prevAttrs, newAttrs) {\n        return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n    }\n    setNodeAttributes(attrs) {\n        this.imageComponentRef.instance.src = attrs['src'];\n        this.imageComponentRef.instance.alt = attrs['alt'];\n        this.imageComponentRef.instance.title = attrs['title'];\n        this.imageComponentRef.instance.outerWidth = attrs['width'];\n    }\n    handleResize = () => {\n        if (this.updating) {\n            return;\n        }\n        const { state, dispatch } = this.view;\n        const { tr } = state;\n        const transaction = tr.setNodeMarkup(this.getPos(), undefined, {\n            ...this.node.attrs,\n            width: this.imageComponentRef.instance.outerWidth,\n        });\n        const resolvedPos = transaction.doc.resolve(this.getPos());\n        const newSelection = new NodeSelection(resolvedPos);\n        transaction.setSelection(newSelection);\n        dispatch(transaction);\n    };\n    update(node) {\n        if (node.type !== this.node.type) {\n            return false;\n        }\n        this.node = node;\n        const changed = this.computeChanges(this.node.attrs, node.attrs);\n        if (changed) {\n            this.updating = true;\n            this.setNodeAttributes(node.attrs);\n            this.updating = false;\n        }\n        return true;\n    }\n    ignoreMutation() {\n        return true;\n    }\n    selectNode() {\n        this.imageComponentRef.instance.selected = true;\n    }\n    deselectNode() {\n        this.imageComponentRef.instance.selected = false;\n    }\n    destroy() {\n        this.resizeSubscription.unsubscribe();\n        this.applicationRef.detachView(this.imageComponentRef.hostView);\n    }\n}\nconst imageResizePlugin = (injector) => {\n    return new Plugin({\n        key: new PluginKey('image-resize'),\n        props: {\n            nodeViews: {\n                image: (node, view, getPos) => {\n                    return new ImageRezieView(node, view, getPos, injector);\n                },\n            },\n        },\n    });\n};\n\nconst HTTP_LINK_REGEX = /(?:https?:\\/\\/)?[\\w-]+(?:\\.[\\w-]+)+\\.?(?:\\d+)?(?:\\/\\S*)?$/;\nconst linkify = (fragment) => {\n    const linkified = [];\n    fragment.forEach((child) => {\n        if (child.isText) {\n            const text = child.text;\n            let pos = 0;\n            const match = HTTP_LINK_REGEX.exec(text);\n            if (match) {\n                const start = match.index;\n                const end = start + match[0].length;\n                const { link } = child.type.schema.marks;\n                if (start > 0) {\n                    linkified.push(child.cut(pos, start));\n                }\n                const urlText = text.slice(start, end);\n                linkified.push(child.cut(start, end).mark(link.create({ href: urlText }).addToSet(child.marks)));\n                pos = end;\n            }\n            if (pos < text.length) {\n                linkified.push(child.cut(pos));\n            }\n        }\n        else {\n            linkified.push(child.copy(linkify(child.content)));\n        }\n    });\n    return Fragment.fromArray(linkified);\n};\nconst linkifyPlugin = () => {\n    return new Plugin({\n        key: new PluginKey('linkify'),\n        props: {\n            transformPasted: (slice) => {\n                return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n            },\n        },\n    });\n};\n\nconst isString = (value) => {\n    return typeof value === 'string';\n};\n\nconst getTrustedTypes = () => {\n    return window.trustedTypes;\n};\nconst isTrustedHtml = (value) => {\n    return getTrustedTypes()?.isHTML(value) ?? false;\n};\nconst isHtml = (value) => {\n    return isString(value) || isTrustedHtml(value);\n};\n\nconst emptyDoc = {\n    type: 'doc',\n    content: [\n        {\n            type: 'paragraph',\n        },\n    ],\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nconst toHTML = (json, inputSchema) => {\n    const schema$1 = inputSchema ?? schema;\n    const contentNode = schema$1.nodeFromJSON(json);\n    const html = DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content);\n    const div = document.createElement('div');\n    div.appendChild(html);\n    return div.innerHTML;\n};\nconst toDoc = (html, inputSchema, options) => {\n    const schema$1 = inputSchema ?? schema;\n    const el = document.createElement('div');\n    el.innerHTML = html;\n    return DOMParser.fromSchema(schema$1).parse(el, options).toJSON();\n};\nconst parseContent = (value, schema, options) => {\n    if (!value) {\n        return schema.nodeFromJSON(emptyDoc);\n    }\n    if (!isHtml(value)) {\n        return schema.nodeFromJSON(value);\n    }\n    const docJson = toDoc(value, schema, options);\n    return schema.nodeFromJSON(docJson);\n};\n\nclass NgxEditorComponent {\n    renderer;\n    injector;\n    elementRef;\n    constructor(renderer, injector, elementRef) {\n        this.renderer = renderer;\n        this.injector = injector;\n        this.elementRef = elementRef;\n    }\n    ngxEditor;\n    editor;\n    outputFormat;\n    placeholder = 'Type Here...';\n    focusOut = new EventEmitter();\n    focusIn = new EventEmitter();\n    unsubscribe = new Subject();\n    onChange = () => { };\n    onTouched = () => { };\n    writeValue(value) {\n        if (!this.outputFormat && isHtml(value)) {\n            this.outputFormat = 'html';\n        }\n        this.editor.setContent(value ?? emptyDoc);\n    }\n    registerOnChange(fn) {\n        this.onChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n        this.setMeta('UPDATE_EDITABLE', !isDisabled);\n        this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n    }\n    handleChange(jsonDoc) {\n        if (this.outputFormat === 'html') {\n            const html = toHTML(jsonDoc, this.editor.schema);\n            this.onChange(html);\n            return;\n        }\n        this.onChange(jsonDoc);\n    }\n    setMeta(key, value) {\n        const { dispatch, state: { tr } } = this.editor.view;\n        dispatch(tr.setMeta(key, value));\n    }\n    setPlaceholder(placeholder) {\n        this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n    }\n    registerPlugins() {\n        this.editor.registerPlugin(editablePlugin());\n        this.editor.registerPlugin(placeholderPlugin(this.placeholder));\n        this.editor.registerPlugin(attributesPlugin({\n            class: 'NgxEditor__Content',\n        }));\n        this.editor.registerPlugin(focusPlugin(() => {\n            this.focusIn.emit();\n        }));\n        this.editor.registerPlugin(blurPlugin(() => {\n            this.focusOut.emit();\n            this.onTouched();\n        }));\n        if (this.editor.features.resizeImage) {\n            this.editor.registerPlugin(imageResizePlugin(this.injector));\n        }\n        if (this.editor.features.linkOnPaste) {\n            this.editor.registerPlugin(linkifyPlugin());\n        }\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new NgxEditorError('Required editor instance for initializing editor component');\n        }\n        this.registerPlugins();\n        this.renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n        this.editor.valueChanges\n            .pipe(takeUntil(this.unsubscribe))\n            .subscribe((jsonDoc) => {\n            this.handleChange(jsonDoc);\n        });\n    }\n    ngOnChanges(changes) {\n        if (changes['placeholder'] && !changes['placeholder'].isFirstChange()) {\n            this.setPlaceholder(changes['placeholder'].currentValue);\n        }\n    }\n    ngOnDestroy() {\n        this.unsubscribe.next();\n        this.unsubscribe.complete();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorComponent, deps: [{ token: i0.Renderer2 }, { token: i0.Injector }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: NgxEditorComponent, selector: \"ngx-editor\", inputs: { editor: \"editor\", outputFormat: \"outputFormat\", placeholder: \"placeholder\" }, outputs: { focusOut: \"focusOut\", focusIn: \"focusIn\" }, providers: [{\n                provide: NG_VALUE_ACCESSOR,\n                useExisting: forwardRef(() => NgxEditorComponent),\n                multi: true,\n            }], viewQueries: [{ propertyName: \"ngxEditor\", first: true, predicate: [\"ngxEditor\"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\":root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}\\n\"], encapsulation: i0.ViewEncapsulation.None });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor', providers: [{\n                            provide: NG_VALUE_ACCESSOR,\n                            useExisting: forwardRef(() => NgxEditorComponent),\n                            multi: true,\n                        }], encapsulation: ViewEncapsulation.None, template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\":root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}\\n\"] }]\n        }], ctorParameters: () => [{ type: i0.Renderer2 }, { type: i0.Injector }, { type: i0.ElementRef }], propDecorators: { ngxEditor: [{\n                type: ViewChild,\n                args: ['ngxEditor', { static: true }]\n            }], editor: [{\n                type: Input\n            }], outputFormat: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], focusOut: [{\n                type: Output\n            }], focusIn: [{\n                type: Output\n            }] } });\n\nclass MenuService {\n    editor;\n    customMenuRefChange = new Subject();\n    setCustomMenuRef(c) {\n        this.customMenuRefChange.next(c);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuService, providedIn: 'root' });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }] });\n\nclass Mark {\n    name;\n    constructor(name) {\n        this.name = name;\n    }\n    apply() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return applyMark(type)(state, dispatch);\n        };\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return toggleMark(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.marks[this.name];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass Blockqote {\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.nodes['blockquote'];\n            if (!type) {\n                return false;\n            }\n            if (this.isActive(state)) {\n                return lift(state, dispatch);\n            }\n            return wrapIn(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.nodes['blockquote'];\n        if (!type) {\n            return false;\n        }\n        return isNodeActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass HorizontalRule {\n    insert() {\n        return (state, dispatch) => {\n            const { schema, tr } = state;\n            const type = schema.nodes['horizontal_rule'];\n            if (!type) {\n                return false;\n            }\n            dispatch(tr.replaceSelectionWith(type.create()).scrollIntoView());\n            return true;\n        };\n    }\n    canExecute(state) {\n        return canInsert(state, state.schema.nodes['horizontal_rule']);\n    }\n}\n\nclass ListItem {\n    isBulletList = false;\n    constructor(isBulletList = false) {\n        this.isBulletList = isBulletList;\n    }\n    getType(schema) {\n        return this.isBulletList ? schema.nodes['bullet_list'] : schema.nodes['ordered_list'];\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = this.getType(schema);\n            if (!type) {\n                return false;\n            }\n            if (this.isActive(state)) {\n                return liftListItem(schema.nodes['list_item'])(state, dispatch);\n            }\n            return wrapInList(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = this.getType(schema);\n        if (!type) {\n            return false;\n        }\n        return isNodeActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass Heading {\n    level;\n    constructor(level) {\n        this.level = level;\n    }\n    apply() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.nodes['heading'];\n            if (!type) {\n                return false;\n            }\n            return setBlockType(type)(state, dispatch);\n        };\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema, selection, doc } = state;\n            const type = schema.nodes['heading'];\n            if (!type) {\n                return false;\n            }\n            const nodePos = selection.$from.before(1);\n            const node = doc.nodeAt(nodePos);\n            const attrs = node?.attrs ?? {};\n            if (this.isActive(state)) {\n                return setBlockType(schema.nodes['paragraph'], attrs)(state, dispatch);\n            }\n            return setBlockType(type, { ...attrs, level: this.level })(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const nodesInSelection = getSelectionNodes(state);\n        const type = schema.nodes['heading'];\n        if (!type) {\n            return false;\n        }\n        const supportedNodes = [\n            type,\n            schema.nodes['text'],\n            schema.nodes['blockquote'],\n        ];\n        // heading is a text node\n        // don't mark as active when it has more nodes\n        const nodes = nodesInSelection.filter((node) => {\n            return supportedNodes.includes(node.type);\n        });\n        const acitveNode = nodes.find((node) => {\n            return node.attrs['level'] === this.level;\n        });\n        return Boolean(acitveNode);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass TextAlign {\n    align;\n    constructor(align) {\n        this.align = align;\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { doc, selection, tr, schema } = state;\n            const { from, to } = selection;\n            let applicable = false;\n            doc.nodesBetween(from, to, (node, pos) => {\n                const nodeType = node.type;\n                if ([schema.nodes['paragraph'], schema.nodes['heading']].includes(nodeType)) {\n                    applicable = true;\n                    const align = node.attrs['align'] === this.align ? null : this.align;\n                    tr.setNodeMarkup(pos, nodeType, { ...node.attrs, align });\n                }\n                return true;\n            });\n            if (!applicable) {\n                return false;\n            }\n            if (tr.docChanged) {\n                dispatch?.(tr);\n            }\n            return true;\n        };\n    }\n    isActive(state) {\n        const nodes = getSelectionNodes(state);\n        const active = nodes.find((node) => {\n            return node.attrs['align'] === this.align;\n        });\n        return Boolean(active);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nconst defaultOptions = {\n    strict: true,\n};\nlet Link$1 = class Link {\n    update(attrs) {\n        return (state, dispatch) => {\n            const { schema, selection } = state;\n            const type = schema.marks['link'];\n            if (!type) {\n                return false;\n            }\n            if (selection.empty) {\n                return false;\n            }\n            return toggleMark(type, attrs)(state, dispatch);\n        };\n    }\n    insert(text, attrs) {\n        return (state, dispatch) => {\n            const { schema, tr } = state;\n            const type = schema.marks['link'];\n            if (!type) {\n                return false;\n            }\n            const linkAttrs = {\n                href: attrs.href,\n                title: attrs.title ?? text,\n                target: attrs.target ?? '_blank',\n            };\n            const node = schema.text(text, [schema.marks['link'].create(linkAttrs)]);\n            tr.replaceSelectionWith(node, false)\n                .scrollIntoView();\n            if (tr.docChanged) {\n                dispatch?.(tr);\n                return true;\n            }\n            return false;\n        };\n    }\n    isActive(state, options = defaultOptions) {\n        if (options.strict) {\n            return true;\n        }\n        const { schema } = state;\n        const type = schema.marks['link'];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    remove(state, dispatch) {\n        return removeLink()(state, dispatch);\n    }\n    canExecute(state) {\n        const testAttrs = {\n            href: '',\n        };\n        return this.insert('Exec', testAttrs)(state) || this.update(testAttrs)(state);\n    }\n};\n\nlet Image$1 = class Image {\n    insert(src, attrs) {\n        return (state, dispatch) => {\n            const { schema, tr, selection } = state;\n            const type = schema.nodes['image'];\n            if (!type) {\n                return false;\n            }\n            const imageAttrs = {\n                width: null,\n                src,\n                ...attrs,\n            };\n            if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n                imageAttrs.width = selection.node.attrs['width'];\n            }\n            tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n            const resolvedPos = tr.doc.resolve(tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize);\n            tr\n                .setSelection(new NodeSelection(resolvedPos))\n                .scrollIntoView();\n            if (tr.docChanged) {\n                dispatch?.(tr);\n                return true;\n            }\n            return false;\n        };\n    }\n    isActive(state) {\n        const { selection } = state;\n        if (selection instanceof NodeSelection) {\n            return selection.node.type.name === 'image';\n        }\n        return false;\n    }\n};\n\nlet TextColor$1 = class TextColor {\n    name;\n    attrName;\n    constructor(name, attrName = 'color') {\n        this.name = name;\n        this.attrName = attrName;\n    }\n    apply(attrs) {\n        return (state, dispatch) => {\n            const { schema, selection, doc } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            const { from, to, empty } = selection;\n            if (!empty && (from + 1 === to)) {\n                const node = doc.nodeAt(from);\n                if (node?.isAtom && !node.isText && node.isLeaf) {\n                    // An atomic node (e.g. Image) is selected.\n                    return false;\n                }\n            }\n            return applyMark(type, attrs)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.marks[this.name];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    getActiveColors(state) {\n        if (!this.isActive(state)) {\n            return [];\n        }\n        const { schema } = state;\n        const marks = getSelectionMarks(state);\n        const colors = marks\n            .filter((mark) => mark.type === schema.marks[this.name])\n            .map((mark) => {\n            return mark.attrs[this.attrName];\n        })\n            .filter(Boolean);\n        return colors;\n    }\n    remove() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return removeMark(type)(state, dispatch);\n        };\n    }\n    canExecute(state) {\n        const attrs = this.name === 'text_color' ? { color: '' } : { backgroundColor: '' };\n        return this.apply(attrs)(state);\n    }\n};\n\nconst SAFE_MARKS = ['link'];\nclass FormatClear {\n    insert() {\n        return (state, dispatch) => {\n            const { tr } = state;\n            const { ranges, empty } = tr.selection;\n            if (empty) {\n                return true;\n            }\n            Object.entries(state.schema.marks).forEach(([markType, mark]) => {\n                if (SAFE_MARKS.includes(markType)) {\n                    return;\n                }\n                ranges.forEach((range) => {\n                    tr.removeMark(range.$from.pos, range.$to.pos, mark);\n                });\n            });\n            dispatch(tr);\n            return true;\n        };\n    }\n    canExecute() {\n        return true;\n    }\n}\n\nconst indentNodeTypes = ['paragraph', 'heading', 'blockquote'];\nconst minIndent = 0;\nconst maxIndent = 10;\nconst udpateIndentLevel = (tr, pos, method) => {\n    const node = tr.doc.nodeAt(pos);\n    if (!node) {\n        return false;\n    }\n    const nodeIndent = node.attrs['indent'] ?? 0;\n    const newIndent = clamp(nodeIndent + (method === 'increase' ? 1 : -1), minIndent, maxIndent);\n    if (newIndent === nodeIndent || newIndent < minIndent || newIndent > maxIndent) {\n        return false;\n    }\n    const attrs = {\n        ...node.attrs,\n        indent: newIndent,\n    };\n    tr.setNodeMarkup(pos, node.type, attrs);\n    return true;\n};\nclass Indent {\n    method = 'increase';\n    constructor(method) {\n        this.method = method;\n    }\n    insert() {\n        return (state, dispatch) => {\n            const { tr, doc } = state;\n            const { from, to } = tr.selection;\n            let applicable = false;\n            doc.nodesBetween(from, to, (node, pos) => {\n                const nodeType = node.type;\n                if (indentNodeTypes.includes(nodeType.name)) {\n                    applicable = udpateIndentLevel(tr, pos, this.method);\n                    return false;\n                }\n                else if (node.type.name.includes('list')) {\n                    return false;\n                }\n                return true;\n            });\n            if (!applicable) {\n                return false;\n            }\n            if (tr.docChanged) {\n                dispatch?.(tr);\n            }\n            return true;\n        };\n    }\n    canExecute(state) {\n        return this.insert()(state);\n    }\n}\n\nclass History {\n    mode = 'undo';\n    constructor(mode) {\n        this.mode = mode;\n    }\n    insert() {\n        return (state, dispatch) => {\n            if (this.mode === 'undo') {\n                return undo$1(state, dispatch);\n            }\n            return redo$1(state, dispatch);\n        };\n    }\n    canExecute(state) {\n        return this.insert()(state);\n    }\n}\n\nconst STRONG = new Mark('strong');\nconst EM = new Mark('em');\nconst CODE = new Mark('code');\nconst UNDERLINE = new Mark('u');\nconst STRIKE = new Mark('s');\nconst BLOCKQUOTE = new Blockqote();\nconst HORIZONTAL_RULE = new HorizontalRule();\nconst FORMAT_CLEAR = new FormatClear();\nconst UL = new ListItem(true);\nconst OL = new ListItem(false);\nconst H1 = new Heading(1);\nconst H2 = new Heading(2);\nconst H3 = new Heading(3);\nconst H4 = new Heading(4);\nconst H5 = new Heading(5);\nconst H6 = new Heading(6);\nconst ALIGN_LEFT = new TextAlign('left');\nconst ALIGN_CENTER = new TextAlign('center');\nconst ALIGN_RIGHT = new TextAlign('right');\nconst ALIGN_JUSTIFY = new TextAlign('justify');\nconst LINK = new Link$1();\nconst IMAGE = new Image$1();\nconst TEXT_COLOR = new TextColor$1('text_color', 'color');\nconst TEXT_BACKGROUND_COLOR = new TextColor$1('text_background_color', 'backgroundColor');\nconst INDENT = new Indent('increase');\nconst OUTDENT = new Indent('decrease');\nconst SUPERSCRIPT = new Mark('sup');\nconst SUBSCRIPT = new Mark('sub');\nconst UNDO = new History('undo');\nconst REDO = new History('redo');\n\nconst ToggleCommands = {\n    bold: STRONG,\n    italic: EM,\n    code: CODE,\n    underline: UNDERLINE,\n    strike: STRIKE,\n    blockquote: BLOCKQUOTE,\n    bullet_list: UL,\n    ordered_list: OL,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    align_left: ALIGN_LEFT,\n    align_center: ALIGN_CENTER,\n    align_right: ALIGN_RIGHT,\n    align_justify: ALIGN_JUSTIFY,\n    superscript: SUPERSCRIPT,\n    subscript: SUBSCRIPT,\n};\nconst InsertCommands = {\n    horizontal_rule: HORIZONTAL_RULE,\n    format_clear: FORMAT_CLEAR,\n    indent: INDENT,\n    outdent: OUTDENT,\n    undo: UNDO,\n    redo: REDO,\n};\nconst Link = LINK;\nconst Image = IMAGE;\nconst TextColor = TEXT_COLOR;\nconst TextBackgroundColor = TEXT_BACKGROUND_COLOR;\n\nconst defaults = {\n    // menu\n    bold: 'Bold',\n    italic: 'Italic',\n    code: 'Code',\n    underline: 'Underline',\n    strike: 'Strike',\n    blockquote: 'Blockquote',\n    bullet_list: 'Bullet List',\n    ordered_list: 'Ordered List',\n    heading: 'Heading',\n    h1: 'Header 1',\n    h2: 'Header 2',\n    h3: 'Header 3',\n    h4: 'Header 4',\n    h5: 'Header 5',\n    h6: 'Header 6',\n    align_left: 'Left Align',\n    align_center: 'Center Align',\n    align_right: 'Right Align',\n    align_justify: 'Justify',\n    text_color: 'Text Color',\n    background_color: 'Background Color',\n    horizontal_rule: 'Horizontal rule',\n    format_clear: 'Clear Formatting',\n    insertLink: 'Insert Link',\n    removeLink: 'Remove Link',\n    insertImage: 'Insert Image',\n    indent: 'Increase Indent',\n    outdent: 'Decrease Indent',\n    superscript: 'Superscript',\n    subscript: 'Subscript',\n    undo: 'Undo',\n    redo: 'Redo',\n    // pupups, forms, others...\n    url: 'URL',\n    text: 'Text',\n    openInNewTab: 'Open in new tab',\n    insert: 'Insert',\n    altText: 'Alt Text',\n    title: 'Title',\n    remove: 'Remove',\n    enterValidUrl: 'Please enter a valid URL',\n};\nclass Locals {\n    locals = defaults;\n    constructor(newLocals = {}) {\n        this.locals = { ...defaults, ...newLocals };\n    }\n    get = (key) => {\n        const value = this.locals[key];\n        if (value) {\n            return isObservable(value) ? value : of(value);\n        }\n        return of('');\n    };\n}\n\nvar bold = `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\n\nvar italic = `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\n\nvar code = `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\n\nvar underline = `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\n\nvar strike = `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\n\nvar orderedList = `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\n\nvar bulletList = `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\n\nvar quote = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\n\nvar link = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\n\nvar unlink = `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\n\nvar image = `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\n\nvar alignLeft = `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignCenter = `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignRight = `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignJustify = `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\n\nvar textColor = `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\n\nvar colorFill = `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\n\nvar horizontalRule = `\n  <g>\n    <rect fill=\"none\" fill-rule=\"evenodd\" height=\"24\" width=\"24\"/>\n    <rect fill-rule=\"evenodd\" height=\"2\" width=\"16\" x=\"4\" y=\"11\"/>\n  </g>\n`;\n\nvar formatClear = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z\"/>\n`;\n\nvar indent = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z\"/>';\n\nvar outdent = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z\"/>';\n\nvar superscript = '<g><rect fill=\"none\" height=\"20\" width=\"20\"/><path d=\"M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z\"/></g>';\n\nvar subscript = '<g><rect fill=\"none\" height=\"20\" width=\"20\"/><path d=\"M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z\"/></g>';\n\nvar undo = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>';\n\nvar redo = '<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>';\n\n/* eslint-disable @typescript-eslint/naming-convention */\n// Icons source: https://material.io/\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\nconst DEFAULT_ICON_FILL = 'currentColor';\nconst icons = {\n    bold,\n    italic,\n    code,\n    underline,\n    strike,\n    ordered_list: orderedList,\n    bullet_list: bulletList,\n    blockquote: quote,\n    link,\n    unlink,\n    image,\n    align_left: alignLeft,\n    align_center: alignCenter,\n    align_right: alignRight,\n    align_justify: alignJustify,\n    text_color: textColor,\n    color_fill: colorFill,\n    horizontal_rule: horizontalRule,\n    format_clear: formatClear,\n    indent,\n    outdent,\n    superscript,\n    subscript,\n    undo,\n    redo,\n    path: '<path></path>',\n};\nclass Icon {\n    static get(name, fill = DEFAULT_ICON_FILL) {\n        const fullPath = icons[name];\n        if (fullPath && (fullPath.includes('<path') || fullPath.includes('<g'))) {\n            return `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill=${fill}\n          height=${DEFAULT_ICON_HEIGHT}\n          width=${DEFAULT_ICON_WIDTH}\n        >\n          ${fullPath}\n        </svg>\n      `;\n        }\n        return fullPath;\n    }\n}\n\nclass NgxEditorServiceConfig {\n    locals = {};\n    icons = {};\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorServiceConfig, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorServiceConfig, providedIn: 'root' });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorServiceConfig, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }] });\n\nclass NgxEditorService {\n    config;\n    constructor(config) {\n        this.config = config;\n    }\n    get locals() {\n        return new Locals(this.config.locals);\n    }\n    getIcon(icon) {\n        return this.config.icons[icon] ? this.config.icons[icon] : Icon.get(icon);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorService, deps: [{ token: NgxEditorServiceConfig, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorService, providedIn: 'root' });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: () => [{ type: NgxEditorServiceConfig, decorators: [{\n                    type: Optional\n                }] }] });\nconst provideMyServiceOptions = (config) => {\n    return {\n        locals: config.locals ?? {},\n        icons: config.icons ?? {},\n    };\n};\n\nclass SanitizeHtmlPipe {\n    sanitizer;\n    constructor(sanitizer) {\n        this.sanitizer = sanitizer;\n    }\n    transform(value) {\n        if (isTrustedHtml(value)) {\n            return value;\n        }\n        return this.sanitizer.bypassSecurityTrustHtml(value);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: SanitizeHtmlPipe, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Pipe });\n    static ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"14.0.0\", version: \"18.2.2\", ngImport: i0, type: SanitizeHtmlPipe, name: \"sanitizeHtml\" });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: SanitizeHtmlPipe, decorators: [{\n            type: Pipe,\n            args: [{\n                    name: 'sanitizeHtml',\n                }]\n        }], ctorParameters: () => [{ type: i1.DomSanitizer }] });\n\nclass ToggleCommandComponent {\n    ngxeService;\n    menuService;\n    toolbarItem;\n    get name() {\n        return this.toolbarItem;\n    }\n    html;\n    editorView;\n    isActive = false;\n    disabled = false;\n    updateSubscription;\n    constructor(ngxeService, menuService) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n    }\n    toggle() {\n        const { state, dispatch } = this.editorView;\n        const command = ToggleCommands[this.name];\n        command.toggle()(state, dispatch);\n    }\n    onMouseClick(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.toggle();\n    }\n    onKeydown() {\n        this.toggle();\n    }\n    update = (view) => {\n        const { state } = view;\n        const command = ToggleCommands[this.name];\n        this.isActive = command.isActive(state);\n        this.disabled = !command.canExecute(state);\n    };\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    ngOnInit() {\n        this.html = this.ngxeService.getIcon(this.name);\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ToggleCommandComponent, deps: [{ token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: ToggleCommandComponent, selector: \"ngx-toggle-command\", inputs: { toolbarItem: \"toolbarItem\" }, ngImport: i0, template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"onMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onKeydown()\\\"\\n  (keydown.space)=\\\"onKeydown()\\\"\\n  [title]=\\\"getTitle(name) | async\\\"\\n  [ariaLabel]=\\\"getTitle(name) | async\\\"\\n></button>\\n\", styles: [\"\"], dependencies: [{ kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: SanitizeHtmlPipe, name: \"sanitizeHtml\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ToggleCommandComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-toggle-command', template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"onMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onKeydown()\\\"\\n  (keydown.space)=\\\"onKeydown()\\\"\\n  [title]=\\\"getTitle(name) | async\\\"\\n  [ariaLabel]=\\\"getTitle(name) | async\\\"\\n></button>\\n\" }]\n        }], ctorParameters: () => [{ type: NgxEditorService }, { type: MenuService }], propDecorators: { toolbarItem: [{\n                type: Input\n            }] } });\n\nclass InsertCommandComponent {\n    ngxeService;\n    menuService;\n    toolbarItem;\n    get name() {\n        return this.toolbarItem;\n    }\n    html;\n    editorView;\n    disabled = false;\n    updateSubscription;\n    constructor(ngxeService, menuService) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n    }\n    onMouseClick(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.insert();\n    }\n    onKeydown() {\n        this.insert();\n    }\n    insert() {\n        const { state, dispatch } = this.editorView;\n        const command = InsertCommands[this.name];\n        command.insert()(state, dispatch);\n    }\n    update = (view) => {\n        const { state } = view;\n        const command = InsertCommands[this.name];\n        this.disabled = !command.canExecute(state);\n    };\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    ngOnInit() {\n        this.html = this.ngxeService.getIcon(this.name);\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: InsertCommandComponent, deps: [{ token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: InsertCommandComponent, selector: \"ngx-insert-command\", inputs: { toolbarItem: \"toolbarItem\" }, ngImport: i0, template: \"<button\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\"\\n  [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"onMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onKeydown()\\\"\\n  (keydown.space)=\\\"onKeydown()\\\"\\n  [title]=\\\"getTitle(name) | async\\\"\\n  [ariaLabel]=\\\"getTitle(name) | async\\\"\\n></button>\\n\", styles: [\"\"], dependencies: [{ kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: SanitizeHtmlPipe, name: \"sanitizeHtml\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: InsertCommandComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-insert-command', template: \"<button\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [disabled]=\\\"disabled\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\"\\n  [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"onMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onKeydown()\\\"\\n  (keydown.space)=\\\"onKeydown()\\\"\\n  [title]=\\\"getTitle(name) | async\\\"\\n  [ariaLabel]=\\\"getTitle(name) | async\\\"\\n></button>\\n\" }]\n        }], ctorParameters: () => [{ type: NgxEditorService }, { type: MenuService }], propDecorators: { toolbarItem: [{\n                type: Input\n            }] } });\n\nconst DEFAULT_LINK_OPTIONS = {\n    showOpenInNewTab: true,\n};\nclass LinkComponent {\n    el;\n    ngxeService;\n    menuService;\n    options = DEFAULT_LINK_OPTIONS;\n    showPopup = false;\n    isActive = false;\n    canExecute = true;\n    componentId = uniq();\n    form;\n    editorView;\n    updateSubscription;\n    constructor(el, ngxeService, menuService) {\n        this.el = el;\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n    }\n    get icon() {\n        return this.ngxeService.getIcon(this.isActive ? 'unlink' : 'link');\n    }\n    get title() {\n        return this.ngxeService.locals.get(this.isActive ? 'removeLink' : 'insertLink');\n    }\n    get href() {\n        return this.form.get('href');\n    }\n    get text() {\n        return this.form.get('text');\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hidePopup();\n        }\n    }\n    getId(name) {\n        return `${name}-${this.componentId}`;\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    hidePopup() {\n        this.showPopup = false;\n        this.form.reset({\n            href: '',\n            text: '',\n            openInNewTab: true,\n        });\n        this.text.enable();\n    }\n    togglePopup() {\n        const { state, dispatch } = this.editorView;\n        if (this.isActive) {\n            Link.remove(state, dispatch);\n            return;\n        }\n        this.showPopup = !this.showPopup;\n        if (this.showPopup) {\n            this.setText();\n        }\n    }\n    onTogglePopupMouseClick(e) {\n        if (e.button !== 0) {\n            return;\n        }\n        this.togglePopup();\n    }\n    onTogglePopupKeydown() {\n        this.togglePopup();\n    }\n    setText = () => {\n        const { state: { selection, doc } } = this.editorView;\n        const { empty, from, to } = selection;\n        const selectedText = !empty ? doc.textBetween(from, to) : '';\n        if (selectedText) {\n            this.text.patchValue(selectedText);\n            this.text.disable();\n        }\n    };\n    update = (view) => {\n        const { state } = view;\n        this.isActive = Link.isActive(state, { strict: false });\n        this.canExecute = Link.canExecute(state);\n    };\n    insertLink(e) {\n        e.preventDefault();\n        const { text, href, openInNewTab } = this.form.getRawValue();\n        const { dispatch, state } = this.editorView;\n        const { selection } = state;\n        let target;\n        if (this.options.showOpenInNewTab) {\n            target = openInNewTab ? '_blank' : '_self';\n        }\n        const attrs = {\n            title: href,\n            href,\n            target,\n        };\n        if (selection.empty) {\n            Link.insert(text, attrs)(state, dispatch);\n            this.editorView.focus();\n        }\n        else {\n            Link.update(attrs)(state, dispatch);\n        }\n        this.hidePopup();\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.form = new FormGroup({\n            href: new FormControl('', [\n                Validators$1.required,\n                Validators$1.pattern(this.menuService.editor.linkValidationPattern),\n            ]),\n            text: new FormControl('', [Validators$1.required]),\n            openInNewTab: new FormControl(true),\n        });\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: LinkComponent, deps: [{ token: i0.ElementRef }, { token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"16.1.0\", version: \"18.2.2\", type: LinkComponent, selector: \"ngx-link\", inputs: { options: [\"options\", \"options\", (value) => ({ ...DEFAULT_LINK_OPTIONS, ...value })] }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" } }, ngImport: i0, template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\"\\n  [disabled]=\\\"!canExecute\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"title | async\\\"\\n  [ariaLabel]=\\\"title | async\\\"\\n  aria-haspopup=\\\"dialog\\\"\\n  [ariaExpanded]=\\\"showPopup\\\"\\n></button>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('link-popup-url')\\\">{{ getLabel('url') | async }}</label>\\n        <input type=\\\"url\\\" [id]=\\\"getId('link-popup-url')\\\" formControlName=\\\"href\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && getLabel('enterValidUrl') | async }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('link-popup-label')\\\">{{\\n          getLabel('text') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('link-popup-label')\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\" *ngIf=\\\"this.options.showOpenInNewTab\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{ getLabel('openInNewTab') | async }}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{ getLabel('insert') | async }}</button>\\n  </form>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i4.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { kind: \"directive\", type: i4.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { kind: \"directive\", type: i4.CheckboxControlValueAccessor, selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\" }, { kind: \"directive\", type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { kind: \"directive\", type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { kind: \"directive\", type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { kind: \"directive\", type: i4.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }, { kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: SanitizeHtmlPipe, name: \"sanitizeHtml\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: LinkComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-link', template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\"\\n  [disabled]=\\\"!canExecute\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"title | async\\\"\\n  [ariaLabel]=\\\"title | async\\\"\\n  aria-haspopup=\\\"dialog\\\"\\n  [ariaExpanded]=\\\"showPopup\\\"\\n></button>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('link-popup-url')\\\">{{ getLabel('url') | async }}</label>\\n        <input type=\\\"url\\\" [id]=\\\"getId('link-popup-url')\\\" formControlName=\\\"href\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && getLabel('enterValidUrl') | async }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('link-popup-label')\\\">{{\\n          getLabel('text') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('link-popup-label')\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\" *ngIf=\\\"this.options.showOpenInNewTab\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{ getLabel('openInNewTab') | async }}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{ getLabel('insert') | async }}</button>\\n  </form>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: NgxEditorService }, { type: MenuService }], propDecorators: { options: [{\n                type: Input,\n                args: [{\n                        transform: (value) => ({ ...DEFAULT_LINK_OPTIONS, ...value }),\n                    }]\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nclass DropdownComponent {\n    ngxeService;\n    menuService;\n    el;\n    editorView;\n    updateSubscription;\n    group;\n    items;\n    isDropdownOpen = false;\n    disabledItems = [];\n    activeItem;\n    constructor(ngxeService, menuService, el) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.el = el;\n    }\n    get isSelected() {\n        return Boolean(this.activeItem || this.isDropdownOpen);\n    }\n    get isDropdownDisabled() {\n        return this.disabledItems.length === this.items.length;\n    }\n    onDocumentClick(target) {\n        if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n            this.isDropdownOpen = false;\n        }\n    }\n    getName(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    getIsDropdownActive(item) {\n        return this.activeItem === item;\n    }\n    toggleDropdown() {\n        this.isDropdownOpen = !this.isDropdownOpen;\n    }\n    onToggleDropdownMouseClick(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.toggleDropdown();\n    }\n    onToggleDropdownKeydown() {\n        this.toggleDropdown();\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    selectItem(item) {\n        const command = ToggleCommands[item];\n        const { state, dispatch } = this.editorView;\n        command.toggle()(state, dispatch);\n        this.isDropdownOpen = false;\n    }\n    onDropdownItemMouseClick(e, item) {\n        e.preventDefault();\n        // consider only left click\n        if (e.button !== 0) {\n            return;\n        }\n        this.selectItem(item);\n    }\n    onDropdownItemKeydown(event, item) {\n        const e = event;\n        e.preventDefault();\n        this.selectItem(item);\n    }\n    update = (view) => {\n        const { state } = view;\n        this.disabledItems = [];\n        const activeItems = [];\n        this.items.forEach((item) => {\n            const command = ToggleCommands[item];\n            const isActive = command.isActive(state);\n            if (isActive) {\n                activeItems.push(item);\n            }\n            if (!command.canExecute(state)) {\n                this.disabledItems.push(item);\n            }\n        });\n        if (activeItems.length === 1) {\n            [this.activeItem] = activeItems;\n        }\n        else {\n            this.activeItem = null;\n        }\n    };\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: DropdownComponent, deps: [{ token: NgxEditorService }, { token: MenuService }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: DropdownComponent, selector: \"ngx-dropdown\", inputs: { group: \"group\", items: \"items\" }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event.target)\" } }, ngImport: i0, template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__Dropdown--Text\\\"\\n  [class.NgxEditor__Dropdown--Selected]=\\\"isSelected\\\"\\n  [disabled]=\\\"isDropdownDisabled\\\"\\n  [class.NgxEditor--Disabled]=\\\"isDropdownDisabled\\\"\\n  (mousedown)=\\\"onToggleDropdownMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onToggleDropdownKeydown()\\\"\\n  (keydown.space)=\\\"onToggleDropdownKeydown()\\\"\\n  [ariaLabel]=\\\"getName(activeItem || group) | async\\\"\\n  aria-haspopup=\\\"listbox\\\"\\n  [ariaExpanded]=\\\"isDropdownOpen\\\"\\n>\\n  {{ getName(activeItem || group) | async }}\\n</button>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\" role=\\\"listbox\\\">\\n  <button\\n    type=\\\"button\\\"\\n    class=\\\"NgxEditor__Dropdown--Item\\\"\\n    *ngFor=\\\"let item of items; trackBy: trackByIndex\\\"\\n    (mousedown)=\\\"onDropdownItemMouseClick($event, item)\\\"\\n    (keydown.enter)=\\\"onDropdownItemKeydown($event, item)\\\"\\n    (keydown.space)=\\\"onDropdownItemKeydown($event, item)\\\"\\n    [ngClass]=\\\"{\\n      'NgxEditor__Dropdown--Active': item === activeItem,\\n      'NgxEditor--Disabled': disabledItems.includes(item)\\n    }\\\"\\n    [ariaLabel]=\\\"getName(item) | async\\\"\\n    role=\\\"option\\\"\\n    [attr.aria-selected]=\\\"item === activeItem\\\"\\n  >\\n    {{ getName(item) | async }}\\n  </button>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: DropdownComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-dropdown', template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__Dropdown--Text\\\"\\n  [class.NgxEditor__Dropdown--Selected]=\\\"isSelected\\\"\\n  [disabled]=\\\"isDropdownDisabled\\\"\\n  [class.NgxEditor--Disabled]=\\\"isDropdownDisabled\\\"\\n  (mousedown)=\\\"onToggleDropdownMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onToggleDropdownKeydown()\\\"\\n  (keydown.space)=\\\"onToggleDropdownKeydown()\\\"\\n  [ariaLabel]=\\\"getName(activeItem || group) | async\\\"\\n  aria-haspopup=\\\"listbox\\\"\\n  [ariaExpanded]=\\\"isDropdownOpen\\\"\\n>\\n  {{ getName(activeItem || group) | async }}\\n</button>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\" role=\\\"listbox\\\">\\n  <button\\n    type=\\\"button\\\"\\n    class=\\\"NgxEditor__Dropdown--Item\\\"\\n    *ngFor=\\\"let item of items; trackBy: trackByIndex\\\"\\n    (mousedown)=\\\"onDropdownItemMouseClick($event, item)\\\"\\n    (keydown.enter)=\\\"onDropdownItemKeydown($event, item)\\\"\\n    (keydown.space)=\\\"onDropdownItemKeydown($event, item)\\\"\\n    [ngClass]=\\\"{\\n      'NgxEditor__Dropdown--Active': item === activeItem,\\n      'NgxEditor--Disabled': disabledItems.includes(item)\\n    }\\\"\\n    [ariaLabel]=\\\"getName(item) | async\\\"\\n    role=\\\"option\\\"\\n    [attr.aria-selected]=\\\"item === activeItem\\\"\\n  >\\n    {{ getName(item) | async }}\\n  </button>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: NgxEditorService }, { type: MenuService }, { type: i0.ElementRef }], propDecorators: { group: [{\n                type: Input\n            }], items: [{\n                type: Input\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event.target']]\n            }] } });\n\nclass ImageComponent {\n    el;\n    ngxeService;\n    menuService;\n    showPopup = false;\n    isActive = false;\n    componentId = uniq();\n    updateSubscription;\n    form = new FormGroup({\n        src: new FormControl('', [\n            Validators$1.required,\n            Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)'),\n        ]),\n        alt: new FormControl(''),\n        title: new FormControl(''),\n    });\n    editorView;\n    constructor(el, ngxeService, menuService) {\n        this.el = el;\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n    }\n    get icon() {\n        return this.ngxeService.getIcon('image');\n    }\n    get src() {\n        return this.form.get('src');\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hideForm();\n        }\n    }\n    getId(name) {\n        return `${name}-${this.componentId}`;\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    hideForm() {\n        this.showPopup = false;\n        this.form.reset({\n            src: '',\n            alt: '',\n            title: '',\n        });\n    }\n    togglePopup() {\n        this.showPopup = !this.showPopup;\n        if (this.showPopup) {\n            this.fillForm();\n        }\n    }\n    onTogglePopupMouseClick(e) {\n        if (e.button !== 0) {\n            return;\n        }\n        this.togglePopup();\n    }\n    onTogglePopupKeydown() {\n        this.togglePopup();\n    }\n    fillForm() {\n        const { state } = this.editorView;\n        const { selection } = state;\n        if (selection instanceof NodeSelection && this.isActive) {\n            const { src, alt = '', title = '' } = selection.node.attrs;\n            this.form.setValue({\n                src,\n                alt,\n                title,\n            });\n        }\n    }\n    update = (view) => {\n        const { state } = view;\n        this.isActive = Image.isActive(state);\n    };\n    insertLink(e) {\n        e.preventDefault();\n        const { src, alt, title } = this.form.getRawValue();\n        const { dispatch, state } = this.editorView;\n        const attrs = {\n            alt,\n            title,\n        };\n        Image.insert(src, attrs)(state, dispatch);\n        this.editorView.focus();\n        this.hideForm();\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ImageComponent, deps: [{ token: i0.ElementRef }, { token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: ImageComponent, selector: \"ngx-image\", host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" } }, ngImport: i0, template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"getLabel('insertImage') | async\\\"\\n  [ariaLabel]=\\\"getLabel('insertImage') | async\\\"\\n  aria-haspopup=\\\"dialog\\\"\\n  [ariaExpanded]=\\\"showPopup\\\"\\n></button>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-url')\\\">{{\\n          getLabel('url') | async\\n        }}</label>\\n        <input type=\\\"url\\\" [id]=\\\"getId('image-popup-url')\\\" formControlName=\\\"src\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && getLabel('enterValidUrl') | async }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-label')\\\">{{\\n          getLabel('altText') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('image-popup-label')\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-title')\\\">{{\\n          getLabel('title') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('image-popup-title')\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{ getLabel('insert') | async }}</button>\\n  </form>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i4.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { kind: \"directive\", type: i4.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { kind: \"directive\", type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { kind: \"directive\", type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { kind: \"directive\", type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { kind: \"directive\", type: i4.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }, { kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: SanitizeHtmlPipe, name: \"sanitizeHtml\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ImageComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-image', template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"getLabel('insertImage') | async\\\"\\n  [ariaLabel]=\\\"getLabel('insertImage') | async\\\"\\n  aria-haspopup=\\\"dialog\\\"\\n  [ariaExpanded]=\\\"showPopup\\\"\\n></button>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-url')\\\">{{\\n          getLabel('url') | async\\n        }}</label>\\n        <input type=\\\"url\\\" [id]=\\\"getId('image-popup-url')\\\" formControlName=\\\"src\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && getLabel('enterValidUrl') | async }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-label')\\\">{{\\n          getLabel('altText') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('image-popup-label')\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\" [htmlFor]=\\\"getId('image-popup-title')\\\">{{\\n          getLabel('title') | async\\n        }}</label>\\n        <input type=\\\"text\\\" [id]=\\\"getId('image-popup-title')\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{ getLabel('insert') | async }}</button>\\n  </form>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: NgxEditorService }, { type: MenuService }], propDecorators: { onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nclass ColorPickerComponent {\n    el;\n    menuService;\n    ngxeService;\n    presets;\n    type;\n    constructor(el, menuService, ngxeService) {\n        this.el = el;\n        this.menuService = menuService;\n        this.ngxeService = ngxeService;\n    }\n    get title() {\n        return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n    }\n    get icon() {\n        return this.ngxeService.getIcon(this.type === 'text_color' ? 'text_color' : 'color_fill');\n    }\n    get command() {\n        return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n    }\n    updateSubscription;\n    editorView;\n    showPopup = false;\n    isActive = false;\n    activeColors = [];\n    canExecute = true;\n    getContrastYIQ(hexcolor) {\n        const color = hexcolor.replace('#', '');\n        const r = parseInt(color.substring(0, 2), 16);\n        const g = parseInt(color.substring(2, 4), 16);\n        const b = parseInt(color.substring(4, 6), 16);\n        const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n        return yiq >= 128 ? 'black' : 'white';\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hidePopup();\n        }\n    }\n    hidePopup() {\n        this.showPopup = false;\n    }\n    togglePopup() {\n        this.showPopup = !this.showPopup;\n    }\n    onTogglePopupMouseClick(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.togglePopup();\n    }\n    onTogglePopupKeydown() {\n        this.togglePopup();\n    }\n    remove() {\n        const { state, dispatch } = this.editorView;\n        this.command.remove()(state, dispatch);\n        this.hidePopup();\n    }\n    onRemoveMouseClick(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        e.preventDefault();\n        this.remove();\n    }\n    onRemoveKeydown() {\n        this.remove();\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    selectColor(color) {\n        const { state, dispatch } = this.editorView;\n        if (this.type === 'text_color') {\n            const attrs = { color };\n            this.command.apply(attrs)(state, dispatch);\n        }\n        else {\n            const attrs = { backgroundColor: color };\n            this.command.apply(attrs)(state, dispatch);\n        }\n        if (!this.editorView.hasFocus()) {\n            this.editorView.focus();\n        }\n        this.hidePopup();\n    }\n    onColorSelectMouseClick(e, color) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.selectColor(color);\n    }\n    onColorSelectKeydown(color) {\n        this.selectColor(color);\n    }\n    update = (view) => {\n        const { state } = view;\n        this.canExecute = this.command.canExecute(state);\n        this.isActive = this.command.isActive(state);\n        this.activeColors = [];\n        if (this.isActive) {\n            this.activeColors = this.command.getActiveColors(state);\n        }\n    };\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ColorPickerComponent, deps: [{ token: i0.ElementRef }, { token: MenuService }, { token: NgxEditorService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: ColorPickerComponent, selector: \"ngx-color-picker\", inputs: { presets: \"presets\", type: \"type\" }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" } }, ngImport: i0, template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\"\\n  [disabled]=\\\"!canExecute\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"title | async\\\"\\n  [ariaLabel]=\\\"title | async\\\"\\n></button>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets; trackBy: trackByIndex\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button\\n      class=\\\"NgxEditor__Color\\\"\\n      *ngFor=\\\"let color of colorGroup; trackBy: trackByIndex\\\"\\n      [ngStyle]=\\\"{ backgroundColor: color, color: getContrastYIQ(color) }\\\"\\n      [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelectMouseClick($event, color)\\\"\\n      (keydown.enter)=\\\"onColorSelectKeydown(color)\\\"\\n      (keydown.space)=\\\"onColorSelectKeydown(color)\\\"\\n      [ngClass]=\\\"{ 'NgxEditor__Color--Active': activeColors.includes(color) }\\\"\\n    ></button>\\n  </div>\\n\\n  <button\\n    class=\\\"NgxEditor__MenuItem--Button\\\"\\n    (mousedown)=\\\"onRemoveMouseClick($event)\\\"\\n    (keydown.enter)=\\\"onRemoveKeydown()\\\"\\n    (keydown.space)=\\\"onRemoveKeydown()\\\"\\n    [disabled]=\\\"!isActive\\\"\\n  >\\n    {{ getLabel('remove') | async }}\\n  </button>\\n</div>\\n\", styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }, { kind: \"pipe\", type: SanitizeHtmlPipe, name: \"sanitizeHtml\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: ColorPickerComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-color-picker', template: \"<button\\n  type=\\\"button\\\"\\n  class=\\\"NgxEditor__MenuItem--Icon\\\"\\n  [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\"\\n  [disabled]=\\\"!canExecute\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\"\\n  (mousedown)=\\\"onTogglePopupMouseClick($event)\\\"\\n  (keydown.enter)=\\\"onTogglePopupKeydown()\\\"\\n  (keydown.space)=\\\"onTogglePopupKeydown()\\\"\\n  [title]=\\\"title | async\\\"\\n  [ariaLabel]=\\\"title | async\\\"\\n></button>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets; trackBy: trackByIndex\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button\\n      class=\\\"NgxEditor__Color\\\"\\n      *ngFor=\\\"let color of colorGroup; trackBy: trackByIndex\\\"\\n      [ngStyle]=\\\"{ backgroundColor: color, color: getContrastYIQ(color) }\\\"\\n      [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelectMouseClick($event, color)\\\"\\n      (keydown.enter)=\\\"onColorSelectKeydown(color)\\\"\\n      (keydown.space)=\\\"onColorSelectKeydown(color)\\\"\\n      [ngClass]=\\\"{ 'NgxEditor__Color--Active': activeColors.includes(color) }\\\"\\n    ></button>\\n  </div>\\n\\n  <button\\n    class=\\\"NgxEditor__MenuItem--Button\\\"\\n    (mousedown)=\\\"onRemoveMouseClick($event)\\\"\\n    (keydown.enter)=\\\"onRemoveKeydown()\\\"\\n    (keydown.space)=\\\"onRemoveKeydown()\\\"\\n    [disabled]=\\\"!isActive\\\"\\n  >\\n    {{ getLabel('remove') | async }}\\n  </button>\\n</div>\\n\", styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"] }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: MenuService }, { type: NgxEditorService }], propDecorators: { presets: [{\n                type: Input\n            }], type: [{\n                type: Input\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nconst DEFAULT_TOOLBAR = [\n    ['bold', 'italic'],\n    ['code', 'blockquote'],\n    ['underline', 'strike'],\n    ['ordered_list', 'bullet_list'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n    ['align_left', 'align_center', 'align_right', 'align_justify'],\n    ['format_clear'],\n];\nconst TOOLBAR_MINIMAL = [\n    ['bold', 'italic'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n];\nconst TOOLBAR_FULL = [\n    ['bold', 'italic'],\n    ['code', 'blockquote'],\n    ['underline', 'strike'],\n    ['ordered_list', 'bullet_list'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n    ['align_left', 'align_center', 'align_right', 'align_justify'],\n    ['horizontal_rule', 'format_clear', 'indent', 'outdent'],\n    ['superscript', 'subscript'],\n    ['undo', 'redo'],\n];\nconst DEFAULT_COLOR_PRESETS = [\n    '#b60205',\n    '#d93f0b',\n    '#fbca04',\n    '#0e8a16',\n    '#006b75',\n    '#1d76db',\n    '#0052cc',\n    '#5319e7',\n    '#e99695',\n    '#f9d0c4',\n    '#fef2c0',\n    '#c2e0c6',\n    '#bfdadc',\n    '#c5def5',\n    '#bfd4f2',\n    '#d4c5f9',\n];\nclass MenuComponent {\n    menuService;\n    toolbar = TOOLBAR_MINIMAL;\n    colorPresets = DEFAULT_COLOR_PRESETS;\n    disabled = false;\n    editor;\n    customMenuRef = null;\n    dropdownPlacement = 'bottom';\n    toggleCommands = [\n        'bold',\n        'italic',\n        'underline',\n        'strike',\n        'code',\n        'blockquote',\n        'ordered_list',\n        'bullet_list',\n        'align_left',\n        'align_center',\n        'align_right',\n        'align_justify',\n        'superscript',\n        'subscript',\n    ];\n    insertCommands = [\n        'horizontal_rule',\n        'format_clear',\n        'indent',\n        'outdent',\n        'undo',\n        'redo',\n    ];\n    iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--IconContainer'];\n    dropdownContainerClass = ['NgxEditor__Dropdown'];\n    seperatorClass = ['NgxEditor__Seperator'];\n    constructor(menuService) {\n        this.menuService = menuService;\n    }\n    get presets() {\n        const col = 8;\n        const colors = [];\n        this.colorPresets.forEach((color, index) => {\n            const row = Math.floor(index / col);\n            if (!colors[row]) {\n                colors.push([]);\n            }\n            colors[row].push(color);\n        });\n        return colors;\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    isDropDown(item) {\n        if (item?.heading) {\n            return true;\n        }\n        return false;\n    }\n    getDropdownItems(item) {\n        return item;\n    }\n    isLinkItem(item) {\n        if (item === 'link') {\n            return true;\n        }\n        // NOTE: it is not sufficient to check for a `link` property\n        // as String.prototype.link is a valid (although deprecated) method\n        return typeof item === 'object'\n            && typeof item?.link === 'object';\n    }\n    isLinkWithOptions(item) {\n        // NOTE: it is not sufficient to check for a `link` property\n        // as String.prototype.link is a valid (although deprecated) method\n        return typeof item === 'object'\n            && typeof item?.link === 'object';\n    }\n    getLinkOptions(item) {\n        return item?.link;\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new NgxEditorError('Required editor instance to initialize menu component');\n        }\n        this.menuService.editor = this.editor;\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuComponent, deps: [{ token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: MenuComponent, selector: \"ngx-editor-menu\", inputs: { toolbar: \"toolbar\", colorPresets: \"colorPresets\", disabled: \"disabled\", editor: \"editor\", customMenuRef: \"customMenuRef\", dropdownPlacement: \"dropdownPlacement\" }, providers: [MenuService], ngImport: i0, template: \"<div\\n  class=\\\"NgxEditor__MenuBar\\\"\\n  [ngClass]=\\\"{ 'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top' }\\\"\\n>\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <ngx-insert-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"insertCommands.includes(item)\\\">\\n      </ngx-insert-command>\\n\\n      <!-- link -->\\n      <ng-container *ngIf=\\\"isLinkItem(item)\\\">\\n        <ngx-link [class]=\\\"iconContainerClass\\\" [options]=\\\"getLinkOptions(item)\\\"></ngx-link>\\n      </ng-container>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\"> </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown\\n          *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\\\"\\n          [class]=\\\"dropdownContainerClass\\\"\\n          [group]=\\\"dropdownItem.key\\\"\\n          [items]=\\\"dropdownItem.value\\\"\\n        >\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker\\n        [class]=\\\"iconContainerClass\\\"\\n        *ngIf=\\\"item === 'text_color'\\\"\\n        type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\"\\n      >\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker\\n        [class]=\\\"iconContainerClass\\\"\\n        *ngIf=\\\"item === 'background_color'\\\"\\n        type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\"\\n      >\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n</div>\\n\", styles: [\"\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\", \"ngTemplateOutletInjector\"] }, { kind: \"component\", type: ToggleCommandComponent, selector: \"ngx-toggle-command\", inputs: [\"toolbarItem\"] }, { kind: \"component\", type: InsertCommandComponent, selector: \"ngx-insert-command\", inputs: [\"toolbarItem\"] }, { kind: \"component\", type: LinkComponent, selector: \"ngx-link\", inputs: [\"options\"] }, { kind: \"component\", type: DropdownComponent, selector: \"ngx-dropdown\", inputs: [\"group\", \"items\"] }, { kind: \"component\", type: ImageComponent, selector: \"ngx-image\" }, { kind: \"component\", type: ColorPickerComponent, selector: \"ngx-color-picker\", inputs: [\"presets\", \"type\"] }, { kind: \"pipe\", type: i3.KeyValuePipe, name: \"keyvalue\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor-menu', providers: [MenuService], template: \"<div\\n  class=\\\"NgxEditor__MenuBar\\\"\\n  [ngClass]=\\\"{ 'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top' }\\\"\\n>\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <ngx-insert-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"insertCommands.includes(item)\\\">\\n      </ngx-insert-command>\\n\\n      <!-- link -->\\n      <ng-container *ngIf=\\\"isLinkItem(item)\\\">\\n        <ngx-link [class]=\\\"iconContainerClass\\\" [options]=\\\"getLinkOptions(item)\\\"></ngx-link>\\n      </ng-container>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\"> </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown\\n          *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\\\"\\n          [class]=\\\"dropdownContainerClass\\\"\\n          [group]=\\\"dropdownItem.key\\\"\\n          [items]=\\\"dropdownItem.value\\\"\\n        >\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker\\n        [class]=\\\"iconContainerClass\\\"\\n        *ngIf=\\\"item === 'text_color'\\\"\\n        type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\"\\n      >\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker\\n        [class]=\\\"iconContainerClass\\\"\\n        *ngIf=\\\"item === 'background_color'\\\"\\n        type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\"\\n      >\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n</div>\\n\" }]\n        }], ctorParameters: () => [{ type: MenuService }], propDecorators: { toolbar: [{\n                type: Input\n            }], colorPresets: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }], editor: [{\n                type: Input\n            }], customMenuRef: [{\n                type: Input\n            }], dropdownPlacement: [{\n                type: Input\n            }] } });\n\nclass BubbleComponent {\n    sanitizeHTML;\n    ngxeService;\n    constructor(sanitizeHTML, ngxeService) {\n        this.sanitizeHTML = sanitizeHTML;\n        this.ngxeService = ngxeService;\n    }\n    get view() {\n        return this.editor.view;\n    }\n    editor;\n    updateSubscription;\n    execulableItems = [];\n    activeItems = [];\n    toolbar = [\n        ['bold', 'italic', 'underline', 'strike'],\n        ['ordered_list', 'bullet_list', 'blockquote', 'code'],\n        ['align_left', 'align_center', 'align_right', 'align_justify'],\n    ];\n    toggleCommands = [\n        'bold',\n        'italic',\n        'underline',\n        'strike',\n        'ordered_list',\n        'bullet_list',\n        'blockquote',\n        'code',\n        'align_left',\n        'align_center',\n        'align_right',\n        'align_justify',\n    ];\n    getIcon(name) {\n        return this.sanitizeHTML.transform(this.ngxeService.getIcon(name));\n    }\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    onClick(e, commandName) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.view;\n        const command = ToggleCommands[commandName];\n        command.toggle()(state, dispatch);\n    }\n    update(view) {\n        this.activeItems = [];\n        this.execulableItems = [];\n        const { state } = view;\n        this.toggleCommands.forEach((toolbarItem) => {\n            const command = ToggleCommands[toolbarItem];\n            const isActive = command.isActive(state);\n            if (isActive) {\n                this.activeItems.push(toolbarItem);\n            }\n            const canExecute = command.canExecute(state);\n            if (canExecute) {\n                this.execulableItems.push(toolbarItem);\n            }\n        });\n    }\n    ngOnInit() {\n        this.updateSubscription = this.editor.update\n            .subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: BubbleComponent, deps: [{ token: SanitizeHtmlPipe }, { token: NgxEditorService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: BubbleComponent, selector: \"ngx-bubble\", inputs: { editor: \"editor\" }, ngImport: i0, template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n    <button\\n      type=\\\"button\\\"\\n      class=\\\"NgxBubbleMenu__Icon\\\"\\n      *ngIf=\\\"toggleCommands.includes(item)\\\"\\n      [ngClass]=\\\"{\\n        'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n        'NgxEditor--Disabled': !this.execulableItems.includes(item)\\n      }\\\"\\n      (mousedown)=\\\"onClick($event, item)\\\"\\n      [title]=\\\"getTitle(item) | async\\\"\\n      [innerHTML]=\\\"getIcon(item)\\\"\\n    ></button>\\n    <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;flex-wrap:wrap;background-color:var(--ngx-editor-bubble-bg-color);color:var(--ngx-editor-bubble-text-color);padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;border-radius:var(--ngx-editor-menu-item-border-radius);display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon:hover{background-color:var(--ngx-editor-bubble-item-hover-color)}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:var(--ngx-editor-bubble-text-color);color:var(--ngx-editor-bubble-bg-color)}.NgxBubbleMenu__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"pipe\", type: i3.AsyncPipe, name: \"async\" }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: BubbleComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-bubble', template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n    <button\\n      type=\\\"button\\\"\\n      class=\\\"NgxBubbleMenu__Icon\\\"\\n      *ngIf=\\\"toggleCommands.includes(item)\\\"\\n      [ngClass]=\\\"{\\n        'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n        'NgxEditor--Disabled': !this.execulableItems.includes(item)\\n      }\\\"\\n      (mousedown)=\\\"onClick($event, item)\\\"\\n      [title]=\\\"getTitle(item) | async\\\"\\n      [innerHTML]=\\\"getIcon(item)\\\"\\n    ></button>\\n    <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;flex-wrap:wrap;background-color:var(--ngx-editor-bubble-bg-color);color:var(--ngx-editor-bubble-text-color);padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;border-radius:var(--ngx-editor-menu-item-border-radius);display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon:hover{background-color:var(--ngx-editor-bubble-item-hover-color)}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:var(--ngx-editor-bubble-text-color);color:var(--ngx-editor-bubble-bg-color)}.NgxBubbleMenu__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}\\n\"] }]\n        }], ctorParameters: () => [{ type: SanitizeHtmlPipe }, { type: NgxEditorService }], propDecorators: { editor: [{\n                type: Input\n            }] } });\n\nclass FloatingMenuComponent {\n    el;\n    constructor(el) {\n        this.el = el;\n    }\n    get display() {\n        return {\n            visibility: this.showMenu ? 'visible' : 'hidden',\n            opacity: this.showMenu ? '1' : '0',\n            top: `${this.posTop}px`,\n            left: `${this.posLeft}px`,\n        };\n    }\n    get view() {\n        return this.editor.view;\n    }\n    editor;\n    autoPlace = false;\n    posLeft = 0;\n    posTop = 0;\n    showMenu = false;\n    updateSubscription;\n    dragging = false;\n    resizeSubscription;\n    onMouseDown(e) {\n        const target = e.target;\n        if (this.el.nativeElement.contains(target) && target.nodeName !== 'INPUT') {\n            e.preventDefault();\n            return;\n        }\n        this.dragging = true;\n    }\n    onKeyDown(e) {\n        const target = e.target;\n        if (target.nodeName === 'INPUT') {\n            return;\n        }\n        this.dragging = true;\n        this.hide();\n    }\n    onMouseUp(e) {\n        const target = e.target;\n        if (this.el.nativeElement.contains(target) || target.nodeName === 'INPUT') {\n            e.preventDefault();\n            return;\n        }\n        this.dragging = false;\n        this.useUpdate();\n    }\n    onKeyUp(e) {\n        const target = e.target;\n        if (target.nodeName === 'INPUT') {\n            return;\n        }\n        this.dragging = false;\n        this.useUpdate();\n    }\n    useUpdate() {\n        if (!this.view) {\n            return;\n        }\n        this.update(this.view);\n    }\n    hide() {\n        this.showMenu = false;\n    }\n    show() {\n        this.showMenu = true;\n    }\n    async calculateBubblePosition(view) {\n        const { state: { selection } } = view;\n        const { from, to } = selection;\n        const start = view.coordsAtPos(from);\n        const end = view.coordsAtPos(to);\n        const selectionElement = {\n            getBoundingClientRect() {\n                if (selection instanceof NodeSelection) {\n                    const node = view.nodeDOM(from);\n                    return node.getBoundingClientRect();\n                }\n                const { top, left } = start;\n                const { bottom, right } = end;\n                return {\n                    x: left,\n                    y: top,\n                    top,\n                    bottom,\n                    left,\n                    right,\n                    width: right - left,\n                    height: bottom - top,\n                };\n            },\n        };\n        // the floating bubble itself\n        const bubbleEl = this.el.nativeElement;\n        const { x: left, y: top } = await computePosition(selectionElement, bubbleEl, {\n            placement: 'top',\n            middleware: [\n                offset(5),\n                this.autoPlace && autoPlacement({\n                    boundary: view.dom,\n                    padding: 5,\n                    allowedPlacements: ['top', 'bottom'],\n                }),\n                {\n                    // prevent overflow on right and left side\n                    // since only top and bottom placements are allowed\n                    // autoplacement can't handle overflows on the right and left\n                    name: 'overflowMiddleware',\n                    async fn(middlewareArgs) {\n                        const overflow = await detectOverflow(middlewareArgs, {\n                            boundary: view.dom,\n                            padding: 5,\n                        });\n                        // overflows left\n                        if (overflow.left > 0) {\n                            return {\n                                x: middlewareArgs.x + overflow.left,\n                            };\n                        }\n                        // overflows right\n                        if (overflow.right > 0) {\n                            return {\n                                x: middlewareArgs.x - overflow.right,\n                            };\n                        }\n                        return {};\n                    },\n                },\n            ].filter(Boolean),\n        });\n        return {\n            left,\n            top,\n        };\n    }\n    canShowMenu(view) {\n        const { state } = view;\n        const { selection } = state;\n        const { empty } = selection;\n        if (selection instanceof NodeSelection) {\n            if (selection.node.type.name === 'image') {\n                return false;\n            }\n        }\n        const hasFocus = this.view.hasFocus();\n        if (!hasFocus || empty || this.dragging) {\n            this.hide();\n            return false;\n        }\n        return true;\n    }\n    update(view) {\n        const canShowMenu = this.canShowMenu(view);\n        if (!canShowMenu) {\n            this.hide();\n            return;\n        }\n        this.calculateBubblePosition(this.view).then(({ top, left }) => {\n            if (!this.canShowMenu) {\n                this.hide();\n                return;\n            }\n            this.posLeft = left;\n            this.posTop = top;\n            this.show();\n        });\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new NgxEditorError('Required editor instance to initialize floating menu component');\n        }\n        this.updateSubscription = this.editor.update\n            .subscribe((view) => {\n            this.update(view);\n        });\n        this.resizeSubscription = fromEvent(window, 'resize').pipe(throttleTime(500, asyncScheduler, { leading: true, trailing: true })).subscribe(() => {\n            this.useUpdate();\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n        this.resizeSubscription.unsubscribe();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: FloatingMenuComponent, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"18.2.2\", type: FloatingMenuComponent, selector: \"ngx-editor-floating-menu\", inputs: { editor: \"editor\", autoPlace: \"autoPlace\" }, host: { listeners: { \"document:mousedown\": \"onMouseDown($event)\", \"document:keydown\": \"onKeyDown($event)\", \"document:mouseup\": \"onMouseUp($event)\", \"document:keyup\": \"onKeyUp($event)\" }, properties: { \"style\": \"this.display\" } }, ngImport: i0, template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"component\", type: BubbleComponent, selector: \"ngx-bubble\", inputs: [\"editor\"] }] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: FloatingMenuComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor-floating-menu', template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"] }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }], propDecorators: { display: [{\n                type: HostBinding,\n                args: ['style']\n            }], editor: [{\n                type: Input\n            }], autoPlace: [{\n                type: Input\n            }], onMouseDown: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }], onKeyDown: [{\n                type: HostListener,\n                args: ['document:keydown', ['$event']]\n            }], onMouseUp: [{\n                type: HostListener,\n                args: ['document:mouseup', ['$event']]\n            }], onKeyUp: [{\n                type: HostListener,\n                args: ['document:keyup', ['$event']]\n            }] } });\n\nclass MenuModule {\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuModule, declarations: [\n            // pipes\n            SanitizeHtmlPipe,\n            // components\n            MenuComponent,\n            ToggleCommandComponent,\n            InsertCommandComponent,\n            LinkComponent,\n            DropdownComponent,\n            ImageComponent,\n            ColorPickerComponent,\n            FloatingMenuComponent,\n            BubbleComponent], imports: [CommonModule,\n            ReactiveFormsModule], exports: [MenuComponent,\n            FloatingMenuComponent] });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuModule, providers: [\n            SanitizeHtmlPipe,\n        ], imports: [CommonModule,\n            ReactiveFormsModule] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: MenuModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        ReactiveFormsModule,\n                    ],\n                    declarations: [\n                        // pipes\n                        SanitizeHtmlPipe,\n                        // components\n                        MenuComponent,\n                        ToggleCommandComponent,\n                        InsertCommandComponent,\n                        LinkComponent,\n                        DropdownComponent,\n                        ImageComponent,\n                        ColorPickerComponent,\n                        FloatingMenuComponent,\n                        BubbleComponent,\n                    ],\n                    providers: [\n                        SanitizeHtmlPipe,\n                    ],\n                    exports: [\n                        MenuComponent,\n                        FloatingMenuComponent,\n                    ],\n                }]\n        }] });\n\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken('NgxEditorConfig');\nconst defaultConfig = {\n    locals: defaults,\n    icons,\n};\nclass NgxEditorModule {\n    static forRoot(config = defaultConfig) {\n        return {\n            ngModule: NgxEditorModule,\n            providers: [\n                {\n                    provide: NGX_EDITOR_CONFIG_TOKEN,\n                    useValue: config,\n                },\n                {\n                    provide: NgxEditorServiceConfig,\n                    useFactory: provideMyServiceOptions,\n                    deps: [NGX_EDITOR_CONFIG_TOKEN],\n                },\n            ],\n        };\n    }\n    static forChild(config = defaultConfig) {\n        return {\n            ngModule: NgxEditorModule,\n            providers: [\n                {\n                    provide: NGX_EDITOR_CONFIG_TOKEN,\n                    useValue: config,\n                },\n                {\n                    provide: NgxEditorServiceConfig,\n                    useFactory: provideMyServiceOptions,\n                    deps: [NGX_EDITOR_CONFIG_TOKEN],\n                },\n                NgxEditorService,\n            ],\n        };\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorModule, declarations: [NgxEditorComponent,\n            ImageViewComponent], imports: [CommonModule,\n            MenuModule], exports: [NgxEditorComponent,\n            MenuComponent,\n            FloatingMenuComponent] });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorModule, imports: [CommonModule,\n            MenuModule] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"18.2.2\", ngImport: i0, type: NgxEditorModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        MenuModule,\n                    ],\n                    providers: [],\n                    declarations: [\n                        NgxEditorComponent,\n                        ImageViewComponent,\n                    ],\n                    exports: [\n                        NgxEditorComponent,\n                        MenuComponent,\n                        FloatingMenuComponent,\n                    ],\n                }]\n        }] });\n\nconst isEmptyInputValue = (value) => {\n    // we don't check for string here so it also works with arrays\n    return value === null || value.length === 0;\n};\nconst hasValidLength = (value) => {\n    // non-strict comparison is intentional, to check for both `null` and `undefined` values\n    return value !== null && typeof value.length === 'number';\n};\nconst isDocEmpty = (doc) => {\n    if (!doc) {\n        return true;\n    }\n    const { childCount, firstChild } = doc;\n    return Boolean(childCount === 1 && firstChild?.isTextblock && firstChild.content.size === 0);\n};\n// @dynamic\nclass Validators {\n    static required(userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const isEmpty = isDocEmpty(doc);\n            if (!isEmpty) {\n                return null;\n            }\n            return {\n                required: true,\n            };\n        };\n    }\n    static maxLength(maxLength, userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const value = doc.textContent;\n            if (hasValidLength(value) && value.length > maxLength) {\n                return {\n                    maxlength: {\n                        requiredLength: maxLength,\n                        actualLength: value.length,\n                    },\n                };\n            }\n            return null;\n        };\n    }\n    static minLength(minLength, userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const value = doc.textContent;\n            if (isEmptyInputValue(value) || !hasValidLength(value)) {\n                // don't validate empty values to allow optional controls\n                // don't validate values without `length` property\n                return null;\n            }\n            if (value.length < minLength) {\n                return {\n                    minlength: {\n                        requiredLength: minLength, actualLength: value.length,\n                    },\n                };\n            }\n            return null;\n        };\n    }\n}\n\nconst execMark = (name, toggle = false) => {\n    return (state, dispatch) => {\n        const command = new Mark(name);\n        if (!toggle) {\n            return command.apply()(state, dispatch);\n        }\n        return command.toggle()(state, dispatch);\n    };\n};\nclass EditorCommands {\n    view;\n    state;\n    tr;\n    constructor(view) {\n        if (!view) {\n            throw new NgxEditorError('Required view to initialize commands.');\n        }\n        this.view = view;\n        this.state = view.state;\n        this.tr = this.view.state.tr;\n    }\n    applyTrx = (tr) => {\n        this.state = this.state.apply(tr ?? this.tr);\n        this.tr = this.state.tr;\n        this.tr.setMeta('APPLIED_TRX', true);\n    };\n    dispatch = (tr) => {\n        this.applyTrx(tr);\n    };\n    exec() {\n        // No changes applied\n        if (!this.tr.getMeta('APPLIED_TRX')) {\n            return false;\n        }\n        const forceEmit = !this.view.state.doc.eq(this.state.doc);\n        this.view.updateState(this.state);\n        const tr = this.tr\n            .setMeta('FORCE_EMIT', forceEmit);\n        this.view.dispatch(tr);\n        return true;\n    }\n    focus(position = 'end') {\n        const selection = position === 'start'\n            ? Selection.atStart(this.state.doc)\n            : Selection.atEnd(this.state.doc);\n        this.tr.setSelection(selection);\n        this.applyTrx();\n        this.view.focus();\n        return this;\n    }\n    scrollIntoView() {\n        this.tr.scrollIntoView();\n        this.applyTrx();\n        return this;\n    }\n    insertText(text) {\n        this.tr.insertText(text);\n        this.applyTrx();\n        return this;\n    }\n    insertNewLine() {\n        const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n        chainCommands(...newLineCommands)(this.state, this.dispatch);\n        return this;\n    }\n    applyMark(name) {\n        execMark(name, false)(this.state, this.dispatch);\n        return this;\n    }\n    toggleMark(name) {\n        execMark(name, true)(this.state, this.dispatch);\n        return this;\n    }\n    bold() {\n        execMark('strong')(this.state, this.dispatch);\n        return this;\n    }\n    toggleBold() {\n        execMark('strong', true)(this.state, this.dispatch);\n        return this;\n    }\n    italics() {\n        execMark('em')(this.state, this.dispatch);\n        return this;\n    }\n    toggleItalics() {\n        execMark('em', true)(this.state, this.dispatch);\n        return this;\n    }\n    underline() {\n        execMark('u')(this.state, this.dispatch);\n        return this;\n    }\n    toggleUnderline() {\n        execMark('u', true)(this.state, this.dispatch);\n        return this;\n    }\n    strike() {\n        execMark('s')(this.state, this.dispatch);\n        return this;\n    }\n    toggleStrike() {\n        execMark('s', true)(this.state, this.dispatch);\n        return this;\n    }\n    code() {\n        execMark('code')(this.state, this.dispatch);\n        return this;\n    }\n    toggleCode() {\n        execMark('code', true)(this.state, this.dispatch);\n        return this;\n    }\n    superscript() {\n        execMark('sup')(this.state, this.dispatch);\n        return this;\n    }\n    subscript() {\n        execMark('sub')(this.state, this.dispatch);\n        return this;\n    }\n    toggleOrderedList() {\n        const command = new ListItem(false);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    toggleBulletList() {\n        const command = new ListItem(true);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    toggleHeading(level) {\n        const command = new Heading(level);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    insertLink(text, attrs) {\n        const command = new Link$1();\n        command.insert(text, attrs)(this.state, this.dispatch);\n        return this;\n    }\n    updateLink(attrs) {\n        const command = new Link$1();\n        command.update(attrs)(this.state, this.dispatch);\n        return this;\n    }\n    insertImage(src, attrs = {}) {\n        const command = new Image$1();\n        command.insert(src, attrs)(this.state, this.dispatch);\n        return this;\n    }\n    textColor(color) {\n        const command = new TextColor$1('text_color');\n        command.apply({ color })(this.state, this.dispatch);\n        return this;\n    }\n    backgroundColor(color) {\n        const command = new TextColor$1('text_background_color');\n        command.apply({ backgroundColor: color })(this.state, this.dispatch);\n        return this;\n    }\n    removeTextColor() {\n        const command = new TextColor$1('text_color');\n        command.remove()(this.state, this.dispatch);\n        return this;\n    }\n    removeBackgroundColor() {\n        const command = new TextColor$1('text_background_color');\n        command.remove()(this.state, this.dispatch);\n        return this;\n    }\n    align(p) {\n        const command = new TextAlign(p);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    insertHTML(html) {\n        const { selection, schema, tr } = this.state;\n        const { from, to } = selection;\n        const element = document.createElement('div');\n        element.innerHTML = isString(html) ? html.trim() : html;\n        const slice = DOMParser.fromSchema(schema).parseSlice(element);\n        const transaction = tr.replaceRange(from, to, slice);\n        this.applyTrx(transaction);\n        return this;\n    }\n    indent() {\n        const command = new Indent('increase');\n        command.insert()(this.state, this.dispatch);\n        return this;\n    }\n    outdent() {\n        const command = new Indent('decrease');\n        command.insert()(this.state, this.dispatch);\n        return this;\n    }\n}\n\nconst isMacOs = typeof navigator !== 'undefined'\n    ? (/Mac/).test(navigator.platform)\n    : false;\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = (nodeType) => {\n    return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = (nodeType) => {\n    return wrappingInputRule(/^(?:\\d+)\\.\\s$/, nodeType, (match) => ({ order: Number(match[1]) }), (match, node) => node.childCount + node.attrs['order'] === Number(match[1]));\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = (nodeType) => {\n    return wrappingInputRule(/^\\s*(?:[-+*])\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = (nodeType) => {\n    return textblockTypeInputRule(/^```$/, nodeType);\n};\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType, maxLevel) => {\n    return textblockTypeInputRule(new RegExp(`^(#{1,${maxLevel}})\\\\s$`), nodeType, (match) => ({ level: match[1].length }));\n};\n// : (MarkType) → InputRule\n// Wraps matching text with bold mark\nconst boldRule = (markType) => {\n    // eslint-disable-next-line prefer-named-capture-group\n    return markInputRule(/(?:^|\\s)(?:(\\*\\*|__)(?:([^*_]+))(\\*\\*|__))$/, markType);\n};\n// : (MarkType) → InputRule\n// Wraps matching text with em mark\nconst emRule = (markType) => {\n    // eslint-disable-next-line prefer-named-capture-group\n    return markInputRule(/(?:^|\\s)(?:(\\*|_)(?:([^*_]+))(\\*|_))$/, markType);\n};\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = (schema) => {\n    const rules = smartQuotes.concat(ellipsis, emDash);\n    rules.push(boldRule(schema.marks['strong']));\n    rules.push(emRule(schema.marks['em']));\n    rules.push(blockQuoteRule(schema.nodes['blockquote']));\n    rules.push(orderedListRule(schema.nodes['ordered_list']));\n    rules.push(bulletListRule(schema.nodes['bullet_list']));\n    rules.push(codeBlockRule(schema.nodes['code_block']));\n    rules.push(headingRule(schema.nodes['heading'], 6));\n    return inputRules({ rules });\n};\nconst getKeyboardShortcuts = (schema, options) => {\n    const historyKeyMap = {};\n    historyKeyMap['Mod-z'] = undo$1;\n    if (isMacOs) {\n        historyKeyMap['Shift-Mod-z'] = redo$1;\n    }\n    else {\n        historyKeyMap['Mod-y'] = redo$1;\n    }\n    const plugins = [\n        keymap({\n            'Mod-b': toggleMark(schema.marks['strong']),\n            'Mod-i': toggleMark(schema.marks['em']),\n            'Mod-u': toggleMark(schema.marks['u']),\n            'Mod-`': toggleMark(schema.marks['code']),\n        }),\n        keymap({\n            'Enter': splitListItem(schema.nodes['list_item']),\n            'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n                const { tr } = state;\n                const br = schema.nodes['hard_break'];\n                dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n                return true;\n            }),\n            'Mod-[': liftListItem(schema.nodes['list_item']),\n            'Mod-]': sinkListItem(schema.nodes['list_item']),\n            'Tab': sinkListItem(schema.nodes['list_item']),\n        }),\n        keymap(baseKeymap),\n    ];\n    if (options.history) {\n        plugins.push(keymap(historyKeyMap));\n    }\n    return plugins;\n};\nconst getDefaultPlugins = (schema, options) => {\n    const plugins = [];\n    if (options.keyboardShortcuts) {\n        plugins.push(...getKeyboardShortcuts(schema, { history: options.history }));\n    }\n    if (options.history) {\n        plugins.push(history());\n    }\n    if (options.inputRules) {\n        plugins.push(buildInputRules(schema));\n    }\n    return plugins;\n};\n\nconst defaultFeatures = {\n    linkOnPaste: true,\n    resizeImage: true,\n};\nconst DEFAULT_OPTIONS = {\n    content: null,\n    history: true,\n    keyboardShortcuts: true,\n    inputRules: true,\n    schema: schema,\n    plugins: [],\n    nodeViews: {},\n    attributes: {},\n    features: defaultFeatures,\n    handleScrollToSelection: null,\n    linkValidationPattern: '(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)|(mailto:.*[@].*)',\n};\nclass Editor {\n    options;\n    view;\n    constructor(options = DEFAULT_OPTIONS) {\n        this.options = { ...DEFAULT_OPTIONS, ...options };\n        this.createEditor();\n    }\n    valueChangesSubject = new Subject();\n    updateSubject = new Subject();\n    get valueChanges() {\n        return this.valueChangesSubject.asObservable();\n    }\n    get update() {\n        return this.updateSubject.asObservable();\n    }\n    get schema() {\n        return this.options.schema || schema;\n    }\n    get linkValidationPattern() {\n        return this.options.linkValidationPattern;\n    }\n    get commands() {\n        return new EditorCommands(this.view);\n    }\n    get features() {\n        return { ...defaultFeatures, ...this.options.features };\n    }\n    handleTransactions(tr) {\n        const state = this.view.state.apply(tr);\n        this.view.updateState(state);\n        this.updateSubject.next(this.view);\n        if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n            return;\n        }\n        const json = state.doc.toJSON();\n        this.valueChangesSubject.next(json);\n    }\n    createEditor() {\n        const { options, schema } = this;\n        const { content = null, nodeViews } = options;\n        const { history = true, keyboardShortcuts = true, inputRules = true } = options;\n        const doc = parseContent(content, schema, options.parseOptions);\n        const plugins = options.plugins ?? [];\n        const attributes = options.attributes ?? {};\n        const defaultPlugins = getDefaultPlugins(schema, {\n            history,\n            keyboardShortcuts,\n            inputRules,\n        });\n        this.view = new EditorView(null, {\n            state: EditorState.create({\n                doc,\n                schema,\n                plugins: [...defaultPlugins, ...plugins],\n            }),\n            nodeViews,\n            dispatchTransaction: this.handleTransactions.bind(this),\n            attributes,\n            handleScrollToSelection: options.handleScrollToSelection,\n        });\n    }\n    setContent(content) {\n        if (isNil(content)) {\n            return;\n        }\n        const { state } = this.view;\n        const { tr, doc } = state;\n        const newDoc = parseContent(content, this.schema, this.options.parseOptions);\n        tr.replaceWith(0, state.doc.content.size, newDoc);\n        // don't emit if both content is same\n        if (doc.eq(tr.doc)) {\n            return;\n        }\n        if (!tr.docChanged) {\n            return;\n        }\n        this.view.dispatch(tr);\n    }\n    registerPlugin(plugin) {\n        const { state } = this.view;\n        const plugins = [...state.plugins, plugin];\n        const newState = state.reconfigure({ plugins });\n        this.view.updateState(newState);\n    }\n    destroy() {\n        this.view.destroy();\n    }\n}\n\n/*\n * Public API Surface of ngx-editor\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DEFAULT_TOOLBAR, Editor, FloatingMenuComponent, ImageViewComponent, MenuComponent, NGX_EDITOR_CONFIG_TOKEN, NgxEditorComponent, NgxEditorModule, NgxEditorService, TOOLBAR_FULL, TOOLBAR_MINIMAL, Validators, emptyDoc, getKeyboardShortcuts, parseContent, provideMyServiceOptions, toDoc, toHTML };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}